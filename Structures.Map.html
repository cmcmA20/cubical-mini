<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Structures.Map</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Keyword">module</a> <a id="31" href="Structures.Map.html" class="Module">Structures.Map</a> <a id="46" class="Keyword">where</a>

<a id="53" class="Keyword">open</a> <a id="58" class="Keyword">import</a> <a id="65" href="Meta.Prelude.html" class="Module">Meta.Prelude</a>
<a id="78" class="Keyword">open</a> <a id="83" class="Keyword">import</a> <a id="90" href="Meta.Membership.html" class="Module">Meta.Membership</a>
<a id="106" class="Keyword">open</a> <a id="111" class="Keyword">import</a> <a id="118" href="Meta.Record.html" class="Module">Meta.Record</a>

<a id="131" class="Keyword">open</a> <a id="136" class="Keyword">import</a> <a id="143" href="Data.Empty.Base.html" class="Module">Data.Empty.Base</a>
<a id="159" class="Keyword">open</a> <a id="164" class="Keyword">import</a> <a id="171" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a>

<a id="188" class="Keyword">module</a> <a id="195" href="Structures.Map.html#195" class="Module">_</a> <a id="197" class="Symbol">{</a><a id="198" href="Structures.Map.html#198" class="Bound">ℓᵏ</a> <a id="201" href="Structures.Map.html#201" class="Bound">ℓᵛ</a> <a id="204" href="Structures.Map.html#204" class="Bound">ℓ</a><a id="205" class="Symbol">}</a> <a id="207" class="Symbol">(</a><a id="208" href="Structures.Map.html#208" class="Bound">K</a> <a id="210" class="Symbol">:</a> <a id="212" href="Foundations.Prim.Type.html#322" class="Primitive">𝒰</a> <a id="214" href="Structures.Map.html#198" class="Bound">ℓᵏ</a><a id="216" class="Symbol">)</a> <a id="218" class="Symbol">(</a><a id="219" href="Structures.Map.html#219" class="Bound">V</a> <a id="221" class="Symbol">:</a> <a id="223" href="Foundations.Prim.Type.html#322" class="Primitive">𝒰</a> <a id="225" href="Structures.Map.html#201" class="Bound">ℓᵛ</a><a id="227" class="Symbol">)</a> <a id="229" class="Symbol">(</a><a id="230" href="Structures.Map.html#230" class="Bound">M</a> <a id="232" class="Symbol">:</a> <a id="234" href="Foundations.Prim.Type.html#322" class="Primitive">𝒰</a> <a id="236" href="Structures.Map.html#204" class="Bound">ℓ</a><a id="237" class="Symbol">)</a> <a id="239" class="Keyword">where</a>
  <a id="247" class="Keyword">private</a> <a id="255" class="Keyword">variable</a>
    <a id="268" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="270" class="Symbol">:</a> <a id="272" href="Structures.Map.html#230" class="Bound">M</a>
    <a id="278" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="280" href="Structures.Map.html#280" class="Generalizable">k₁</a> <a id="283" href="Structures.Map.html#283" class="Generalizable">k₂</a> <a id="286" class="Symbol">:</a> <a id="288" href="Structures.Map.html#208" class="Bound">K</a>
    <a id="294" href="Structures.Map.html#294" class="Generalizable">v</a> <a id="296" href="Structures.Map.html#296" class="Generalizable">x</a> <a id="298" href="Structures.Map.html#298" class="Generalizable">y</a> <a id="300" class="Symbol">:</a> <a id="302" href="Structures.Map.html#219" class="Bound">V</a>

  <a id="307" class="Keyword">record</a> <a id="314" href="Structures.Map.html#314" class="Record">MapI</a> <a id="319" class="Symbol">:</a> <a id="321" href="Foundations.Prim.Type.html#322" class="Primitive">𝒰</a> <a id="323" class="Symbol">(</a><a id="324" href="Structures.Map.html#198" class="Bound">ℓᵏ</a> <a id="327" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="329" href="Structures.Map.html#201" class="Bound">ℓᵛ</a> <a id="332" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="334" href="Structures.Map.html#204" class="Bound">ℓ</a><a id="335" class="Symbol">)</a> <a id="337" class="Keyword">where</a>
    <a id="347" class="Keyword">no-eta-equality</a>
    <a id="367" class="Keyword">field</a>
      <a id="379" href="Structures.Map.html#379" class="Field">empty</a>  <a id="386" class="Symbol">:</a> <a id="388" href="Structures.Map.html#230" class="Bound">M</a>
      <a id="396" href="Structures.Map.html#396" class="Field">lookup</a> <a id="403" class="Symbol">:</a> <a id="405" href="Structures.Map.html#230" class="Bound">M</a> <a id="407" class="Symbol">→</a> <a id="409" href="Structures.Map.html#208" class="Bound">K</a> <a id="411" class="Symbol">→</a> <a id="413" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="419" href="Structures.Map.html#219" class="Bound">V</a>
      <a id="427" href="Structures.Map.html#427" class="Field">insert</a> <a id="434" class="Symbol">:</a> <a id="436" href="Structures.Map.html#230" class="Bound">M</a> <a id="438" class="Symbol">→</a> <a id="440" href="Structures.Map.html#208" class="Bound">K</a> <a id="442" class="Symbol">→</a> <a id="444" href="Structures.Map.html#219" class="Bound">V</a> <a id="446" class="Symbol">→</a> <a id="448" href="Structures.Map.html#230" class="Bound">M</a>
      <a id="456" href="Structures.Map.html#456" class="Field">remove</a> <a id="463" class="Symbol">:</a> <a id="465" href="Structures.Map.html#230" class="Bound">M</a> <a id="467" class="Symbol">→</a> <a id="469" href="Structures.Map.html#208" class="Bound">K</a> <a id="471" class="Symbol">→</a> <a id="473" href="Structures.Map.html#230" class="Bound">M</a>

      <a id="482" href="Structures.Map.html#482" class="Field">lookup-empty</a>     <a id="499" class="Symbol">:</a> <a id="501" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="508" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="510" href="Structures.Map.html#396" class="Field">lookup</a> <a id="517" href="Structures.Map.html#379" class="Field">empty</a> <a id="523" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="525" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="527" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
      <a id="541" href="Structures.Map.html#541" class="Field">lookup-insert</a>    <a id="558" class="Symbol">:</a> <a id="560" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="567" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="569" href="Structures.Map.html#396" class="Field">lookup</a> <a id="576" class="Symbol">(</a><a id="577" href="Structures.Map.html#427" class="Field">insert</a> <a id="584" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="586" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="588" href="Structures.Map.html#294" class="Generalizable">v</a><a id="589" class="Symbol">)</a> <a id="591" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="593" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="595" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="600" href="Structures.Map.html#294" class="Generalizable">v</a>
      <a id="608" href="Structures.Map.html#608" class="Field">lookup-remove</a>    <a id="625" class="Symbol">:</a> <a id="627" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="634" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="636" href="Structures.Map.html#396" class="Field">lookup</a> <a id="643" class="Symbol">(</a><a id="644" href="Structures.Map.html#456" class="Field">remove</a> <a id="651" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="653" href="Structures.Map.html#278" class="Generalizable">k</a><a id="654" class="Symbol">)</a> <a id="656" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="658" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="660" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
      <a id="674" href="Structures.Map.html#674" class="Field">insert-nop</a>       <a id="691" class="Symbol">:</a> <a id="693" href="Structures.Map.html#396" class="Field">lookup</a> <a id="700" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="702" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="704" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="706" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="711" href="Structures.Map.html#294" class="Generalizable">v</a>
                       <a id="736" class="Symbol">→</a> <a id="738" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="745" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="747" href="Structures.Map.html#427" class="Field">insert</a> <a id="754" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="756" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="758" href="Structures.Map.html#294" class="Generalizable">v</a> <a id="760" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="762" href="Structures.Map.html#268" class="Generalizable">m</a>
      <a id="770" href="Structures.Map.html#770" class="Field">insert-overwrite</a> <a id="787" class="Symbol">:</a> <a id="789" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="796" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="798" href="Structures.Map.html#427" class="Field">insert</a> <a id="805" class="Symbol">(</a><a id="806" href="Structures.Map.html#427" class="Field">insert</a> <a id="813" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="815" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="817" href="Structures.Map.html#296" class="Generalizable">x</a><a id="818" class="Symbol">)</a> <a id="820" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="822" href="Structures.Map.html#298" class="Generalizable">y</a> <a id="824" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="826" href="Structures.Map.html#427" class="Field">insert</a> <a id="833" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="835" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="837" href="Structures.Map.html#298" class="Generalizable">y</a>
      <a id="845" href="Structures.Map.html#845" class="Field">insert-insert</a>    <a id="862" class="Symbol">:</a> <a id="864" href="Structures.Map.html#280" class="Generalizable">k₁</a> <a id="867" href="Data.Empty.Base.html#512" class="Function Operator">≠</a> <a id="869" href="Structures.Map.html#283" class="Generalizable">k₂</a>
                       <a id="895" class="Symbol">→</a> <a id="897" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="904" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="906" href="Structures.Map.html#427" class="Field">insert</a> <a id="913" class="Symbol">(</a><a id="914" href="Structures.Map.html#427" class="Field">insert</a> <a id="921" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="923" href="Structures.Map.html#280" class="Generalizable">k₁</a> <a id="926" href="Structures.Map.html#296" class="Generalizable">x</a><a id="927" class="Symbol">)</a> <a id="929" href="Structures.Map.html#283" class="Generalizable">k₂</a> <a id="932" href="Structures.Map.html#298" class="Generalizable">y</a> <a id="934" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="936" href="Structures.Map.html#427" class="Field">insert</a> <a id="943" class="Symbol">(</a><a id="944" href="Structures.Map.html#427" class="Field">insert</a> <a id="951" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="953" href="Structures.Map.html#283" class="Generalizable">k₂</a> <a id="956" href="Structures.Map.html#298" class="Generalizable">y</a><a id="957" class="Symbol">)</a> <a id="959" href="Structures.Map.html#280" class="Generalizable">k₁</a> <a id="962" href="Structures.Map.html#296" class="Generalizable">x</a>
      <a id="970" href="Structures.Map.html#970" class="Field">insert-remove</a>    <a id="987" class="Symbol">:</a> <a id="989" href="Structures.Map.html#396" class="Field">lookup</a> <a id="996" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="998" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="1000" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="1002" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1007" href="Structures.Map.html#294" class="Generalizable">v</a>
                       <a id="1032" class="Symbol">→</a> <a id="1034" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="1041" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="1043" href="Structures.Map.html#427" class="Field">insert</a> <a id="1050" class="Symbol">(</a><a id="1051" href="Structures.Map.html#456" class="Field">remove</a> <a id="1058" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="1060" href="Structures.Map.html#278" class="Generalizable">k</a><a id="1061" class="Symbol">)</a> <a id="1063" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="1065" href="Structures.Map.html#294" class="Generalizable">v</a> <a id="1067" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="1069" href="Structures.Map.html#268" class="Generalizable">m</a>
      <a id="1077" href="Structures.Map.html#1077" class="Field">remove-nop</a>       <a id="1094" class="Symbol">:</a> <a id="1096" href="Structures.Map.html#396" class="Field">lookup</a> <a id="1103" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="1105" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="1107" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="1109" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                       <a id="1140" class="Symbol">→</a> <a id="1142" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="1149" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="1151" href="Structures.Map.html#456" class="Field">remove</a> <a id="1158" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="1160" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="1162" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="1164" href="Structures.Map.html#268" class="Generalizable">m</a>
      <a id="1172" href="Structures.Map.html#1172" class="Field">remove-remove</a>    <a id="1189" class="Symbol">:</a> <a id="1191" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="1198" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="1200" href="Structures.Map.html#456" class="Field">remove</a> <a id="1207" class="Symbol">(</a><a id="1208" href="Structures.Map.html#456" class="Field">remove</a> <a id="1215" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="1217" href="Structures.Map.html#280" class="Generalizable">k₁</a><a id="1219" class="Symbol">)</a> <a id="1221" href="Structures.Map.html#283" class="Generalizable">k₂</a> <a id="1224" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="1226" href="Structures.Map.html#456" class="Field">remove</a> <a id="1233" class="Symbol">(</a><a id="1234" href="Structures.Map.html#456" class="Field">remove</a> <a id="1241" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="1243" href="Structures.Map.html#283" class="Generalizable">k₂</a><a id="1245" class="Symbol">)</a> <a id="1247" href="Structures.Map.html#280" class="Generalizable">k₁</a>
      <a id="1256" href="Structures.Map.html#1256" class="Field">remove-insert</a>    <a id="1273" class="Symbol">:</a> <a id="1275" href="Structures.Map.html#396" class="Field">lookup</a> <a id="1282" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="1284" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="1286" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="1288" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                       <a id="1319" class="Symbol">→</a> <a id="1321" href="Foundations.Prim.Type.html#1007" class="Record">Erased</a> <a id="1328" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="1330" href="Structures.Map.html#456" class="Field">remove</a> <a id="1337" class="Symbol">(</a><a id="1338" href="Structures.Map.html#427" class="Field">insert</a> <a id="1345" href="Structures.Map.html#268" class="Generalizable">m</a> <a id="1347" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="1349" href="Structures.Map.html#294" class="Generalizable">v</a><a id="1350" class="Symbol">)</a> <a id="1352" href="Structures.Map.html#278" class="Generalizable">k</a> <a id="1354" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="1356" href="Structures.Map.html#268" class="Generalizable">m</a>

    <a id="1363" class="Keyword">instance</a>
      <a id="1378" href="Structures.Map.html#1378" class="Function">Membership-map</a> <a id="1393" class="Symbol">:</a> <a id="1395" href="Meta.Membership.html#185" class="Record">Membership</a> <a id="1406" href="Structures.Map.html#208" class="Bound">K</a> <a id="1408" href="Structures.Map.html#230" class="Bound">M</a> <a id="1410" href="Structures.Map.html#201" class="Bound">ℓᵛ</a>
      <a id="1419" href="Structures.Map.html#1378" class="Function">Membership-map</a> <a id="1434" class="Symbol">.</a><a id="1435" href="Meta.Membership.html#291" class="Field Operator">_∈_</a> <a id="1439" href="Structures.Map.html#1439" class="Bound">k</a> <a id="1441" href="Structures.Map.html#1441" class="Bound">m</a> <a id="1443" class="Symbol">=</a> <a id="1445" href="Meta.Underlying.html#3250" class="Function">Σ[</a> <a id="1448" href="Structures.Map.html#1448" class="Bound">v</a> <a id="1450" href="Meta.Underlying.html#3250" class="Function">꞉</a> <a id="1452" href="Structures.Map.html#219" class="Bound">V</a> <a id="1454" href="Meta.Underlying.html#3250" class="Function">]</a> <a id="1456" class="Symbol">(</a><a id="1457" href="Structures.Map.html#396" class="Field">lookup</a> <a id="1464" href="Structures.Map.html#1441" class="Bound">m</a> <a id="1466" href="Structures.Map.html#1439" class="Bound">k</a> <a id="1468" href="Foundations.Prim.Kan.html#1264" class="Function Operator">＝</a> <a id="1470" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1475" href="Structures.Map.html#1448" class="Bound">v</a><a id="1476" class="Symbol">)</a>

<a id="1479" class="Keyword">unquoteDecl</a> <a id="MapI-iso"></a><a id="1491" href="Structures.Map.html#1491" class="Function">MapI-iso</a> <a id="1500" class="Symbol">=</a> <a id="1502" href="Meta.Record.html#4650" class="Function">declare-record-iso</a> <a id="1521" href="Structures.Map.html#1491" class="Function">MapI-iso</a> <a id="1530" class="Symbol">(</a><a id="1531" class="Keyword">quote</a> <a id="1537" href="Structures.Map.html#314" class="Record">MapI</a><a id="1541" class="Symbol">)</a>
</pre></body></html>