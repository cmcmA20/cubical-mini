<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Meta.Variables</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Keyword">module</a> <a id="31" href="Meta.Variables.html" class="Module">Meta.Variables</a> <a id="46" class="Keyword">where</a>

<a id="53" class="Keyword">open</a> <a id="58" class="Keyword">import</a> <a id="65" href="Foundations.Base.html" class="Module">Foundations.Base</a>

<a id="83" class="Keyword">open</a> <a id="88" class="Keyword">import</a> <a id="95" href="Meta.Reflection.html" class="Module">Meta.Reflection</a>

<a id="112" class="Keyword">open</a> <a id="117" class="Keyword">import</a> <a id="124" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a>
<a id="139" class="Keyword">open</a> <a id="144" class="Keyword">import</a> <a id="151" href="Data.Fin.Computational.Base.html" class="Module">Data.Fin.Computational.Base</a>
<a id="179" class="Keyword">open</a> <a id="184" class="Keyword">import</a> <a id="191" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="206" class="Keyword">open</a> <a id="211" class="Keyword">import</a> <a id="218" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a>
<a id="234" class="Keyword">open</a> <a id="239" class="Keyword">import</a> <a id="246" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="260" class="Keyword">open</a> <a id="265" class="Keyword">import</a> <a id="272" href="Data.Vec.Inductive.Base.html" class="Module">Data.Vec.Inductive.Base</a>

<a id="297" class="Comment">--------------------------------------------------------------------------------</a>
<a id="378" class="Comment">-- Variable Binding for Terms</a>
<a id="408" class="Comment">--</a>
<a id="411" class="Comment">-- Many reflection tasks will require us to construct abstract</a>
<a id="474" class="Comment">-- syntax trees representing reified expressions, which we will</a>
<a id="538" class="Comment">-- use to construct a normal form. This works fine up until we</a>
<a id="601" class="Comment">-- need to start finding normal forms for equational theories</a>
<a id="663" class="Comment">-- with some sort of commutativity. For instance, which expression</a>
<a id="730" class="Comment">-- should we prefer: &#39;x + y&#39; or &#39;y + x&#39;?</a>
<a id="771" class="Comment">--</a>
<a id="774" class="Comment">-- The first solution we may try here is to impose some ordering on</a>
<a id="842" class="Comment">-- `Term`, and then sort our lists. However, trying to define this</a>
<a id="909" class="Comment">-- ordering is complex, and it&#39;s not even clear if we /can/ impose</a>
<a id="976" class="Comment">-- a meaningful ordering.</a>
<a id="1002" class="Comment">--</a>
<a id="1005" class="Comment">-- The next solution is to try and order the variables by the</a>
<a id="1067" class="Comment">-- time they are /introduced/, which is what this module aims to do.</a>
<a id="1136" class="Comment">-- We introduce a type &#39;Variables&#39;, which is intended to be an abstract</a>
<a id="1208" class="Comment">-- source of variable expressions. This allows us to produce fresh</a>
<a id="1275" class="Comment">-- (already quoted) variables of type &#39;Fin&#39;, which can be inserted</a>
<a id="1342" class="Comment">-- into the syntax tree while it&#39;s being constructed.</a>
<a id="1396" class="Comment">--</a>
<a id="1399" class="Comment">-- Once the syntax trees have been completed, we can grab an</a>
<a id="1460" class="Comment">-- environment using the aptly named &#39;environment&#39; function.</a>
<a id="1521" class="Comment">-- This returns a (already quoted) environment &#39;Vec A n&#39;,</a>
<a id="1579" class="Comment">-- which allows us to easily build up quoted</a>
<a id="1624" class="Comment">-- calls to our normalization functions rather easily.</a>

<a id="1680" class="Comment">-- We üõê the wisdom that reversing a list/vector is a type</a>
<a id="1738" class="Comment">-- error!</a>
<a id="1748" class="Keyword">data</a> <a id="Env"></a><a id="1753" href="Meta.Variables.html#1753" class="Datatype">Env</a> <a id="1757" class="Symbol">{</a><a id="1758" href="Meta.Variables.html#1758" class="Bound">‚Ñì</a><a id="1759" class="Symbol">}</a> <a id="1761" class="Symbol">(</a><a id="1762" href="Meta.Variables.html#1762" class="Bound">A</a> <a id="1764" class="Symbol">:</a> <a id="1766" href="Foundations.Prim.Type.html#295" class="Primitive">Type</a> <a id="1771" href="Meta.Variables.html#1758" class="Bound">‚Ñì</a><a id="1772" class="Symbol">)</a> <a id="1774" class="Symbol">:</a> <a id="1776" href="Agda.Builtin.Nat.html#203" class="Datatype">‚Ñï</a> <a id="1778" class="Symbol">‚Üí</a> <a id="1780" href="Foundations.Prim.Type.html#295" class="Primitive">Type</a> <a id="1785" href="Meta.Variables.html#1758" class="Bound">‚Ñì</a> <a id="1787" class="Keyword">where</a>
  <a id="Env.[]"></a><a id="1795" href="Meta.Variables.html#1795" class="InductiveConstructor">[]</a> <a id="1798" class="Symbol">:</a> <a id="1800" href="Meta.Variables.html#1753" class="Datatype">Env</a> <a id="1804" href="Meta.Variables.html#1762" class="Bound">A</a> <a id="1806" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>
  <a id="Env._‚ñ∑_"></a><a id="1813" href="Meta.Variables.html#1813" class="InductiveConstructor Operator">_‚ñ∑_</a> <a id="1817" class="Symbol">:</a> <a id="1819" class="Symbol">‚àÄ</a> <a id="1821" class="Symbol">{</a><a id="1822" href="Meta.Variables.html#1822" class="Bound">n</a><a id="1823" class="Symbol">}</a> <a id="1825" class="Symbol">‚Üí</a> <a id="1827" href="Meta.Variables.html#1753" class="Datatype">Env</a> <a id="1831" href="Meta.Variables.html#1762" class="Bound">A</a> <a id="1833" href="Meta.Variables.html#1822" class="Bound">n</a> <a id="1835" class="Symbol">‚Üí</a> <a id="1837" href="Meta.Variables.html#1762" class="Bound">A</a> <a id="1839" class="Symbol">‚Üí</a> <a id="1841" href="Meta.Variables.html#1753" class="Datatype">Env</a> <a id="1845" href="Meta.Variables.html#1762" class="Bound">A</a> <a id="1847" class="Symbol">(</a><a id="1848" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1852" href="Meta.Variables.html#1822" class="Bound">n</a><a id="1853" class="Symbol">)</a>

<a id="1856" class="Keyword">record</a> <a id="Variables"></a><a id="1863" href="Meta.Variables.html#1863" class="Record">Variables</a> <a id="1873" class="Symbol">{</a><a id="1874" href="Meta.Variables.html#1874" class="Bound">a</a><a id="1875" class="Symbol">}</a> <a id="1877" class="Symbol">(</a><a id="1878" href="Meta.Variables.html#1878" class="Bound">A</a> <a id="1880" class="Symbol">:</a> <a id="1882" href="Foundations.Prim.Type.html#295" class="Primitive">Type</a> <a id="1887" href="Meta.Variables.html#1874" class="Bound">a</a><a id="1888" class="Symbol">)</a> <a id="1890" class="Symbol">:</a> <a id="1892" href="Foundations.Prim.Type.html#295" class="Primitive">Type</a> <a id="1897" href="Meta.Variables.html#1874" class="Bound">a</a> <a id="1899" class="Keyword">where</a>
  <a id="1907" class="Keyword">constructor</a> <a id="mk-variables"></a><a id="1919" href="Meta.Variables.html#1919" class="InductiveConstructor">mk-variables</a>
  <a id="1934" class="Keyword">field</a>
    <a id="1944" class="Symbol">{</a><a id="Variables.nvars"></a><a id="1945" href="Meta.Variables.html#1945" class="Field">nvars</a><a id="1950" class="Symbol">}</a> <a id="1952" class="Symbol">:</a> <a id="1954" href="Agda.Builtin.Nat.html#203" class="Datatype">‚Ñï</a>
    <a id="1960" class="Comment">-- We store the bindings in reverse order so that it&#39;s</a>
    <a id="2019" class="Comment">-- cheap to add a new one.</a>
    <a id="Variables.bound"></a><a id="2050" href="Meta.Variables.html#2050" class="Field">bound</a> <a id="2056" class="Symbol">:</a> <a id="2058" href="Meta.Variables.html#1753" class="Datatype">Env</a> <a id="2062" href="Meta.Variables.html#1878" class="Bound">A</a> <a id="2064" href="Meta.Variables.html#1945" class="Field">nvars</a>
    <a id="Variables.variables"></a><a id="2074" href="Meta.Variables.html#2074" class="Field">variables</a> <a id="2084" class="Symbol">:</a> <a id="2086" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="2091" class="Symbol">‚Üí</a> <a id="2093" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2099" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>

<a id="2105" class="Keyword">open</a> <a id="2110" href="Meta.Variables.html#1863" class="Module">Variables</a>

<a id="2121" class="Keyword">private</a> <a id="2129" class="Keyword">variable</a>
  <a id="2140" href="Meta.Variables.html#2140" class="Generalizable">a</a> <a id="2142" href="Meta.Variables.html#2142" class="Generalizable">b</a> <a id="2144" class="Symbol">:</a> <a id="2146" href="Agda.Primitive.html#742" class="Postulate">Level</a>
  <a id="2154" href="Meta.Variables.html#2154" class="Generalizable">A</a> <a id="2156" class="Symbol">:</a> <a id="2158" href="Foundations.Prim.Type.html#295" class="Primitive">Type</a> <a id="2163" href="Meta.Variables.html#2140" class="Generalizable">a</a>
  <a id="2167" href="Meta.Variables.html#2167" class="Generalizable">n</a> <a id="2169" class="Symbol">:</a> <a id="2171" href="Agda.Builtin.Nat.html#203" class="Datatype">‚Ñï</a>

<a id="empty-vars"></a><a id="2174" href="Meta.Variables.html#2174" class="Function">empty-vars</a> <a id="2185" class="Symbol">:</a> <a id="2187" href="Meta.Variables.html#1863" class="Record">Variables</a> <a id="2197" href="Meta.Variables.html#2154" class="Generalizable">A</a>
<a id="2199" href="Meta.Variables.html#2174" class="Function">empty-vars</a> <a id="2210" class="Symbol">=</a> <a id="2212" href="Meta.Variables.html#1919" class="InductiveConstructor">mk-variables</a> <a id="2225" href="Meta.Variables.html#1795" class="InductiveConstructor">[]</a> <a id="2228" class="Symbol">(Œª</a> <a id="2231" href="Meta.Variables.html#2231" class="Bound">_</a> <a id="2233" class="Symbol">‚Üí</a> <a id="2235" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="2242" class="Symbol">)</a>

<a id="2245" class="Keyword">private</a>
  <a id="bind"></a><a id="2255" href="Meta.Variables.html#2255" class="Function">bind</a> <a id="2260" class="Symbol">:</a> <a id="2262" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="2267" class="Symbol">‚Üí</a> <a id="2269" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="2274" class="Symbol">‚Üí</a> <a id="2276" class="Symbol">(</a><a id="2277" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="2282" class="Symbol">‚Üí</a> <a id="2284" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2290" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="2294" class="Symbol">)</a> <a id="2296" class="Symbol">‚Üí</a> <a id="2298" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="2303" class="Symbol">‚Üí</a> <a id="2305" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2311" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="2318" href="Meta.Variables.html#2255" class="Function">bind</a> <a id="2323" href="Meta.Variables.html#2323" class="Bound">tm</a> <a id="2326" href="Meta.Variables.html#2326" class="Bound">tm-var</a> <a id="2333" href="Meta.Variables.html#2333" class="Bound">lookup</a> <a id="2340" href="Meta.Variables.html#2340" class="Bound">tm‚Ä≤</a> <a id="2344" class="Keyword">with</a> <a id="2349" href="Meta.Variables.html#2333" class="Bound">lookup</a> <a id="2356" href="Meta.Variables.html#2340" class="Bound">tm‚Ä≤</a> <a id="2360" class="Symbol">|</a> <a id="2362" href="Meta.Variables.html#2323" class="Bound">tm</a> <a id="2365" href="Meta.Reflection.html#5649" class="Function Operator">term=?</a> <a id="2372" href="Meta.Variables.html#2340" class="Bound">tm‚Ä≤</a>
  <a id="2378" class="Symbol">...</a> <a id="2382" class="Symbol">|</a> <a id="2384" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2389" href="Meta.Variables.html#2389" class="Bound">tm‚Ä≤-var</a> <a id="2397" class="Symbol">|</a> <a id="2399" class="Symbol">_</a> <a id="2401" class="Symbol">=</a> <a id="2403" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2408" href="Meta.Variables.html#2389" class="Bound">tm‚Ä≤-var</a>
  <a id="2418" class="Symbol">...</a> <a id="2422" class="Symbol">|</a> <a id="2424" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>      <a id="2437" class="Symbol">|</a> <a id="2439" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2444" class="Symbol">=</a> <a id="2446" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2451" class="Bound">tm-var</a>
  <a id="2460" class="Symbol">...</a> <a id="2464" class="Symbol">|</a> <a id="2466" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>      <a id="2479" class="Symbol">|</a> <a id="2481" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="2487" class="Symbol">=</a> <a id="2489" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

  <a id="fin-term"></a><a id="2500" href="Meta.Variables.html#2500" class="Function">fin-term</a> <a id="2509" class="Symbol">:</a> <a id="2511" href="Agda.Builtin.Nat.html#203" class="Datatype">‚Ñï</a> <a id="2513" class="Symbol">‚Üí</a> <a id="2515" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="2522" href="Meta.Variables.html#2500" class="Function">fin-term</a> <a id="2531" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>    <a id="2539" class="Symbol">=</a> <a id="2541" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="2545" class="Symbol">(</a><a id="2546" class="Keyword">quote</a> <a id="2552" href="Data.Fin.Computational.Base.html#538" class="Function">fzero</a><a id="2557" class="Symbol">)</a> <a id="2559" class="Symbol">(</a><a id="2560" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a> <a id="2568" href="Meta.Reflection.html#2903" class="InductiveConstructor Operator">h‚à∑</a> <a id="2571" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2573" class="Symbol">)</a>
  <a id="2577" href="Meta.Variables.html#2500" class="Function">fin-term</a> <a id="2586" class="Symbol">(</a><a id="2587" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2591" href="Meta.Variables.html#2591" class="Bound">n</a><a id="2592" class="Symbol">)</a> <a id="2594" class="Symbol">=</a> <a id="2596" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="2600" class="Symbol">(</a><a id="2601" class="Keyword">quote</a> <a id="2607" href="Data.Fin.Computational.Base.html#576" class="Function">fsuc</a><a id="2611" class="Symbol">)</a> <a id="2613" class="Symbol">(</a><a id="2614" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a> <a id="2622" href="Meta.Reflection.html#2903" class="InductiveConstructor Operator">h‚à∑</a> <a id="2625" href="Meta.Variables.html#2500" class="Function">fin-term</a> <a id="2634" href="Meta.Variables.html#2591" class="Bound">n</a> <a id="2636" href="Meta.Reflection.html#2871" class="InductiveConstructor Operator">v‚à∑</a> <a id="2639" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2641" class="Symbol">)</a>

  <a id="env-rec"></a><a id="2646" href="Meta.Variables.html#2646" class="Function">env-rec</a> <a id="2654" class="Symbol">:</a> <a id="2656" class="Symbol">(</a><a id="2657" href="Meta.Variables.html#2657" class="Bound">Mot</a> <a id="2661" class="Symbol">:</a> <a id="2663" class="Symbol">@</a><a id="2664" class="Symbol">0</a> <a id="2666" href="Agda.Builtin.Nat.html#203" class="Datatype">‚Ñï</a> <a id="2668" class="Symbol">‚Üí</a> <a id="2670" href="Foundations.Prim.Type.html#295" class="Primitive">Type</a> <a id="2675" href="Meta.Variables.html#2142" class="Generalizable">b</a><a id="2676" class="Symbol">)</a>
          <a id="2688" class="Symbol">‚Üí</a> <a id="2690" class="Symbol">(‚àÄ</a> <a id="2693" class="Symbol">{</a><a id="2694" href="Meta.Variables.html#2694" class="Bound">n</a><a id="2695" class="Symbol">}</a> <a id="2697" class="Symbol">‚Üí</a> <a id="2699" href="Meta.Variables.html#2657" class="Bound">Mot</a> <a id="2703" href="Meta.Variables.html#2694" class="Bound">n</a> <a id="2705" class="Symbol">‚Üí</a> <a id="2707" href="Meta.Variables.html#2154" class="Generalizable">A</a> <a id="2709" class="Symbol">‚Üí</a> <a id="2711" href="Meta.Variables.html#2657" class="Bound">Mot</a> <a id="2715" class="Symbol">(</a><a id="2716" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2720" href="Meta.Variables.html#2694" class="Bound">n</a><a id="2721" class="Symbol">))</a>
          <a id="2734" class="Symbol">‚Üí</a> <a id="2736" href="Meta.Variables.html#2657" class="Bound">Mot</a> <a id="2740" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>
          <a id="2755" class="Symbol">‚Üí</a> <a id="2757" href="Meta.Variables.html#1753" class="Datatype">Env</a> <a id="2761" href="Meta.Variables.html#2154" class="Generalizable">A</a> <a id="2763" href="Meta.Variables.html#2167" class="Generalizable">n</a> <a id="2765" class="Symbol">‚Üí</a> <a id="2767" href="Meta.Variables.html#2657" class="Bound">Mot</a> <a id="2771" href="Meta.Variables.html#2167" class="Generalizable">n</a>
  <a id="2775" href="Meta.Variables.html#2646" class="Function">env-rec</a> <a id="2783" href="Meta.Variables.html#2783" class="Bound">Mot</a> <a id="2787" href="Meta.Variables.html#2787" class="Bound Operator">_‚ñ∑*_</a> <a id="2792" href="Meta.Variables.html#2792" class="Bound">[]*</a> <a id="2796" href="Meta.Variables.html#1795" class="InductiveConstructor">[]</a>       <a id="2805" class="Symbol">=</a> <a id="2807" href="Meta.Variables.html#2792" class="Bound">[]*</a>
  <a id="2813" href="Meta.Variables.html#2646" class="Function">env-rec</a> <a id="2821" href="Meta.Variables.html#2821" class="Bound">Mot</a> <a id="2825" href="Meta.Variables.html#2825" class="Bound Operator">_‚ñ∑*_</a> <a id="2830" href="Meta.Variables.html#2830" class="Bound">[]*</a> <a id="2834" class="Symbol">(</a><a id="2835" href="Meta.Variables.html#2835" class="Bound">xs</a> <a id="2838" href="Meta.Variables.html#1813" class="InductiveConstructor Operator">‚ñ∑</a> <a id="2840" href="Meta.Variables.html#2840" class="Bound">x</a><a id="2841" class="Symbol">)</a> <a id="2843" class="Symbol">=</a> <a id="2845" href="Meta.Variables.html#2646" class="Function">env-rec</a> <a id="2853" class="Symbol">(Œª</a> <a id="2856" href="Meta.Variables.html#2856" class="Bound">z</a> <a id="2858" class="Symbol">‚Üí</a> <a id="2860" href="Meta.Variables.html#2821" class="Bound">Mot</a> <a id="2864" class="Symbol">(</a><a id="2865" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2869" href="Meta.Variables.html#2856" class="Bound">z</a><a id="2870" class="Symbol">))</a> <a id="2873" href="Meta.Variables.html#2825" class="Bound Operator">_‚ñ∑*_</a> <a id="2878" class="Symbol">(</a><a id="2879" href="Meta.Variables.html#2830" class="Bound">[]*</a> <a id="2883" href="Meta.Variables.html#2825" class="Bound Operator">‚ñ∑*</a> <a id="2886" href="Meta.Variables.html#2840" class="Bound">x</a><a id="2887" class="Symbol">)</a> <a id="2889" href="Meta.Variables.html#2835" class="Bound">xs</a>

  <a id="reverse-env"></a><a id="2895" href="Meta.Variables.html#2895" class="Function">reverse-env</a> <a id="2907" class="Symbol">:</a> <a id="2909" href="Meta.Variables.html#1753" class="Datatype">Env</a> <a id="2913" href="Meta.Variables.html#2154" class="Generalizable">A</a> <a id="2915" href="Meta.Variables.html#2167" class="Generalizable">n</a> <a id="2917" class="Symbol">‚Üí</a> <a id="2919" href="Data.Vec.Inductive.Base.html#292" class="Datatype">Vec</a> <a id="2923" href="Meta.Variables.html#2154" class="Generalizable">A</a> <a id="2925" href="Meta.Variables.html#2167" class="Generalizable">n</a>
  <a id="2929" href="Meta.Variables.html#2895" class="Function">reverse-env</a> <a id="2941" class="Symbol">{</a><a id="2942" href="Meta.Variables.html#2942" class="Bound">A</a><a id="2943" class="Symbol">}</a> <a id="2945" href="Meta.Variables.html#2945" class="Bound">env</a> <a id="2949" class="Symbol">=</a> <a id="2951" href="Meta.Variables.html#2646" class="Function">env-rec</a> <a id="2959" class="Symbol">(</a><a id="2960" href="Data.Vec.Inductive.Base.html#292" class="Datatype">Vec</a> <a id="2964" href="Meta.Variables.html#2942" class="Bound">A</a><a id="2965" class="Symbol">)</a> <a id="2967" class="Symbol">(Œª</a> <a id="2970" href="Meta.Variables.html#2970" class="Bound">xs</a> <a id="2973" href="Meta.Variables.html#2973" class="Bound">x</a> <a id="2975" class="Symbol">‚Üí</a> <a id="2977" href="Meta.Variables.html#2973" class="Bound">x</a> <a id="2979" href="Data.Vec.Inductive.Base.html#352" class="InductiveConstructor Operator">‚à∑</a> <a id="2981" href="Meta.Variables.html#2970" class="Bound">xs</a><a id="2983" class="Symbol">)</a> <a id="2985" href="Data.Vec.Inductive.Base.html#333" class="InductiveConstructor">[]</a> <a id="2988" href="Meta.Variables.html#2945" class="Bound">env</a>



<a id="2995" class="Comment">-- Get the variable associated with a term, binding a new</a>
<a id="3053" class="Comment">-- one as need be. Note that this returns the variable</a>
<a id="3108" class="Comment">-- as a quoted term!</a>
<a id="bind-var"></a><a id="3129" href="Meta.Variables.html#3129" class="Function">bind-var</a> <a id="3138" class="Symbol">:</a> <a id="3140" href="Meta.Variables.html#1863" class="Record">Variables</a> <a id="3150" href="Meta.Variables.html#2154" class="Generalizable">A</a> <a id="3152" class="Symbol">‚Üí</a> <a id="3154" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="3159" class="Symbol">‚Üí</a> <a id="3161" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="3164" class="Symbol">(</a><a id="3165" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="3170" href="Foundations.Sigma.Base.html#588" class="Function Operator">√ó</a> <a id="3172" href="Meta.Variables.html#1863" class="Record">Variables</a> <a id="3182" href="Meta.Variables.html#2154" class="Generalizable">A</a><a id="3183" class="Symbol">)</a>
<a id="3185" href="Meta.Variables.html#3129" class="Function">bind-var</a> <a id="3194" href="Meta.Variables.html#3194" class="Bound">vs</a> <a id="3197" href="Meta.Variables.html#3197" class="Bound">tm</a> <a id="3200" class="Keyword">with</a> <a id="3205" href="Meta.Variables.html#2074" class="Field">variables</a> <a id="3215" href="Meta.Variables.html#3194" class="Bound">vs</a> <a id="3218" href="Meta.Variables.html#3197" class="Bound">tm</a>
<a id="3221" class="Symbol">...</a> <a id="3225" class="Symbol">|</a> <a id="3227" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3232" href="Meta.Variables.html#3232" class="Bound">v</a> <a id="3234" class="Symbol">=</a> <a id="3236" href="Meta.Idiom.html#555" class="Field">pure</a> <a id="3241" class="Symbol">(</a><a id="3242" href="Meta.Variables.html#3232" class="Bound">v</a> <a id="3244" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3246" class="Bound">vs</a><a id="3248" class="Symbol">)</a>
<a id="3250" class="Symbol">...</a> <a id="3254" class="Symbol">|</a> <a id="3256" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="3264" class="Symbol">=</a> <a id="3266" class="Keyword">do</a>
  <a id="3271" href="Meta.Variables.html#3271" class="Bound">a</a> <a id="3273" href="Meta.Bind.html#190" class="Field Operator">‚Üê</a> <a id="3275" href="Agda.Builtin.Reflection.html#9142" class="Postulate">unquoteTC</a> <a id="3285" class="Bound">tm</a>
  <a id="3290" class="Keyword">let</a> <a id="3294" href="Meta.Variables.html#3294" class="Bound">v</a> <a id="3296" class="Symbol">=</a> <a id="3298" href="Meta.Variables.html#2500" class="Function">fin-term</a> <a id="3307" class="Symbol">(</a><a id="3308" href="Meta.Variables.html#1945" class="Field">nvars</a> <a id="3314" class="Bound">vs</a><a id="3316" class="Symbol">)</a>
      <a id="3324" href="Meta.Variables.html#3324" class="Bound">vs‚Ä≤</a> <a id="3328" class="Symbol">=</a> <a id="3330" href="Meta.Variables.html#1919" class="InductiveConstructor">mk-variables</a> <a id="3343" class="Symbol">(</a><a id="3344" href="Meta.Variables.html#2050" class="Field">bound</a> <a id="3350" class="Bound">vs</a> <a id="3353" href="Meta.Variables.html#1813" class="InductiveConstructor Operator">‚ñ∑</a> <a id="3355" href="Meta.Variables.html#3271" class="Bound">a</a><a id="3356" class="Symbol">)</a>
                         <a id="3383" class="Symbol">(</a><a id="3384" href="Meta.Variables.html#2255" class="Function">bind</a> <a id="3389" class="Bound">tm</a> <a id="3392" href="Meta.Variables.html#3294" class="Bound">v</a> <a id="3394" class="Symbol">(</a><a id="3395" href="Meta.Variables.html#2074" class="Field">variables</a> <a id="3405" class="Bound">vs</a><a id="3407" class="Symbol">))</a>
  <a id="3412" href="Meta.Idiom.html#555" class="Field">pure</a> <a id="3417" class="Symbol">(</a><a id="3418" href="Meta.Variables.html#3294" class="Bound">v</a> <a id="3420" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3422" href="Meta.Variables.html#3324" class="Bound">vs‚Ä≤</a><a id="3425" class="Symbol">)</a>

<a id="environment"></a><a id="3428" href="Meta.Variables.html#3428" class="Function">environment</a> <a id="3440" class="Symbol">:</a> <a id="3442" href="Meta.Variables.html#1863" class="Record">Variables</a> <a id="3452" href="Meta.Variables.html#2154" class="Generalizable">A</a> <a id="3454" class="Symbol">‚Üí</a> <a id="3456" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="3459" class="Symbol">(</a><a id="3460" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="3465" href="Foundations.Sigma.Base.html#588" class="Function Operator">√ó</a> <a id="3467" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="3471" class="Symbol">)</a>
<a id="3473" href="Meta.Variables.html#3428" class="Function">environment</a> <a id="3485" href="Meta.Variables.html#3485" class="Bound">vs</a> <a id="3488" class="Symbol">=</a> <a id="3490" class="Keyword">do</a>
  <a id="3495" href="Meta.Variables.html#3495" class="Bound">env</a> <a id="3499" href="Meta.Bind.html#190" class="Field Operator">‚Üê</a> <a id="3501" href="Agda.Builtin.Reflection.html#9089" class="Postulate">quoteTC</a> <a id="3509" class="Symbol">(</a><a id="3510" href="Meta.Variables.html#2895" class="Function">reverse-env</a> <a id="3522" class="Symbol">(</a><a id="3523" href="Meta.Variables.html#2050" class="Field">bound</a> <a id="3529" href="Meta.Variables.html#3485" class="Bound">vs</a><a id="3531" class="Symbol">))</a>
  <a id="3536" href="Meta.Variables.html#3536" class="Bound">size</a> <a id="3541" href="Meta.Bind.html#190" class="Field Operator">‚Üê</a> <a id="3543" href="Agda.Builtin.Reflection.html#9089" class="Postulate">quoteTC</a> <a id="3551" class="Symbol">(</a><a id="3552" href="Meta.Variables.html#1945" class="Field">nvars</a> <a id="3558" href="Meta.Variables.html#3485" class="Bound">vs</a><a id="3560" class="Symbol">)</a>
  <a id="3564" href="Meta.Idiom.html#555" class="Field">pure</a> <a id="3569" class="Symbol">(</a><a id="3570" href="Meta.Variables.html#3536" class="Bound">size</a> <a id="3575" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3577" href="Meta.Variables.html#3495" class="Bound">env</a><a id="3580" class="Symbol">)</a>
</pre></body></html>