<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Meta.Reflection.Signature</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Keyword">module</a> <a id="31" href="Meta.Reflection.Signature.html" class="Module">Meta.Reflection.Signature</a> <a id="57" class="Keyword">where</a>

<a id="64" class="Keyword">open</a> <a id="69" class="Keyword">import</a> <a id="76" href="Meta.Prelude.html" class="Module">Meta.Prelude</a>

<a id="90" class="Keyword">open</a> <a id="95" class="Keyword">import</a> <a id="102" href="Meta.Effect.Foldable.html" class="Module">Meta.Effect.Foldable</a>
<a id="123" class="Keyword">open</a> <a id="128" class="Keyword">import</a> <a id="135" href="Meta.Effect.Traversable.html" class="Module">Meta.Effect.Traversable</a>
<a id="159" class="Keyword">open</a> <a id="164" class="Keyword">import</a> <a id="171" href="Meta.Show.html" class="Module">Meta.Show</a>
<a id="181" class="Keyword">open</a> <a id="186" class="Keyword">import</a> <a id="193" href="Meta.Reflection.Base.html" class="Module">Meta.Reflection.Base</a>
<a id="214" class="Keyword">open</a> <a id="219" class="Keyword">import</a> <a id="226" href="Meta.Reflection.Neutral.html" class="Module">Meta.Reflection.Neutral</a>
<a id="250" class="Keyword">open</a> <a id="255" class="Keyword">import</a> <a id="262" href="Meta.Reflection.Subst.html" class="Module">Meta.Reflection.Subst</a>

<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a>
<a id="312" class="Keyword">open</a> <a id="317" class="Keyword">import</a> <a id="324" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="339" class="Keyword">open</a> <a id="344" class="Keyword">import</a> <a id="351" href="Data.List.Instances.Map.html" class="Module">Data.List.Instances.Map</a>
<a id="375" class="Keyword">open</a> <a id="380" class="Keyword">import</a> <a id="387" href="Data.List.Instances.Foldable.html" class="Module">Data.List.Instances.Foldable</a>
<a id="416" class="Keyword">open</a> <a id="421" class="Keyword">import</a> <a id="428" href="Data.List.Instances.FromProduct.html" class="Module">Data.List.Instances.FromProduct</a>
<a id="460" class="Keyword">open</a> <a id="465" class="Keyword">import</a> <a id="472" href="Data.List.Instances.Traversable.html" class="Module">Data.List.Instances.Traversable</a>
<a id="504" class="Keyword">open</a> <a id="509" class="Keyword">import</a> <a id="516" href="Data.List.Operations.html" class="Module">Data.List.Operations</a>
<a id="537" class="Keyword">open</a> <a id="542" class="Keyword">import</a> <a id="549" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a>
<a id="565" class="Keyword">open</a> <a id="570" class="Keyword">import</a> <a id="577" href="Data.Maybe.Instances.Bind.html" class="Module">Data.Maybe.Instances.Bind</a>
<a id="603" class="Keyword">open</a> <a id="608" class="Keyword">import</a> <a id="615" href="Data.Maybe.Instances.Map.html" class="Module">Data.Maybe.Instances.Map</a>
<a id="640" class="Keyword">open</a> <a id="645" class="Keyword">import</a> <a id="652" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="666" class="Keyword">open</a> <a id="671" class="Keyword">import</a> <a id="678" href="Data.Reflection.Abs.html" class="Module">Data.Reflection.Abs</a>
<a id="698" class="Keyword">open</a> <a id="703" class="Keyword">import</a> <a id="710" href="Data.Reflection.Argument.html" class="Module">Data.Reflection.Argument</a>
<a id="735" class="Keyword">open</a> <a id="740" class="Keyword">import</a> <a id="747" href="Data.Reflection.Error.html" class="Module">Data.Reflection.Error</a>
<a id="769" class="Keyword">open</a> <a id="774" class="Keyword">import</a> <a id="781" href="Data.Reflection.Fixity.html" class="Module">Data.Reflection.Fixity</a>
<a id="804" class="Keyword">open</a> <a id="809" class="Keyword">import</a> <a id="816" href="Data.Reflection.Instances.FromString.html" class="Module">Data.Reflection.Instances.FromString</a>
<a id="853" class="Keyword">open</a> <a id="858" class="Keyword">import</a> <a id="865" href="Data.Reflection.Instances.Show.html" class="Module">Data.Reflection.Instances.Show</a>
<a id="896" class="Keyword">open</a> <a id="901" class="Keyword">import</a> <a id="908" href="Data.Reflection.Literal.html" class="Module">Data.Reflection.Literal</a>
<a id="932" class="Keyword">open</a> <a id="937" class="Keyword">import</a> <a id="944" href="Data.Reflection.Meta.html" class="Module">Data.Reflection.Meta</a>
<a id="965" class="Keyword">open</a> <a id="970" class="Keyword">import</a> <a id="977" href="Data.Reflection.Name.html" class="Module">Data.Reflection.Name</a>
<a id="998" class="Keyword">open</a> <a id="1003" class="Keyword">import</a> <a id="1010" href="Data.Reflection.Term.html" class="Module">Data.Reflection.Term</a>
<a id="1031" class="Keyword">open</a> <a id="1036" class="Keyword">import</a> <a id="1043" href="Data.String.Instances.Append.html" class="Module">Data.String.Instances.Append</a>

<a id="1073" class="Comment">-- Look up a data type definition in the signature.</a>
<a id="get-data-type"></a><a id="1125" href="Meta.Reflection.Signature.html#1125" class="Function">get-data-type</a> <a id="1139" class="Symbol">:</a> <a id="1141" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="1146" class="Symbol">→</a> <a id="1148" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="1151" class="Symbol">(</a><a id="1152" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1154" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="1156" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1161" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="1165" class="Symbol">)</a>
<a id="1167" href="Meta.Reflection.Signature.html#1125" class="Function">get-data-type</a> <a id="1181" href="Meta.Reflection.Signature.html#1181" class="Bound">n</a> <a id="1183" class="Symbol">=</a> <a id="1185" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="1200" href="Meta.Reflection.Signature.html#1181" class="Bound">n</a> <a id="1202" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="1206" class="Symbol">λ</a> <a id="1208" class="Keyword">where</a>
  <a id="1216" class="Symbol">(</a><a id="1217" href="Agda.Builtin.Reflection.html#7558" class="InductiveConstructor">data-type</a> <a id="1227" href="Meta.Reflection.Signature.html#1227" class="Bound">pars</a> <a id="1232" href="Meta.Reflection.Signature.html#1232" class="Bound">cs</a><a id="1234" class="Symbol">)</a> <a id="1236" class="Symbol">→</a> <a id="1238" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="1243" class="Symbol">(</a><a id="1244" href="Meta.Reflection.Signature.html#1227" class="Bound">pars</a> <a id="1249" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1251" href="Meta.Reflection.Signature.html#1232" class="Bound">cs</a><a id="1253" class="Symbol">)</a>
  <a id="1257" class="CatchallClause Symbol">_</a> <a id="1259" class="Symbol">→</a> <a id="1261" href="Agda.Builtin.Reflection.html#8815" class="Postulate">type-error</a> <a id="1272" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="1274" class="String">&quot;get-data-type: definition &quot;</a> <a id="1303" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1305" href="Data.Reflection.Error.html#256" class="InductiveConstructor">name-err</a> <a id="1314" href="Meta.Reflection.Signature.html#1181" class="Bound">n</a> <a id="1316" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1318" class="String">&quot; is not a data type.&quot;</a> <a id="1341" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="1344" class="Comment">-- Look up a record type definition in the signature.</a>
<a id="get-record-type"></a><a id="1398" href="Meta.Reflection.Signature.html#1398" class="Function">get-record-type</a> <a id="1414" class="Symbol">:</a> <a id="1416" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="1421" class="Symbol">→</a> <a id="1423" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="1426" class="Symbol">(</a><a id="1427" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="1432" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="1434" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1439" class="Symbol">(</a><a id="1440" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1444" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="1448" class="Symbol">))</a>
<a id="1451" href="Meta.Reflection.Signature.html#1398" class="Function">get-record-type</a> <a id="1467" href="Meta.Reflection.Signature.html#1467" class="Bound">n</a> <a id="1469" class="Symbol">=</a> <a id="1471" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="1486" href="Meta.Reflection.Signature.html#1467" class="Bound">n</a> <a id="1488" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="1492" class="Symbol">λ</a> <a id="1494" class="Keyword">where</a>
  <a id="1502" class="Symbol">(</a><a id="1503" href="Agda.Builtin.Reflection.html#7617" class="InductiveConstructor">record-type</a> <a id="1515" href="Meta.Reflection.Signature.html#1515" class="Bound">conm</a> <a id="1520" href="Meta.Reflection.Signature.html#1520" class="Bound">fields</a><a id="1526" class="Symbol">)</a> <a id="1528" class="Symbol">→</a> <a id="1530" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="1535" class="Symbol">(</a><a id="1536" href="Meta.Reflection.Signature.html#1515" class="Bound">conm</a> <a id="1541" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1543" href="Meta.Reflection.Signature.html#1520" class="Bound">fields</a><a id="1549" class="Symbol">)</a>
  <a id="1553" class="CatchallClause Symbol">_</a> <a id="1555" class="Symbol">→</a> <a id="1557" href="Agda.Builtin.Reflection.html#8815" class="Postulate">type-error</a> <a id="1568" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="1570" class="String">&quot;get-record-type: definition &quot;</a> <a id="1601" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1603" href="Data.Reflection.Error.html#256" class="InductiveConstructor">name-err</a> <a id="1612" href="Meta.Reflection.Signature.html#1467" class="Bound">n</a> <a id="1614" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1616" class="String">&quot; is not a record type.&quot;</a> <a id="1641" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="1644" class="Comment">-- Representation of a data/record constructor.</a>
<a id="1692" class="Keyword">record</a> <a id="Constructor"></a><a id="1699" href="Meta.Reflection.Signature.html#1699" class="Record">Constructor</a> <a id="1711" class="Symbol">:</a> <a id="1713" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="1718" class="Keyword">where</a>
  <a id="1726" class="Keyword">constructor</a> <a id="conhead"></a><a id="1738" href="Meta.Reflection.Signature.html#1738" class="InductiveConstructor">conhead</a>
  <a id="1748" class="Keyword">field</a>
    <a id="1758" class="Comment">-- Name of the constructor itself:</a>
    <a id="Constructor.con-name"></a><a id="1797" href="Meta.Reflection.Signature.html#1797" class="Field">con-name</a>      <a id="1811" class="Symbol">:</a> <a id="1813" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>

    <a id="1823" class="Comment">-- Name of the data type:</a>
    <a id="Constructor.con-data"></a><a id="1853" href="Meta.Reflection.Signature.html#1853" class="Field">con-data</a>      <a id="1867" class="Symbol">:</a> <a id="1869" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>

    <a id="1879" class="Comment">-- Argument telescope for the constructor, with the datatype&#39;s</a>
    <a id="1946" class="Comment">-- parameters removed.</a>
    <a id="Constructor.con-arguments"></a><a id="1973" href="Meta.Reflection.Signature.html#1973" class="Field">con-arguments</a> <a id="1987" class="Symbol">:</a> <a id="1989" href="Data.Reflection.Term.html#800" class="Function">Telescope</a>

    <a id="2004" class="Comment">-- Return type of the constructor.</a>
    <a id="Constructor.con-returns"></a><a id="2043" href="Meta.Reflection.Signature.html#2043" class="Field">con-returns</a>   <a id="2057" class="Symbol">:</a> <a id="2059" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>

  <a id="2067" class="Comment">-- For the scoping of con-arguments and con-returns, we have</a>
  <a id="2130" class="Comment">--</a>
  <a id="2135" class="Comment">--    data D Δ : Type ... where</a>
  <a id="2169" class="Comment">--      c : Γ → D δ</a>
  <a id="2191" class="Comment">--</a>
  <a id="2196" class="Comment">--    becoming</a>
  <a id="2213" class="Comment">--</a>
  <a id="2218" class="Comment">--      c : ∀ {Δ} → Γ → D δ</a>
  <a id="2248" class="Comment">--</a>
  <a id="2253" class="Comment">--    in the signature. con-arguments is Δ ⊢ Γ, and con-returns is Δ, Γ ⊢ D δ.</a>

<a id="get-type-constructors"></a><a id="2333" href="Meta.Reflection.Signature.html#2333" class="Function">get-type-constructors</a> <a id="2355" class="Symbol">:</a> <a id="2357" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2362" class="Symbol">→</a> <a id="2364" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="2367" class="Symbol">(</a><a id="2368" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2373" href="Meta.Reflection.Signature.html#1699" class="Record">Constructor</a><a id="2384" class="Symbol">)</a>
<a id="2386" href="Meta.Reflection.Signature.html#2333" class="Function">get-type-constructors</a> <a id="2408" href="Meta.Reflection.Signature.html#2408" class="Bound">n</a> <a id="2410" class="Symbol">=</a> <a id="2412" href="Meta.Reflection.Signature.html#2444" class="Function">datatype</a> <a id="2421" href="Meta.Effect.Alt.html#320" class="Field Operator">&lt;|&gt;</a> <a id="2425" href="Meta.Reflection.Signature.html#2612" class="Function">recordtype</a> <a id="2436" class="Keyword">where</a>
  <a id="2444" href="Meta.Reflection.Signature.html#2444" class="Function">datatype</a> <a id="2453" class="Symbol">=</a> <a id="2455" class="Keyword">do</a>
    <a id="2462" class="Symbol">(</a><a id="2463" href="Meta.Reflection.Signature.html#2463" class="Bound">npars</a> <a id="2469" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2471" href="Meta.Reflection.Signature.html#2471" class="Bound">cons</a><a id="2475" class="Symbol">)</a> <a id="2477" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2479" href="Meta.Reflection.Signature.html#1125" class="Function">get-data-type</a> <a id="2493" href="Meta.Reflection.Signature.html#2408" class="Bound">n</a>
    <a id="2499" href="Meta.Effect.Traversable.html#396" class="Function">for</a> <a id="2503" href="Meta.Reflection.Signature.html#2471" class="Bound">cons</a> <a id="2508" class="Symbol">λ</a> <a id="2510" href="Meta.Reflection.Signature.html#2510" class="Bound">qn</a> <a id="2513" class="Symbol">→</a> <a id="2515" class="Keyword">do</a>
      <a id="2524" class="Symbol">(</a><a id="2525" href="Meta.Reflection.Signature.html#2525" class="Bound">args</a> <a id="2530" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2532" href="Meta.Reflection.Signature.html#2532" class="Bound">ty</a><a id="2534" class="Symbol">)</a> <a id="2536" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2538" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="2546" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="2550" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="2559" href="Meta.Reflection.Signature.html#2510" class="Bound">qn</a>
      <a id="2568" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="2573" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="2575" href="Meta.Reflection.Signature.html#1738" class="InductiveConstructor">conhead</a> <a id="2583" href="Meta.Reflection.Signature.html#2510" class="Bound">qn</a> <a id="2586" href="Meta.Reflection.Signature.html#2408" class="Bound">n</a> <a id="2588" class="Symbol">(</a><a id="2589" href="Data.List.Operations.html#2328" class="Function">drop</a> <a id="2594" href="Meta.Reflection.Signature.html#2463" class="Bound">npars</a> <a id="2600" href="Meta.Reflection.Signature.html#2525" class="Bound">args</a><a id="2604" class="Symbol">)</a> <a id="2606" href="Meta.Reflection.Signature.html#2532" class="Bound">ty</a>

  <a id="2612" href="Meta.Reflection.Signature.html#2612" class="Function">recordtype</a> <a id="2623" class="Symbol">=</a> <a id="2625" class="Keyword">do</a>
    <a id="2632" class="Symbol">(</a><a id="2633" href="Meta.Reflection.Signature.html#2633" class="Bound">c</a>  <a id="2636" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2638" class="Symbol">_)</a>    <a id="2644" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2646" href="Meta.Reflection.Signature.html#1398" class="Function">get-record-type</a> <a id="2662" href="Meta.Reflection.Signature.html#2408" class="Bound">n</a>
    <a id="2668" class="Symbol">(</a><a id="2669" href="Meta.Reflection.Signature.html#2669" class="Bound">np</a> <a id="2672" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2674" class="Symbol">_)</a>    <a id="2680" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2682" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="2690" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="2694" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="2703" href="Meta.Reflection.Signature.html#2408" class="Bound">n</a>
    <a id="2709" class="Symbol">(</a><a id="2710" href="Meta.Reflection.Signature.html#2710" class="Bound">args</a> <a id="2715" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2717" href="Meta.Reflection.Signature.html#2717" class="Bound">ty</a><a id="2719" class="Symbol">)</a> <a id="2721" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2723" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="2731" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="2735" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="2744" href="Meta.Reflection.Signature.html#2633" class="Bound">c</a>
    <a id="2750" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="2755" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="2757" href="Meta.Reflection.Signature.html#1738" class="InductiveConstructor">conhead</a> <a id="2765" href="Meta.Reflection.Signature.html#2633" class="Bound">c</a> <a id="2767" href="Meta.Reflection.Signature.html#2408" class="Bound">n</a> <a id="2769" class="Symbol">(</a><a id="2770" href="Data.List.Operations.html#2328" class="Function">drop</a> <a id="2775" class="Symbol">(</a><a id="2776" href="Data.List.Operations.html#812" class="Function">length</a> <a id="2783" href="Meta.Reflection.Signature.html#2669" class="Bound">np</a><a id="2785" class="Symbol">)</a> <a id="2787" href="Meta.Reflection.Signature.html#2710" class="Bound">args</a><a id="2791" class="Symbol">)</a> <a id="2793" href="Meta.Reflection.Signature.html#2717" class="Bound">ty</a> <a id="2796" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="2799" class="Comment">-- Look up a constructor in the signature.</a>
<a id="get-constructor"></a><a id="2842" href="Meta.Reflection.Signature.html#2842" class="Function">get-constructor</a> <a id="2858" class="Symbol">:</a> <a id="2860" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2865" class="Symbol">→</a> <a id="2867" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="2870" href="Meta.Reflection.Signature.html#1699" class="Record">Constructor</a>
<a id="2882" href="Meta.Reflection.Signature.html#2842" class="Function">get-constructor</a> <a id="2898" href="Meta.Reflection.Signature.html#2898" class="Bound">n</a> <a id="2900" class="Symbol">=</a> <a id="2902" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="2917" href="Meta.Reflection.Signature.html#2898" class="Bound">n</a> <a id="2919" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="2923" class="Symbol">λ</a> <a id="2925" class="Keyword">where</a>
  <a id="2933" class="Symbol">(</a><a id="2934" href="Agda.Builtin.Reflection.html#7680" class="InductiveConstructor">data-cons</a> <a id="2944" href="Meta.Reflection.Signature.html#2944" class="Bound">t</a><a id="2945" class="Symbol">)</a> <a id="2947" class="Symbol">→</a> <a id="2949" class="Keyword">do</a>
    <a id="2956" class="Symbol">(</a><a id="2957" href="Meta.Reflection.Signature.html#2957" class="Bound">npars</a> <a id="2963" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2965" href="Meta.Reflection.Signature.html#2965" class="Bound">cons</a><a id="2969" class="Symbol">)</a> <a id="2971" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2973" href="Meta.Reflection.Signature.html#1125" class="Function">get-data-type</a> <a id="2987" href="Meta.Reflection.Signature.html#2944" class="Bound">t</a>
    <a id="2993" class="Symbol">(</a><a id="2994" href="Meta.Reflection.Signature.html#2994" class="Bound">args</a> <a id="2999" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3001" href="Meta.Reflection.Signature.html#3001" class="Bound">ty</a><a id="3003" class="Symbol">)</a>    <a id="3008" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="3010" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="3018" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="3022" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="3031" href="Meta.Reflection.Signature.html#2898" class="Bound">n</a>
    <a id="3037" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="3042" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="3044" href="Meta.Reflection.Signature.html#1738" class="InductiveConstructor">conhead</a> <a id="3052" href="Meta.Reflection.Signature.html#2898" class="Bound">n</a> <a id="3054" href="Meta.Reflection.Signature.html#2944" class="Bound">t</a> <a id="3056" class="Symbol">(</a><a id="3057" href="Data.List.Operations.html#2328" class="Function">drop</a> <a id="3062" href="Meta.Reflection.Signature.html#2957" class="Bound">npars</a> <a id="3068" href="Meta.Reflection.Signature.html#2994" class="Bound">args</a><a id="3072" class="Symbol">)</a> <a id="3074" href="Meta.Reflection.Signature.html#3001" class="Bound">ty</a>
  <a id="3079" class="CatchallClause Symbol">_</a> <a id="3081" class="Symbol">→</a> <a id="3083" href="Agda.Builtin.Reflection.html#8815" class="Postulate">type-error</a> <a id="3094" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="3096" class="String">&quot;get-constructor: &quot;</a> <a id="3116" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3118" href="Data.Reflection.Error.html#256" class="InductiveConstructor">name-err</a> <a id="3127" href="Meta.Reflection.Signature.html#2898" class="Bound">n</a> <a id="3129" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3131" class="String">&quot; is not a data constructor.&quot;</a> <a id="3161" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="3164" class="Comment">-- If a term reduces to an application of a record type, return</a>
<a id="3228" class="Comment">-- information about that record.</a>
<a id="get-record"></a><a id="3262" href="Meta.Reflection.Signature.html#3262" class="Function">get-record</a> <a id="3273" class="Symbol">:</a> <a id="3275" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="3280" class="Symbol">→</a> <a id="3282" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="3285" class="Symbol">(</a><a id="3286" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3291" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="3293" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3298" class="Symbol">(</a><a id="3299" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="3303" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="3307" class="Symbol">))</a>
<a id="3310" href="Meta.Reflection.Signature.html#3262" class="Function">get-record</a> <a id="3321" href="Meta.Reflection.Signature.html#3321" class="Bound">tm</a> <a id="3324" class="Symbol">=</a> <a id="3326" href="Agda.Builtin.Reflection.html#8993" class="Postulate">reduce</a> <a id="3333" href="Meta.Reflection.Signature.html#3321" class="Bound">tm</a> <a id="3336" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="3340" class="Symbol">λ</a> <a id="3342" class="Keyword">where</a>
  <a id="3350" class="Symbol">(</a><a id="3351" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="3355" href="Meta.Reflection.Signature.html#3355" class="Bound">qn</a> <a id="3358" class="Symbol">_)</a> <a id="3361" class="Symbol">→</a> <a id="3363" href="Meta.Reflection.Signature.html#1398" class="Function">get-record-type</a> <a id="3379" href="Meta.Reflection.Signature.html#3355" class="Bound">qn</a>
  <a id="3384" class="CatchallClause Symbol">_</a>          <a id="3395" class="Symbol">→</a> <a id="3397" href="Agda.Builtin.Reflection.html#8815" class="Postulate">type-error</a> <a id="3408" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="3410" class="String">&quot;get-record: &quot;</a> <a id="3425" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3427" href="Data.Reflection.Error.html#191" class="InductiveConstructor">term-err</a> <a id="3436" href="Meta.Reflection.Signature.html#3321" class="Bound">tm</a> <a id="3439" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3441" class="String">&quot; is not a record type.&quot;</a> <a id="3466" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="3469" class="Comment">-- Get the argument telescope of something in the signature. NOTE: If</a>
<a id="3539" class="Comment">-- the Name refers to a Constructor, the returned telescope *will*</a>
<a id="3606" class="Comment">-- include the data/record parameters!</a>
<a id="get-argument-tele"></a><a id="3645" href="Meta.Reflection.Signature.html#3645" class="Function">get-argument-tele</a> <a id="3663" class="Symbol">:</a> <a id="3665" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3670" class="Symbol">→</a> <a id="3672" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="3675" href="Data.Reflection.Term.html#800" class="Function">Telescope</a>
<a id="3685" href="Meta.Reflection.Signature.html#3645" class="Function">get-argument-tele</a> <a id="3703" href="Meta.Reflection.Signature.html#3703" class="Bound">qn</a> <a id="3706" class="Symbol">=</a> <a id="3708" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="3717" href="Meta.Reflection.Signature.html#3703" class="Bound">qn</a> <a id="3720" href="Meta.Effect.Map.html#604" class="Function Operator">&lt;&amp;&gt;</a> <a id="3724" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="3728" href="Foundations.Correspondences.Binary.Transitive.html#548" class="Function Operator">∘ˢ</a> <a id="3731" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a>

<a id="3740" class="Keyword">record</a> <a id="Has-constr"></a><a id="3747" href="Meta.Reflection.Signature.html#3747" class="Record">Has-constr</a> <a id="3758" class="Symbol">{</a><a id="3759" href="Meta.Reflection.Signature.html#3759" class="Bound">ℓ</a><a id="3760" class="Symbol">}</a> <a id="3762" class="Symbol">(</a><a id="3763" href="Meta.Reflection.Signature.html#3763" class="Bound">A</a> <a id="3765" class="Symbol">:</a> <a id="3767" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="3772" href="Meta.Reflection.Signature.html#3759" class="Bound">ℓ</a><a id="3773" class="Symbol">)</a> <a id="3775" class="Symbol">:</a> <a id="3777" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="3782" href="Meta.Reflection.Signature.html#3759" class="Bound">ℓ</a> <a id="3784" class="Keyword">where</a>
  <a id="3792" class="Keyword">field</a> <a id="Has-constr.from-constr"></a><a id="3798" href="Meta.Reflection.Signature.html#3798" class="Field">from-constr</a> <a id="3810" class="Symbol">:</a> <a id="3812" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3817" class="Symbol">→</a> <a id="3819" href="Meta.Reflection.Signature.html#3763" class="Bound">A</a>

<a id="3822" class="Keyword">record</a> <a id="Has-def"></a><a id="3829" href="Meta.Reflection.Signature.html#3829" class="Record">Has-def</a> <a id="3837" class="Symbol">{</a><a id="3838" href="Meta.Reflection.Signature.html#3838" class="Bound">ℓ</a><a id="3839" class="Symbol">}</a> <a id="3841" class="Symbol">(</a><a id="3842" href="Meta.Reflection.Signature.html#3842" class="Bound">A</a> <a id="3844" class="Symbol">:</a> <a id="3846" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="3851" href="Meta.Reflection.Signature.html#3838" class="Bound">ℓ</a><a id="3852" class="Symbol">)</a> <a id="3854" class="Symbol">:</a> <a id="3856" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="3861" href="Meta.Reflection.Signature.html#3838" class="Bound">ℓ</a> <a id="3863" class="Keyword">where</a>
  <a id="3871" class="Keyword">field</a> <a id="Has-def.from-def"></a><a id="3877" href="Meta.Reflection.Signature.html#3877" class="Field">from-def</a> <a id="3886" class="Symbol">:</a> <a id="3888" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3893" class="Symbol">→</a> <a id="3895" href="Meta.Reflection.Signature.html#3842" class="Bound">A</a>

<a id="3898" class="Keyword">instance</a>
  <a id="Has-constr-Pattern"></a><a id="3909" href="Meta.Reflection.Signature.html#3909" class="Function">Has-constr-Pattern</a> <a id="3928" class="Symbol">:</a> <a id="3930" href="Meta.Reflection.Signature.html#3747" class="Record">Has-constr</a> <a id="3941" href="Agda.Builtin.Reflection.html#5031" class="Datatype">Pattern</a>
  <a id="3951" href="Meta.Reflection.Signature.html#3909" class="Function">Has-constr-Pattern</a> <a id="3970" class="Symbol">.</a><a id="3971" href="Meta.Reflection.Signature.html#3798" class="Field">Has-constr.from-constr</a> <a id="3994" class="Symbol">=</a> <a id="3996" href="Data.Reflection.Term.html#2352" class="InductiveConstructor">con₀</a>

  <a id="Has-constr-Term"></a><a id="4004" href="Meta.Reflection.Signature.html#4004" class="Function">Has-constr-Term</a> <a id="4020" class="Symbol">:</a> <a id="4022" href="Meta.Reflection.Signature.html#3747" class="Record">Has-constr</a> <a id="4033" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="4040" href="Meta.Reflection.Signature.html#4004" class="Function">Has-constr-Term</a> <a id="4056" class="Symbol">.</a><a id="4057" href="Meta.Reflection.Signature.html#3798" class="Field">Has-constr.from-constr</a> <a id="4080" class="Symbol">=</a> <a id="4082" href="Data.Reflection.Term.html#2352" class="InductiveConstructor">con₀</a>

  <a id="Has-def-Term"></a><a id="4090" href="Meta.Reflection.Signature.html#4090" class="Function">Has-def-Term</a> <a id="4103" class="Symbol">:</a> <a id="4105" href="Meta.Reflection.Signature.html#3829" class="Record">Has-def</a> <a id="4113" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="4120" href="Meta.Reflection.Signature.html#4090" class="Function">Has-def-Term</a> <a id="4133" class="Symbol">.</a><a id="4134" href="Meta.Reflection.Signature.html#3877" class="Field">Has-def.from-def</a> <a id="4151" class="Symbol">=</a> <a id="4153" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a>

  <a id="Has-constr-Name"></a><a id="4161" href="Meta.Reflection.Signature.html#4161" class="Function">Has-constr-Name</a> <a id="4177" class="Symbol">:</a> <a id="4179" href="Meta.Reflection.Signature.html#3747" class="Record">Has-constr</a> <a id="4190" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>
  <a id="4197" href="Meta.Reflection.Signature.html#4161" class="Function">Has-constr-Name</a> <a id="4213" class="Symbol">.</a><a id="4214" href="Meta.Reflection.Signature.html#3798" class="Field">Has-constr.from-constr</a> <a id="4237" class="Symbol">=</a> <a id="4239" href="Foundations.Pi.Base.html#1477" class="Function">id</a>

  <a id="Has-def-Name"></a><a id="4245" href="Meta.Reflection.Signature.html#4245" class="Function">Has-def-Name</a> <a id="4258" class="Symbol">:</a> <a id="4260" href="Meta.Reflection.Signature.html#3829" class="Record">Has-def</a> <a id="4268" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>
  <a id="4275" href="Meta.Reflection.Signature.html#4245" class="Function">Has-def-Name</a> <a id="4288" class="Symbol">.</a><a id="4289" href="Meta.Reflection.Signature.html#3877" class="Field">Has-def.from-def</a> <a id="4306" class="Symbol">=</a> <a id="4308" href="Foundations.Pi.Base.html#1477" class="Function">id</a>

<a id="4312" class="Keyword">private</a>
  <a id="it-worker"></a><a id="4322" href="Meta.Reflection.Signature.html#4322" class="Function">it-worker</a> <a id="4332" class="Symbol">:</a> <a id="4334" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="4339" class="Symbol">→</a> <a id="4341" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="4344" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="4351" href="Meta.Reflection.Signature.html#4322" class="Function">it-worker</a> <a id="4361" href="Meta.Reflection.Signature.html#4361" class="Bound">n</a> <a id="4363" class="Symbol">=</a> <a id="4365" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="4380" href="Meta.Reflection.Signature.html#4361" class="Bound">n</a> <a id="4382" href="Meta.Effect.Map.html#604" class="Function Operator">&lt;&amp;&gt;</a> <a id="4386" class="Symbol">λ</a> <a id="4388" class="Keyword">where</a>
    <a id="4398" class="Symbol">(</a><a id="4399" href="Agda.Builtin.Reflection.html#7680" class="InductiveConstructor">data-cons</a> <a id="4409" class="Symbol">_)</a> <a id="4412" class="Symbol">→</a>
      <a id="4420" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="4425" class="Symbol">(</a><a id="4426" class="Keyword">quote</a> <a id="4432" href="Meta.Reflection.Signature.html#3798" class="Field">Has-constr.from-constr</a><a id="4454" class="Symbol">)</a> <a id="4456" href="Meta.Reflection.Neutral.html#1207" class="Function Operator">##ₙ</a> <a id="4460" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="4465" class="Symbol">(</a><a id="4466" class="Keyword">quote</a> <a id="4472" href="Foundations.Base.html#22309" class="Function">auto</a><a id="4476" class="Symbol">)</a> <a id="4478" href="Meta.Reflection.Neutral.html#1207" class="Function Operator">##ₙ</a> <a id="4482" href="Agda.Builtin.Reflection.html#5509" class="InductiveConstructor">lit</a> <a id="4486" class="Symbol">(</a><a id="4487" href="Agda.Builtin.Reflection.html#4589" class="InductiveConstructor">name</a> <a id="4492" href="Meta.Reflection.Signature.html#4361" class="Bound">n</a><a id="4493" class="Symbol">)</a>
    <a id="4499" class="CatchallClause Symbol">_</a> <a id="4501" class="Symbol">→</a>
      <a id="4509" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="4514" class="Symbol">(</a><a id="4515" class="Keyword">quote</a> <a id="4521" href="Meta.Reflection.Signature.html#3877" class="Field">Has-def.from-def</a><a id="4537" class="Symbol">)</a> <a id="4539" href="Meta.Reflection.Neutral.html#1207" class="Function Operator">##ₙ</a> <a id="4543" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="4548" class="Symbol">(</a><a id="4549" class="Keyword">quote</a> <a id="4555" href="Foundations.Base.html#22309" class="Function">auto</a><a id="4559" class="Symbol">)</a> <a id="4561" href="Meta.Reflection.Neutral.html#1207" class="Function Operator">##ₙ</a> <a id="4565" href="Agda.Builtin.Reflection.html#5509" class="InductiveConstructor">lit</a> <a id="4569" class="Symbol">(</a><a id="4570" href="Agda.Builtin.Reflection.html#4589" class="InductiveConstructor">name</a> <a id="4575" href="Meta.Reflection.Signature.html#4361" class="Bound">n</a><a id="4576" class="Symbol">)</a>

<a id="4579" class="Keyword">macro</a>
  <a id="4587" class="Comment">-- Macro which turns a Name into its quoted Term/Pattern</a>
  <a id="4646" class="Comment">-- representation.</a>
  <a id="4667" class="Comment">--</a>
  <a id="4672" class="Comment">-- If the Name refers to a constructor, it&#39;s wrapped in con₀,</a>
  <a id="4736" class="Comment">-- otherwise, it&#39;s wrapped in def₀.</a>
  <a id="4774" class="Comment">--</a>
  <a id="4779" class="Comment">-- Since `it` is a macro, you can use this as `it Foo` rather than</a>
  <a id="4848" class="Comment">-- `def₀ (quote Foo)`.</a>
  <a id="it"></a><a id="4873" href="Meta.Reflection.Signature.html#4873" class="Function">it</a> <a id="4876" class="Symbol">:</a> <a id="4878" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="4883" class="Symbol">→</a> <a id="4885" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="4890" class="Symbol">→</a> <a id="4892" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="4895" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="4899" href="Meta.Reflection.Signature.html#4873" class="Function">it</a> <a id="4902" href="Meta.Reflection.Signature.html#4902" class="Bound">n</a> <a id="4904" href="Meta.Reflection.Signature.html#4904" class="Bound">g</a> <a id="4906" class="Symbol">=</a> <a id="4908" href="Agda.Builtin.Reflection.html#8775" class="Postulate">unify</a> <a id="4914" href="Meta.Reflection.Signature.html#4904" class="Bound">g</a> <a id="4916" href="Meta.Effect.Bind.html#427" class="Function Operator">=&lt;&lt;</a> <a id="4920" href="Meta.Reflection.Signature.html#4322" class="Function">it-worker</a> <a id="4930" href="Meta.Reflection.Signature.html#4902" class="Bound">n</a>

<a id="4933" href="Meta.Reflection.Signature.html#4933" class="Function">_</a> <a id="4935" class="Symbol">:</a> <a id="4937" href="Foundations.Prim.Kan.html#1553" class="Function">Path</a> <a id="4942" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="4947" class="Symbol">(</a><a id="4948" href="Meta.Reflection.Signature.html#4873" class="Macro">it</a> <a id="4951" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="4952" class="Symbol">)</a> <a id="4954" class="Symbol">(</a><a id="4955" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="4959" class="Symbol">(</a><a id="4960" class="Keyword">quote</a> <a id="4966" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="4967" class="Symbol">)</a> <a id="4969" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="4971" class="Symbol">)</a>
<a id="4973" class="Symbol">_</a> <a id="4975" class="Symbol">=</a> <a id="4977" href="Foundations.Correspondences.Binary.Reflexive.html#337" class="Field">refl</a>

<a id="4983" class="Keyword">macro</a>
  <a id="4991" class="Comment">-- Macro which turns a *record name* into the quoted representation of</a>
  <a id="5064" class="Comment">-- its *constructor*, e.g. `constructor Σ` is `con₀ (quote _,_)`.</a>
  <a id="`constructor"></a><a id="5132" href="Meta.Reflection.Signature.html#5132" class="Function">`constructor</a> <a id="5145" class="Symbol">:</a> <a id="5147" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5152" class="Symbol">→</a> <a id="5154" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5159" class="Symbol">→</a> <a id="5161" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="5164" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="5168" href="Meta.Reflection.Signature.html#5132" class="Function">`constructor</a> <a id="5181" href="Meta.Reflection.Signature.html#5181" class="Bound">n</a> <a id="5183" href="Meta.Reflection.Signature.html#5183" class="Bound">g</a> <a id="5185" class="Symbol">=</a> <a id="5187" class="Keyword">do</a>
    <a id="5194" class="Symbol">(</a><a id="5195" href="Meta.Reflection.Signature.html#5195" class="Bound">c</a> <a id="5197" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5199" class="Symbol">_)</a> <a id="5202" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="5204" href="Meta.Reflection.Signature.html#1398" class="Function">get-record-type</a> <a id="5220" href="Meta.Reflection.Signature.html#5181" class="Bound">n</a>
    <a id="5226" href="Agda.Builtin.Reflection.html#8775" class="Postulate">unify</a> <a id="5232" href="Meta.Reflection.Signature.html#5183" class="Bound">g</a> <a id="5234" class="Symbol">(</a><a id="5235" href="Meta.Reflection.Signature.html#4873" class="Macro">it</a> <a id="5238" href="Meta.Reflection.Signature.html#3798" class="Field">Has-constr.from-constr</a> <a id="5261" href="Meta.Reflection.Neutral.html#1207" class="Function Operator">##ₙ</a> <a id="5265" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="5270" class="Symbol">(</a><a id="5271" class="Keyword">quote</a> <a id="5277" href="Foundations.Base.html#22309" class="Function">auto</a><a id="5281" class="Symbol">)</a> <a id="5283" href="Meta.Reflection.Neutral.html#1207" class="Function Operator">##ₙ</a> <a id="5287" href="Agda.Builtin.Reflection.html#5509" class="InductiveConstructor">lit</a> <a id="5291" class="Symbol">(</a><a id="5292" href="Agda.Builtin.Reflection.html#4589" class="InductiveConstructor">name</a> <a id="5297" href="Meta.Reflection.Signature.html#5195" class="Bound">c</a><a id="5298" class="Symbol">))</a>

<a id="5302" href="Meta.Reflection.Signature.html#5302" class="Function">_</a> <a id="5304" class="Symbol">:</a> <a id="5306" href="Foundations.Prim.Kan.html#1553" class="Function">Path</a> <a id="5311" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5316" class="Symbol">(</a><a id="5317" href="Meta.Reflection.Signature.html#5132" class="Macro">`constructor</a> <a id="5330" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="5331" class="Symbol">)</a> <a id="5333" class="Symbol">(</a><a id="5334" href="Data.Reflection.Term.html#2352" class="InductiveConstructor">con₀</a> <a id="5339" class="Symbol">(</a><a id="5340" class="Keyword">quote</a> <a id="5346" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="5349" class="Symbol">))</a>
<a id="5352" class="Symbol">_</a> <a id="5354" class="Symbol">=</a> <a id="5356" href="Foundations.Correspondences.Binary.Reflexive.html#337" class="Field">refl</a>

<a id="5362" class="Keyword">macro</a>
  <a id="5370" class="Comment">-- Like &#39;it&#39;, but the quoted representation is additionally wrapped in</a>
  <a id="5443" class="Comment">-- enough lambdas to apply the given definition to all of its visible</a>
  <a id="5515" class="Comment">-- arguments.</a>
  <a id="itₙ"></a><a id="5531" href="Meta.Reflection.Signature.html#5531" class="Function">itₙ</a> <a id="5535" class="Symbol">:</a> <a id="5537" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5542" class="Symbol">→</a> <a id="5544" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5549" class="Symbol">→</a> <a id="5551" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="5554" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="5558" href="Meta.Reflection.Signature.html#5531" class="Function">itₙ</a> <a id="5562" href="Meta.Reflection.Signature.html#5562" class="Bound">n</a> <a id="5564" href="Meta.Reflection.Signature.html#5564" class="Bound">g</a> <a id="5566" class="Symbol">=</a> <a id="5568" class="Keyword">do</a>
    <a id="5575" href="Meta.Reflection.Signature.html#5575" class="Bound">tm</a>   <a id="5580" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="5582" href="Meta.Reflection.Signature.html#4322" class="Function">it-worker</a> <a id="5592" href="Meta.Reflection.Signature.html#5562" class="Bound">n</a>
    <a id="5598" href="Meta.Reflection.Signature.html#5598" class="Bound">args</a> <a id="5603" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="5605" href="Meta.Reflection.Signature.html#3645" class="Function">get-argument-tele</a> <a id="5623" href="Meta.Reflection.Signature.html#5562" class="Bound">n</a>
    <a id="5629" class="Keyword">let</a>
      <a id="5639" href="Meta.Reflection.Signature.html#5639" class="Bound">args</a> <a id="5644" class="Symbol">=</a> <a id="5646" href="Data.List.Operations.html#980" class="Function">filter</a> <a id="5653" class="Symbol">(λ</a> <a id="5656" class="Symbol">{</a> <a id="5658" class="Symbol">(_</a> <a id="5661" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5663" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="5667" class="Symbol">(</a><a id="5668" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="5677" href="Agda.Builtin.Reflection.html#2762" class="InductiveConstructor">visible</a> <a id="5685" class="Symbol">_)</a> <a id="5688" class="Symbol">_)</a> <a id="5691" class="Symbol">→</a> <a id="5693" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="5698" class="Symbol">;</a> <a id="5700" class="CatchallClause Symbol">_</a> <a id="5702" class="Symbol">→</a> <a id="5704" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="5710" class="Symbol">})</a> <a id="5713" href="Meta.Reflection.Signature.html#5598" class="Bound">args</a>

      <a id="5725" href="Meta.Reflection.Signature.html#5725" class="Bound">tm</a> <a id="5728" class="Symbol">=</a> <a id="5730" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="5734" class="Symbol">(</a><a id="5735" class="Keyword">quote</a> <a id="5741" href="Meta.Reflection.Neutral.html#737" class="Field">applyⁿᵉ</a><a id="5748" class="Symbol">)</a> <a id="5750" class="Symbol">(</a><a id="5751" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="5756" href="Meta.Reflection.Signature.html#5575" class="Bound">tm</a> <a id="5759" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5761" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="5766" class="Symbol">(</a><a id="5767" href="Data.Reflection.Term.html#2031" class="Function">list-term</a> <a id="5777" class="Symbol">(</a><a id="5778" href="Data.List.Base.html#849" class="Function">reverse</a> <a id="5786" class="Symbol">(</a><a id="5787" href="Data.List.Operations.html#2650" class="Function">map-up</a> <a id="5794" class="Symbol">(λ</a> <a id="5797" href="Meta.Reflection.Signature.html#5797" class="Bound">i</a> <a id="5799" href="Meta.Reflection.Signature.html#5799" class="Bound">_</a> <a id="5801" class="Symbol">→</a> <a id="5803" href="Meta.Reflection.Signature.html#4873" class="Macro">it</a> <a id="5806" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="5811" href="Meta.Reflection.Neutral.html#1207" class="Function Operator">##ₙ</a> <a id="5815" href="Data.Reflection.Term.html#2404" class="InductiveConstructor">var₀</a> <a id="5820" href="Meta.Reflection.Signature.html#5797" class="Bound">i</a><a id="5821" class="Symbol">)</a> <a id="5823" class="Number">0</a> <a id="5825" href="Meta.Reflection.Signature.html#5639" class="Bound">args</a><a id="5829" class="Symbol">)))</a> <a id="5833" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5835" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5837" class="Symbol">)</a>
      <a id="5845" href="Meta.Reflection.Signature.html#5845" class="Bound">tm</a> <a id="5848" class="Symbol">=</a> <a id="5850" href="Meta.Effect.Foldable.html#270" class="Field">fold-r</a> <a id="5857" class="Symbol">(λ</a> <a id="5860" href="Meta.Reflection.Signature.html#5860" class="Bound">_</a> <a id="5862" href="Meta.Reflection.Signature.html#5862" class="Bound">y</a> <a id="5864" class="Symbol">→</a> <a id="5866" href="Agda.Builtin.Reflection.html#5308" class="InductiveConstructor">lam</a> <a id="5870" href="Agda.Builtin.Reflection.html#2762" class="InductiveConstructor">visible</a> <a id="5878" class="Symbol">(</a><a id="5879" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="5883" class="String">&quot;_&quot;</a> <a id="5887" href="Meta.Reflection.Signature.html#5862" class="Bound">y</a><a id="5888" class="Symbol">))</a> <a id="5891" href="Meta.Reflection.Signature.html#5725" class="Bound">tm</a> <a id="5894" href="Meta.Reflection.Signature.html#5639" class="Bound">args</a>

      <a id="5906" href="Meta.Reflection.Signature.html#5906" class="Bound">ty</a> <a id="5909" class="Symbol">=</a> <a id="5911" href="Meta.Effect.Foldable.html#270" class="Field">fold-r</a> <a id="5918" class="Symbol">(λ</a> <a id="5921" href="Meta.Reflection.Signature.html#5921" class="Bound">_</a> <a id="5923" href="Meta.Reflection.Signature.html#5923" class="Bound">y</a> <a id="5925" class="Symbol">→</a> <a id="5927" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="5931" class="Symbol">(</a><a id="5932" class="Keyword">quote</a> <a id="5938" href="Foundations.Pi.Base.html#1149" class="Function">Fun</a><a id="5941" class="Symbol">)</a> <a id="5943" class="Symbol">(</a><a id="5944" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="5949" class="Symbol">(</a><a id="5950" href="Meta.Reflection.Signature.html#4873" class="Macro">it</a> <a id="5953" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="5957" class="Symbol">)</a> <a id="5959" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5961" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="5966" href="Meta.Reflection.Signature.html#5923" class="Bound">y</a> <a id="5968" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5970" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5972" class="Symbol">))</a> <a id="5975" class="Symbol">(</a><a id="5976" href="Meta.Reflection.Signature.html#4873" class="Macro">it</a> <a id="5979" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="5983" class="Symbol">)</a> <a id="5985" href="Meta.Reflection.Signature.html#5639" class="Bound">args</a>

    <a id="5995" href="Agda.Builtin.Reflection.html#8914" class="Postulate">check-type</a> <a id="6006" href="Meta.Reflection.Signature.html#5564" class="Bound">g</a> <a id="6008" href="Meta.Reflection.Signature.html#5906" class="Bound">ty</a>
    <a id="6015" href="Agda.Builtin.Reflection.html#8775" class="Postulate">unify</a> <a id="6021" href="Meta.Reflection.Signature.html#5564" class="Bound">g</a> <a id="6023" href="Meta.Reflection.Signature.html#5845" class="Bound">tm</a>

<a id="6027" href="Meta.Reflection.Signature.html#6027" class="Function">_</a> <a id="6029" class="Symbol">:</a> <a id="6031" href="Foundations.Prim.Kan.html#1553" class="Function">Path</a> <a id="6036" class="Symbol">(</a><a id="6037" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="6042" class="Symbol">→</a> <a id="6044" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="6049" class="Symbol">→</a> <a id="6051" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="6055" class="Symbol">)</a> <a id="6057" class="Symbol">(</a><a id="6058" href="Meta.Reflection.Signature.html#5531" class="Macro">itₙ</a> <a id="6062" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="6063" class="Symbol">)</a> <a id="6065" class="Symbol">(λ</a> <a id="6068" href="Meta.Reflection.Signature.html#6068" class="Bound">x</a> <a id="6070" href="Meta.Reflection.Signature.html#6070" class="Bound">y</a> <a id="6072" class="Symbol">→</a> <a id="6074" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="6078" class="Symbol">(</a><a id="6079" class="Keyword">quote</a> <a id="6085" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="6086" class="Symbol">)</a> <a id="6088" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="6090" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="6095" href="Meta.Reflection.Signature.html#6068" class="Bound">x</a> <a id="6097" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6099" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="6104" href="Meta.Reflection.Signature.html#6070" class="Bound">y</a> <a id="6106" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a><a id="6107" class="Symbol">)</a>
<a id="6109" class="Symbol">_</a> <a id="6111" class="Symbol">=</a> <a id="6113" href="Foundations.Correspondences.Binary.Reflexive.html#337" class="Field">refl</a>

<a id="6119" class="Comment">-- Check whether a name is defined.</a>
<a id="is-defined"></a><a id="6155" href="Meta.Reflection.Signature.html#6155" class="Function">is-defined</a> <a id="6166" class="Symbol">:</a> <a id="6168" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6173" class="Symbol">→</a> <a id="6175" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="6178" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="6183" href="Meta.Reflection.Signature.html#6155" class="Function">is-defined</a> <a id="6194" href="Meta.Reflection.Signature.html#6194" class="Bound">nm</a> <a id="6197" class="Symbol">=</a> <a id="6199" class="Symbol">(</a><a id="6200" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="6205" href="Meta.Effect.Map.html#549" class="Function Operator">&lt;$</a> <a id="6208" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="6217" href="Meta.Reflection.Signature.html#6194" class="Bound">nm</a><a id="6219" class="Symbol">)</a> <a id="6221" href="Meta.Effect.Alt.html#320" class="Field Operator">&lt;|&gt;</a> <a id="6225" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="6230" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>

<a id="6237" class="Comment">-- Render a defined name as it would appear in the current scope.</a>
<a id="6303" class="Comment">--</a>
<a id="6306" class="Comment">-- This will be the &quot;least qualified&quot; possible concrete representation</a>
<a id="6377" class="Comment">-- for the given name, if one is available.</a>
<a id="6421" class="Comment">--</a>
<a id="6424" class="Comment">-- If the name is not defined, return the shown representation, which is</a>
<a id="6497" class="Comment">-- fully qualified.</a>
<a id="render-name"></a><a id="6517" href="Meta.Reflection.Signature.html#6517" class="Function">render-name</a> <a id="6529" class="Symbol">:</a> <a id="6531" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6536" class="Symbol">→</a> <a id="6538" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="6541" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
<a id="6548" href="Meta.Reflection.Signature.html#6517" class="Function">render-name</a> <a id="6560" href="Meta.Reflection.Signature.html#6560" class="Bound">def-nm</a> <a id="6567" class="Symbol">=</a> <a id="6569" class="Keyword">do</a>
  <a id="6574" href="Meta.Reflection.Signature.html#6574" class="Bound">d</a> <a id="6576" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="6578" href="Meta.Reflection.Signature.html#6155" class="Function">is-defined</a> <a id="6589" href="Meta.Reflection.Signature.html#6560" class="Bound">def-nm</a>
  <a id="6598" class="Keyword">let</a>
    <a id="6606" href="Meta.Reflection.Signature.html#6606" class="Bound">fancy</a> <a id="6612" class="Symbol">=</a> <a id="6614" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="6629" href="Meta.Reflection.Signature.html#6560" class="Bound">def-nm</a> <a id="6636" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="6640" class="Symbol">λ</a> <a id="6642" class="Keyword">where</a>
      <a id="6654" class="Symbol">(</a><a id="6655" href="Agda.Builtin.Reflection.html#7680" class="InductiveConstructor">data-cons</a> <a id="6665" class="Symbol">_)</a> <a id="6668" class="Symbol">→</a> <a id="6670" href="Agda.Builtin.Reflection.html#10895" class="Postulate">format-error-parts</a> <a id="6689" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="6691" href="Data.Reflection.Error.html#191" class="InductiveConstructor">term-err</a> <a id="6700" class="Symbol">(</a><a id="6701" href="Data.Reflection.Term.html#2352" class="InductiveConstructor">con₀</a> <a id="6706" href="Meta.Reflection.Signature.html#6560" class="Bound">def-nm</a><a id="6712" class="Symbol">)</a> <a id="6714" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>
      <a id="6722" class="CatchallClause Symbol">_</a>             <a id="6736" class="Symbol">→</a> <a id="6738" href="Agda.Builtin.Reflection.html#10895" class="Postulate">format-error-parts</a> <a id="6757" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="6759" href="Data.Reflection.Error.html#191" class="InductiveConstructor">term-err</a> <a id="6768" class="Symbol">(</a><a id="6769" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="6774" href="Meta.Reflection.Signature.html#6560" class="Bound">def-nm</a><a id="6780" class="Symbol">)</a> <a id="6782" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>
    <a id="6788" href="Meta.Reflection.Signature.html#6788" class="Bound">plain</a> <a id="6794" class="Symbol">=</a> <a id="6796" href="Meta.Show.html#795" class="Field">show</a> <a id="6801" href="Meta.Reflection.Signature.html#6560" class="Bound">def-nm</a>
  <a id="6810" href="Data.Bool.Base.html#924" class="Function Operator">if</a> <a id="6813" href="Meta.Reflection.Signature.html#6574" class="Bound">d</a> <a id="6815" href="Data.Bool.Base.html#924" class="Function Operator">then</a> <a id="6820" href="Meta.Reflection.Signature.html#6606" class="Bound">fancy</a> <a id="6826" href="Data.Bool.Base.html#924" class="Function Operator">else</a> <a id="6831" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="6836" href="Meta.Reflection.Signature.html#6788" class="Bound">plain</a>

<a id="6843" class="Comment">-- Generate a fresh name for a &quot;helper function&quot; to the given</a>
<a id="6905" class="Comment">-- definition.</a>
<a id="6920" class="Comment">-- Example: `helper-function-name (quote f) &quot;foo&quot;` will be `quote</a>
<a id="6986" class="Comment">-- f·foo`.</a>
<a id="helper-function-name"></a><a id="6997" href="Meta.Reflection.Signature.html#6997" class="Function">helper-function-name</a> <a id="7018" class="Symbol">:</a> <a id="7020" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="7025" class="Symbol">→</a> <a id="7027" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7034" class="Symbol">→</a> <a id="7036" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="7039" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>
<a id="7044" href="Meta.Reflection.Signature.html#6997" class="Function">helper-function-name</a> <a id="7065" href="Meta.Reflection.Signature.html#7065" class="Bound">def-nm</a> <a id="7072" href="Meta.Reflection.Signature.html#7072" class="Bound">suf</a> <a id="7076" class="Symbol">=</a> <a id="7078" class="Keyword">do</a>
  <a id="7083" href="Meta.Reflection.Signature.html#7083" class="Bound">t</a> <a id="7085" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="7087" href="Meta.Reflection.Signature.html#6517" class="Function">render-name</a> <a id="7099" href="Meta.Reflection.Signature.html#7065" class="Bound">def-nm</a>
  <a id="7108" href="Agda.Builtin.Reflection.html#9415" class="Postulate">fresh-name</a> <a id="7119" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="7121" href="Meta.Reflection.Signature.html#7083" class="Bound">t</a> <a id="7123" href="Foundations.Correspondences.Binary.Transitive.html#876" class="Field Operator">&lt;&gt;</a> <a id="7126" class="String">&quot;·&quot;</a> <a id="7130" href="Foundations.Correspondences.Binary.Transitive.html#876" class="Field Operator">&lt;&gt;</a> <a id="7133" href="Meta.Reflection.Signature.html#7072" class="Bound">suf</a>

<a id="7138" class="Comment">-- Declare and optionally define a helper function for the given</a>
<a id="7203" class="Comment">-- definition; returns the generated name.</a>
<a id="7246" class="Comment">--</a>
<a id="7249" class="Comment">-- The helper is always defined with default visibility.</a>
<a id="7306" class="Comment">--</a>
<a id="7309" class="Comment">-- If the list of clauses is empty, the function will not be declared,</a>
<a id="7380" class="Comment">-- so it can be filled in later. This supports generating</a>
<a id="7438" class="Comment">-- mutually-recursive helpers.</a>
<a id="helper-function"></a><a id="7469" href="Meta.Reflection.Signature.html#7469" class="Function">helper-function</a> <a id="7485" class="Symbol">:</a> <a id="7487" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="7492" class="Symbol">→</a> <a id="7494" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7501" class="Symbol">→</a> <a id="7503" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="7508" class="Symbol">→</a> <a id="7510" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7515" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a> <a id="7522" class="Symbol">→</a> <a id="7524" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="7527" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>
<a id="7532" href="Meta.Reflection.Signature.html#7469" class="Function">helper-function</a> <a id="7548" href="Meta.Reflection.Signature.html#7548" class="Bound">def-nm</a> <a id="7555" href="Meta.Reflection.Signature.html#7555" class="Bound">suf</a> <a id="7559" href="Meta.Reflection.Signature.html#7559" class="Bound">ty</a> <a id="7562" href="Meta.Reflection.Signature.html#7562" class="Bound">cls</a> <a id="7566" class="Symbol">=</a> <a id="7568" class="Keyword">do</a>
  <a id="7573" href="Meta.Reflection.Signature.html#7573" class="Bound">nm</a> <a id="7576" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="7578" href="Meta.Reflection.Signature.html#6997" class="Function">helper-function-name</a> <a id="7599" href="Meta.Reflection.Signature.html#7548" class="Bound">def-nm</a> <a id="7606" href="Meta.Reflection.Signature.html#7555" class="Bound">suf</a>
  <a id="7612" href="Agda.Builtin.Reflection.html#9453" class="Postulate">declare-def</a> <a id="7624" class="Symbol">(</a><a id="7625" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="7630" href="Meta.Reflection.Signature.html#7573" class="Bound">nm</a><a id="7632" class="Symbol">)</a> <a id="7634" href="Meta.Reflection.Signature.html#7559" class="Bound">ty</a>
  <a id="7639" href="Meta.Inductive.html#1749" class="Function Operator">case</a> <a id="7644" href="Meta.Reflection.Signature.html#7562" class="Bound">cls</a> <a id="7648" href="Meta.Inductive.html#1749" class="Function Operator">of</a> <a id="7651" class="Symbol">λ</a> <a id="7653" class="Keyword">where</a>
    <a id="7663" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="7666" class="Symbol">→</a> <a id="7668" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="7673" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
    <a id="7680" class="CatchallClause Symbol">_</a>  <a id="7683" class="Symbol">→</a> <a id="7685" href="Agda.Builtin.Reflection.html#9649" class="Postulate">define-function</a> <a id="7701" href="Meta.Reflection.Signature.html#7573" class="Bound">nm</a> <a id="7704" href="Meta.Reflection.Signature.html#7562" class="Bound">cls</a>
  <a id="7710" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="7715" href="Meta.Reflection.Signature.html#7573" class="Bound">nm</a>

<a id="7719" class="Keyword">private</a>
  <a id="make-args"></a><a id="7729" href="Meta.Reflection.Signature.html#7729" class="Function">make-args</a> <a id="7739" class="Symbol">:</a> <a id="7741" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="7743" class="Symbol">→</a> <a id="7745" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7750" class="Symbol">(</a><a id="7751" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="7755" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="7756" class="Symbol">)</a> <a id="7758" class="Symbol">→</a> <a id="7760" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7765" class="Symbol">(</a><a id="7766" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="7770" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="7774" class="Symbol">)</a>
  <a id="7778" href="Meta.Reflection.Signature.html#7729" class="Function">make-args</a> <a id="7788" href="Meta.Reflection.Signature.html#7788" class="Bound">n</a> <a id="7790" href="Meta.Reflection.Signature.html#7790" class="Bound">xs</a> <a id="7793" class="Symbol">=</a> <a id="7795" href="Data.List.Base.html#938" class="Function">reverse-fast</a> <a id="7808" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="7810" href="Meta.Effect.Map.html#344" class="Field">map</a> <a id="7814" class="Symbol">(</a><a id="7815" href="Meta.Effect.Map.html#344" class="Field">map</a> <a id="7819" class="Symbol">(λ</a> <a id="7822" href="Meta.Reflection.Signature.html#7822" class="Bound">i</a> <a id="7824" class="Symbol">→</a> <a id="7826" href="Data.Reflection.Term.html#2404" class="InductiveConstructor">var₀</a> <a id="7831" class="Symbol">(</a><a id="7832" href="Meta.Reflection.Signature.html#7788" class="Bound">n</a> <a id="7834" href="Data.Nat.Base.html#320" class="Primitive Operator">∸</a> <a id="7836" href="Meta.Reflection.Signature.html#7822" class="Bound">i</a> <a id="7838" href="Data.Nat.Base.html#320" class="Primitive Operator">∸</a> <a id="7840" class="Number">1</a><a id="7841" class="Symbol">)))</a> <a id="7845" href="Meta.Reflection.Signature.html#7790" class="Bound">xs</a>

  <a id="class-for-param"></a><a id="7851" href="Meta.Reflection.Signature.html#7851" class="Function">class-for-param</a> <a id="7867" class="Symbol">:</a> <a id="7869" class="Symbol">(</a><a id="7870" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="7874" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="7879" class="Symbol">→</a> <a id="7881" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="7885" class="Symbol">)</a> <a id="7887" class="Symbol">→</a> <a id="7889" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="7891" class="Symbol">→</a> <a id="7893" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7898" class="Symbol">(</a><a id="7899" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="7903" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="7904" class="Symbol">)</a> <a id="7906" class="Symbol">→</a> <a id="7908" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="7913" class="Symbol">→</a> <a id="7915" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7921" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="7928" href="Meta.Reflection.Signature.html#7851" class="Function">class-for-param</a> <a id="7944" href="Meta.Reflection.Signature.html#7944" class="Bound">class</a> <a id="7950" href="Meta.Reflection.Signature.html#7950" class="Bound">n</a> <a id="7952" href="Meta.Reflection.Signature.html#7952" class="Bound">xs</a> <a id="7955" class="Symbol">(</a><a id="7956" href="Agda.Builtin.Reflection.html#5477" class="InductiveConstructor">agda-sort</a> <a id="7966" class="Symbol">_)</a> <a id="7969" class="Symbol">=</a>
    <a id="7975" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7980" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="7982" href="Meta.Reflection.Signature.html#7944" class="Bound">class</a> <a id="7988" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="7990" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="7995" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="7997" href="Agda.Builtin.Reflection.html#5138" class="InductiveConstructor">var</a> <a id="8001" href="Meta.Reflection.Signature.html#7950" class="Bound">n</a> <a id="8003" href="Meta.Prelude.html#121" class="Function Operator">$ₜ</a> <a id="8006" href="Meta.Reflection.Signature.html#7729" class="Function">make-args</a> <a id="8016" href="Meta.Reflection.Signature.html#7950" class="Bound">n</a> <a id="8018" href="Meta.Reflection.Signature.html#7952" class="Bound">xs</a>
  <a id="8023" href="Meta.Reflection.Signature.html#7851" class="Function">class-for-param</a> <a id="8039" href="Meta.Reflection.Signature.html#8039" class="Bound">class</a> <a id="8045" href="Meta.Reflection.Signature.html#8045" class="Bound">n</a> <a id="8047" href="Meta.Reflection.Signature.html#8047" class="Bound">xs</a> <a id="8050" class="Symbol">(</a><a id="8051" href="Agda.Builtin.Reflection.html#5426" class="InductiveConstructor">pi</a> <a id="8054" href="Meta.Reflection.Signature.html#8054" class="Bound">a</a> <a id="8056" class="Symbol">(</a><a id="8057" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="8061" href="Meta.Reflection.Signature.html#8061" class="Bound">s</a> <a id="8063" href="Meta.Reflection.Signature.html#8063" class="Bound">b</a><a id="8064" class="Symbol">))</a> <a id="8067" class="Symbol">=</a>
    <a id="8073" href="Agda.Builtin.Reflection.html#5426" class="InductiveConstructor">pi</a> <a id="8076" class="Symbol">(</a><a id="8077" href="Data.Reflection.Argument.html#1578" class="Function">argH</a> <a id="8082" class="Symbol">(</a><a id="8083" href="Data.Reflection.Argument.html#1151" class="Function">unarg</a> <a id="8089" href="Meta.Reflection.Signature.html#8054" class="Bound">a</a><a id="8090" class="Symbol">))</a> <a id="8093" href="Foundations.Correspondences.Binary.Transitive.html#548" class="Function Operator">∘ˢ</a> <a id="8096" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="8100" href="Meta.Reflection.Signature.html#8061" class="Bound">s</a> <a id="8102" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a>
     <a id="8111" href="Meta.Reflection.Signature.html#7851" class="Function">class-for-param</a> <a id="8127" href="Meta.Reflection.Signature.html#8039" class="Bound">class</a> <a id="8133" class="Symbol">(</a><a id="8134" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="8138" href="Meta.Reflection.Signature.html#8045" class="Bound">n</a><a id="8139" class="Symbol">)</a> <a id="8141" class="Symbol">(</a><a id="8142" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="8146" class="Symbol">(</a><a id="8147" href="Data.Reflection.Argument.html#1107" class="Function">unai</a> <a id="8152" href="Meta.Reflection.Signature.html#8054" class="Bound">a</a><a id="8153" class="Symbol">)</a> <a id="8155" href="Meta.Reflection.Signature.html#8045" class="Bound">n</a> <a id="8157" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8159" href="Meta.Reflection.Signature.html#8047" class="Bound">xs</a><a id="8161" class="Symbol">)</a> <a id="8163" href="Meta.Reflection.Signature.html#8063" class="Bound">b</a>
  <a id="8167" href="Meta.Reflection.Signature.html#7851" class="CatchallClause Function">class-for-param</a><a id="8182" class="CatchallClause"> </a><a id="8183" class="CatchallClause Symbol">_</a><a id="8184" class="CatchallClause"> </a><a id="8185" class="CatchallClause Symbol">_</a><a id="8186" class="CatchallClause"> </a><a id="8187" class="CatchallClause Symbol">_</a><a id="8188" class="CatchallClause"> </a><a id="8189" class="CatchallClause Symbol">_</a> <a id="8191" class="Symbol">=</a> <a id="8193" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

  <a id="compute-telescope"></a><a id="8204" href="Meta.Reflection.Signature.html#8204" class="Function">compute-telescope</a> <a id="8222" class="Symbol">:</a> <a id="8224" class="Symbol">(</a><a id="8225" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="8229" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="8234" class="Symbol">→</a> <a id="8236" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="8240" class="Symbol">)</a> <a id="8242" class="Symbol">→</a> <a id="8244" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="8246" class="Symbol">→</a> <a id="8248" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8253" class="Symbol">(</a><a id="8254" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="8258" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="8259" class="Symbol">)</a> <a id="8261" class="Symbol">→</a> <a id="8263" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="8273" class="Symbol">→</a> <a id="8275" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="8285" class="Symbol">→</a> <a id="8287" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="8297" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="8299" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8304" class="Symbol">(</a><a id="8305" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="8309" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="8313" class="Symbol">)</a>
  <a id="8317" href="Meta.Reflection.Signature.html#8204" class="Function">compute-telescope</a> <a id="8335" href="Meta.Reflection.Signature.html#8335" class="Bound">d</a> <a id="8337" href="Meta.Reflection.Signature.html#8337" class="Bound">n</a> <a id="8339" href="Meta.Reflection.Signature.html#8339" class="Bound">xs</a> <a id="8342" href="Meta.Reflection.Signature.html#8342" class="Bound">is</a> <a id="8345" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="8348" class="Symbol">=</a> <a id="8350" href="Data.List.Base.html#849" class="Function">reverse</a> <a id="8358" href="Meta.Reflection.Signature.html#8342" class="Bound">is</a> <a id="8361" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8363" href="Meta.Reflection.Signature.html#7729" class="Function">make-args</a> <a id="8373" class="Symbol">(</a><a id="8374" href="Meta.Reflection.Signature.html#8337" class="Bound">n</a> <a id="8376" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="8378" href="Data.List.Operations.html#812" class="Function">length</a> <a id="8385" href="Meta.Reflection.Signature.html#8342" class="Bound">is</a><a id="8387" class="Symbol">)</a> <a id="8389" href="Meta.Reflection.Signature.html#8339" class="Bound">xs</a>
  <a id="8394" href="Meta.Reflection.Signature.html#8204" class="Function">compute-telescope</a> <a id="8412" href="Meta.Reflection.Signature.html#8412" class="Bound">d</a> <a id="8414" href="Meta.Reflection.Signature.html#8414" class="Bound">n</a> <a id="8416" href="Meta.Reflection.Signature.html#8416" class="Bound">xs</a> <a id="8419" href="Meta.Reflection.Signature.html#8419" class="Bound">is</a> <a id="8422" class="Symbol">((</a><a id="8424" href="Meta.Reflection.Signature.html#8424" class="Bound">x</a> <a id="8426" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8428" href="Meta.Reflection.Signature.html#8428" class="Bound">a</a><a id="8429" class="Symbol">)</a> <a id="8431" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8433" href="Meta.Reflection.Signature.html#8433" class="Bound">tel</a><a id="8436" class="Symbol">)</a> <a id="8438" class="Symbol">=</a>
    <a id="8444" class="Keyword">let</a>
      <a id="8454" href="Meta.Reflection.Signature.html#8454" class="Bound">narg</a> <a id="8459" class="Symbol">=</a> <a id="8461" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="8465" class="Symbol">(</a><a id="8466" href="Data.Reflection.Argument.html#1107" class="Function">unai</a> <a id="8471" href="Meta.Reflection.Signature.html#8428" class="Bound">a</a><a id="8472" class="Symbol">)</a> <a id="8474" href="Meta.Reflection.Signature.html#8414" class="Bound">n</a>
      <a id="8482" href="Meta.Reflection.Signature.html#8482" class="Bound">is′</a> <a id="8486" class="Symbol">=</a> <a id="8488" href="Meta.Effect.Traversable.html#293" class="Field">traverse</a> <a id="8497" class="Symbol">(λ</a> <a id="8500" class="Symbol">(</a><a id="8501" href="Meta.Reflection.Signature.html#8501" class="Bound">s</a> <a id="8503" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8505" href="Meta.Reflection.Signature.html#8505" class="Bound">t</a><a id="8506" class="Symbol">)</a> <a id="8508" class="Symbol">→</a> <a id="8510" href="Meta.Reflection.Subst.html#2171" class="Function">raise</a> <a id="8516" class="Number">1</a> <a id="8518" href="Meta.Reflection.Signature.html#8505" class="Bound">t</a> <a id="8520" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="8524" class="Symbol">λ</a> <a id="8526" href="Meta.Reflection.Signature.html#8526" class="Bound">x</a> <a id="8528" class="Symbol">→</a> <a id="8530" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="8535" class="Symbol">(</a><a id="8536" href="Meta.Reflection.Signature.html#8501" class="Bound">s</a> <a id="8538" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8540" href="Meta.Reflection.Signature.html#8526" class="Bound">x</a><a id="8541" class="Symbol">))</a> <a id="8544" href="Meta.Reflection.Signature.html#8419" class="Bound">is</a>
      <a id="8553" href="Meta.Reflection.Signature.html#8553" class="Bound">w</a> <a id="8555" class="Symbol">:</a> <a id="8557" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8563" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
      <a id="8574" href="Meta.Reflection.Signature.html#8553" class="Bound">w</a> <a id="8576" class="Symbol">=</a> <a id="8578" href="Meta.Reflection.Subst.html#2171" class="Function">raise</a> <a id="8584" class="Number">1</a> <a id="8586" class="Symbol">(</a><a id="8587" href="Data.Reflection.Argument.html#1151" class="Function">unarg</a> <a id="8593" href="Meta.Reflection.Signature.html#8428" class="Bound">a</a><a id="8594" class="Symbol">)</a> <a id="8596" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="8600" href="Meta.Reflection.Signature.html#7851" class="Function">class-for-param</a> <a id="8616" href="Meta.Reflection.Signature.html#8412" class="Bound">d</a> <a id="8618" class="Number">0</a> <a id="8620" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
      <a id="8629" href="Meta.Reflection.Signature.html#8629" class="Bound">z</a> <a id="8631" class="Symbol">:</a> <a id="8633" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8639" class="Symbol">(</a><a id="8640" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="8650" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="8652" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8657" class="Symbol">(</a><a id="8658" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="8662" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="8666" class="Symbol">))</a>
      <a id="8675" href="Meta.Reflection.Signature.html#8629" class="Bound">z</a> <a id="8677" class="Symbol">=</a> <a id="8679" href="Meta.Inductive.html#1749" class="Function Operator">case</a> <a id="8684" href="Meta.Reflection.Signature.html#8553" class="Bound">w</a> <a id="8686" href="Meta.Inductive.html#1749" class="Function Operator">of</a> <a id="8689" class="Symbol">λ</a> <a id="8691" class="Keyword">where</a>
        <a id="8705" class="Symbol">(</a><a id="8706" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8711" href="Meta.Reflection.Signature.html#8711" class="Bound">i</a><a id="8712" class="Symbol">)</a> <a id="8714" class="Symbol">→</a> <a id="8716" class="Keyword">do</a>
          <a id="8729" href="Meta.Reflection.Signature.html#8729" class="Bound">is″</a> <a id="8733" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="8735" href="Meta.Reflection.Signature.html#8482" class="Bound">is′</a>
          <a id="8749" href="Meta.Reflection.Signature.html#8749" class="Bound">r</a> <a id="8751" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="8753" href="Meta.Reflection.Subst.html#2171" class="Function">raise</a> <a id="8759" class="Symbol">(</a><a id="8760" href="Data.List.Operations.html#812" class="Function">length</a> <a id="8767" href="Meta.Reflection.Signature.html#8419" class="Bound">is</a><a id="8769" class="Symbol">)</a> <a id="8771" href="Meta.Reflection.Signature.html#8711" class="Bound">i</a>
          <a id="8783" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="8788" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="8790" href="Meta.Reflection.Signature.html#8204" class="Function">compute-telescope</a> <a id="8808" href="Meta.Reflection.Signature.html#8412" class="Bound">d</a> <a id="8810" class="Symbol">(</a><a id="8811" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="8815" href="Meta.Reflection.Signature.html#8414" class="Bound">n</a><a id="8816" class="Symbol">)</a> <a id="8818" class="Symbol">(</a><a id="8819" href="Meta.Reflection.Signature.html#8454" class="Bound">narg</a> <a id="8824" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8826" href="Meta.Reflection.Signature.html#8416" class="Bound">xs</a><a id="8828" class="Symbol">)</a> <a id="8830" class="Symbol">((</a><a id="8832" href="Meta.Reflection.Signature.html#8424" class="Bound">x</a> <a id="8834" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8836" href="Data.Reflection.Argument.html#1583" class="Function">argI</a> <a id="8841" href="Meta.Reflection.Signature.html#8749" class="Bound">r</a><a id="8842" class="Symbol">)</a> <a id="8844" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8846" href="Meta.Reflection.Signature.html#8729" class="Bound">is″</a><a id="8849" class="Symbol">)</a> <a id="8851" href="Meta.Reflection.Signature.html#8433" class="Bound">tel</a>
        <a id="8863" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8871" class="Symbol">→</a> <a id="8873" class="Keyword">do</a>
          <a id="8886" href="Meta.Reflection.Signature.html#8886" class="Bound">is″</a> <a id="8890" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="8892" href="Meta.Reflection.Signature.html#8482" class="Bound">is′</a>
          <a id="8906" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="8911" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="8913" href="Meta.Reflection.Signature.html#8204" class="Function">compute-telescope</a> <a id="8931" href="Meta.Reflection.Signature.html#8412" class="Bound">d</a> <a id="8933" class="Symbol">(</a><a id="8934" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="8938" href="Meta.Reflection.Signature.html#8414" class="Bound">n</a><a id="8939" class="Symbol">)</a> <a id="8941" class="Symbol">(</a><a id="8942" href="Meta.Reflection.Signature.html#8454" class="Bound">narg</a> <a id="8947" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8949" href="Meta.Reflection.Signature.html#8416" class="Bound">xs</a><a id="8951" class="Symbol">)</a> <a id="8953" href="Meta.Reflection.Signature.html#8886" class="Bound">is″</a> <a id="8957" href="Meta.Reflection.Signature.html#8433" class="Bound">tel</a>
    <a id="8965" class="Keyword">in</a> <a id="8968" href="Meta.Inductive.html#1749" class="Function Operator">case</a> <a id="8973" href="Meta.Reflection.Signature.html#8629" class="Bound">z</a> <a id="8975" href="Meta.Inductive.html#1749" class="Function Operator">of</a> <a id="8978" class="Symbol">λ</a> <a id="8980" class="Keyword">where</a>
      <a id="8992" class="Symbol">(</a><a id="8993" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8998" class="Symbol">(</a><a id="8999" href="Meta.Reflection.Signature.html#8999" class="Bound">tele</a> <a id="9004" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9006" href="Meta.Reflection.Signature.html#9006" class="Bound">args</a><a id="9010" class="Symbol">))</a> <a id="9013" class="Symbol">→</a> <a id="9015" class="Symbol">(</a><a id="9016" href="Meta.Reflection.Signature.html#8424" class="Bound">x</a> <a id="9018" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9020" href="Data.Reflection.Argument.html#1578" class="Function">argH</a> <a id="9025" class="Symbol">(</a><a id="9026" href="Data.Reflection.Argument.html#1151" class="Function">unarg</a> <a id="9032" href="Meta.Reflection.Signature.html#8428" class="Bound">a</a><a id="9033" class="Symbol">))</a> <a id="9036" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9038" href="Meta.Reflection.Signature.html#8999" class="Bound">tele</a> <a id="9043" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9045" href="Meta.Reflection.Signature.html#9006" class="Bound">args</a>
      <a id="9056" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9064" class="Symbol">→</a> <a id="9066" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9069" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9071" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9074" class="Comment">-- ???</a>

<a id="9082" class="Comment">-- Given the name of a &quot;class&quot;, and the name of a &quot;data type&quot;, compute</a>
<a id="9153" class="Comment">-- the telescope, and arguments *of the data type*, for a &quot;derived</a>
<a id="9220" class="Comment">-- instance&quot; of that class. This is best demonstrated by example:</a>
<a id="9286" class="Comment">--</a>
<a id="9289" class="Comment">--   instance-telescope (quote Show) (quote Vec) =</a>
<a id="9340" class="Comment">--     ( {ℓ : Level} {A : Type ℓ} ⦃ _ : Show A ⦄ {n : Nat}</a>
<a id="9399" class="Comment">--     , [ ℓ , A , n ]</a>
<a id="9422" class="Comment">--     )</a>
<a id="9431" class="Comment">--</a>
<a id="9434" class="Comment">-- That is, all the parameters of the data type are bound invisibly, and</a>
<a id="9507" class="Comment">-- parameters that (end in) a type additionally have corresponding</a>
<a id="9574" class="Comment">-- instances of the class available.</a>
<a id="instance-telescope"></a><a id="9611" href="Meta.Reflection.Signature.html#9611" class="Function">instance-telescope</a> <a id="9630" class="Symbol">:</a> <a id="9632" class="Symbol">(</a><a id="9633" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="9637" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="9642" class="Symbol">→</a> <a id="9644" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="9648" class="Symbol">)</a> <a id="9650" class="Symbol">→</a> <a id="9652" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="9657" class="Symbol">→</a> <a id="9659" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="9662" class="Symbol">(</a><a id="9663" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="9673" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="9675" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9680" class="Symbol">(</a><a id="9681" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="9685" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="9689" class="Symbol">))</a>
<a id="9692" href="Meta.Reflection.Signature.html#9611" class="Function">instance-telescope</a> <a id="9711" href="Meta.Reflection.Signature.html#9711" class="Bound">class</a> <a id="9717" href="Meta.Reflection.Signature.html#9717" class="Bound">dat</a> <a id="9721" class="Symbol">=</a> <a id="9723" class="Keyword">do</a>
  <a id="9728" class="Symbol">(</a><a id="9729" href="Meta.Reflection.Signature.html#9729" class="Bound">tele</a> <a id="9734" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9736" class="Symbol">_)</a> <a id="9739" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="9741" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="9749" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="9753" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="9762" href="Meta.Reflection.Signature.html#9717" class="Bound">dat</a>
  <a id="9768" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="9773" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="9775" href="Meta.Reflection.Signature.html#8204" class="Function">compute-telescope</a> <a id="9793" href="Meta.Reflection.Signature.html#9711" class="Bound">class</a> <a id="9799" class="Number">0</a> <a id="9801" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9804" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9807" href="Meta.Reflection.Signature.html#9729" class="Bound">tele</a>

<a id="9813" class="Comment">-- Like `instance-telescope`, but instead return the complete pi-type of</a>
<a id="9886" class="Comment">-- the derived instance.</a>
<a id="instance-type"></a><a id="9911" href="Meta.Reflection.Signature.html#9911" class="Function">instance-type</a> <a id="9925" class="Symbol">:</a> <a id="9927" class="Symbol">(</a><a id="9928" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="9932" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="9937" class="Symbol">→</a> <a id="9939" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="9943" class="Symbol">)</a> <a id="9945" class="Symbol">→</a> <a id="9947" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="9952" class="Symbol">→</a> <a id="9954" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="9957" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
<a id="9962" href="Meta.Reflection.Signature.html#9911" class="Function">instance-type</a> <a id="9976" href="Meta.Reflection.Signature.html#9976" class="Bound">class</a> <a id="9982" href="Meta.Reflection.Signature.html#9982" class="Bound">dat</a> <a id="9986" class="Symbol">=</a> <a id="9988" class="Keyword">do</a>
  <a id="9993" class="Symbol">(</a><a id="9994" href="Meta.Reflection.Signature.html#9994" class="Bound">tel</a> <a id="9998" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10000" href="Meta.Reflection.Signature.html#10000" class="Bound">vs</a><a id="10002" class="Symbol">)</a> <a id="10004" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="10006" href="Meta.Reflection.Signature.html#9611" class="Function">instance-telescope</a> <a id="10025" href="Meta.Reflection.Signature.html#9976" class="Bound">class</a> <a id="10031" href="Meta.Reflection.Signature.html#9982" class="Bound">dat</a>
  <a id="10037" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="10042" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="10044" href="Data.Reflection.Term.html#1749" class="Function">unpi-view</a> <a id="10054" href="Meta.Reflection.Signature.html#9994" class="Bound">tel</a> <a id="10058" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="10060" href="Meta.Reflection.Signature.html#9976" class="Bound">class</a> <a id="10066" href="Meta.Underlying.html#1738" class="Function Operator">$</a> <a id="10068" href="Data.Reflection.Argument.html#1588" class="Function">argN</a> <a id="10073" class="Symbol">(</a><a id="10074" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="10078" href="Meta.Reflection.Signature.html#9982" class="Bound">dat</a> <a id="10082" href="Meta.Reflection.Signature.html#10000" class="Bound">vs</a><a id="10084" class="Symbol">)</a>
</pre></body></html>