<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Meta.Reflection.Signature</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Keyword">module</a> <a id="31" href="Meta.Reflection.Signature.html" class="Module">Meta.Reflection.Signature</a> <a id="57" class="Keyword">where</a>

<a id="64" class="Keyword">open</a> <a id="69" class="Keyword">import</a> <a id="76" href="Foundations.Base.html" class="Module">Foundations.Base</a>

<a id="94" class="Keyword">open</a> <a id="99" class="Keyword">import</a> <a id="106" href="Meta.Append.html" class="Module">Meta.Append</a>
<a id="118" class="Keyword">open</a> <a id="123" class="Keyword">import</a> <a id="130" href="Meta.Effect.Foldable.html" class="Module">Meta.Effect.Foldable</a>
<a id="151" class="Keyword">open</a> <a id="156" class="Keyword">import</a> <a id="163" href="Meta.Effect.Traversable.html" class="Module">Meta.Effect.Traversable</a>
<a id="187" class="Keyword">open</a> <a id="192" class="Keyword">import</a> <a id="199" href="Meta.Show.html" class="Module">Meta.Show</a>
<a id="209" class="Keyword">open</a> <a id="214" class="Keyword">import</a> <a id="221" href="Meta.Reflection.Base.html" class="Module">Meta.Reflection.Base</a>
<a id="242" class="Keyword">open</a> <a id="247" class="Keyword">import</a> <a id="254" href="Meta.Reflection.Neutral.html" class="Module">Meta.Reflection.Neutral</a>
<a id="278" class="Keyword">open</a> <a id="283" class="Keyword">import</a> <a id="290" href="Meta.Reflection.Subst.html" class="Module">Meta.Reflection.Subst</a>

<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a>
<a id="340" class="Keyword">open</a> <a id="345" class="Keyword">import</a> <a id="352" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="367" class="Keyword">open</a> <a id="372" class="Keyword">import</a> <a id="379" href="Data.List.Instances.Map.html" class="Module">Data.List.Instances.Map</a>
<a id="403" class="Keyword">open</a> <a id="408" class="Keyword">import</a> <a id="415" href="Data.List.Instances.Foldable.html" class="Module">Data.List.Instances.Foldable</a>
<a id="444" class="Keyword">open</a> <a id="449" class="Keyword">import</a> <a id="456" href="Data.List.Instances.FromProduct.html" class="Module">Data.List.Instances.FromProduct</a>
<a id="488" class="Keyword">open</a> <a id="493" class="Keyword">import</a> <a id="500" href="Data.List.Instances.Traversable.html" class="Module">Data.List.Instances.Traversable</a>
<a id="532" class="Keyword">open</a> <a id="537" class="Keyword">import</a> <a id="544" href="Data.List.Operations.html" class="Module">Data.List.Operations</a>
<a id="565" class="Keyword">open</a> <a id="570" class="Keyword">import</a> <a id="577" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a>
<a id="593" class="Keyword">open</a> <a id="598" class="Keyword">import</a> <a id="605" href="Data.Maybe.Instances.Bind.html" class="Module">Data.Maybe.Instances.Bind</a>
<a id="631" class="Keyword">open</a> <a id="636" class="Keyword">import</a> <a id="643" href="Data.Maybe.Instances.Map.html" class="Module">Data.Maybe.Instances.Map</a>
<a id="668" class="Keyword">open</a> <a id="673" class="Keyword">import</a> <a id="680" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="694" class="Keyword">open</a> <a id="699" class="Keyword">import</a> <a id="706" href="Data.Reflection.Abs.html" class="Module">Data.Reflection.Abs</a>
<a id="726" class="Keyword">open</a> <a id="731" class="Keyword">import</a> <a id="738" href="Data.Reflection.Argument.html" class="Module">Data.Reflection.Argument</a>
<a id="763" class="Keyword">open</a> <a id="768" class="Keyword">import</a> <a id="775" href="Data.Reflection.Error.html" class="Module">Data.Reflection.Error</a>
<a id="797" class="Keyword">open</a> <a id="802" class="Keyword">import</a> <a id="809" href="Data.Reflection.Fixity.html" class="Module">Data.Reflection.Fixity</a>
<a id="832" class="Keyword">open</a> <a id="837" class="Keyword">import</a> <a id="844" href="Data.Reflection.Instances.FromString.html" class="Module">Data.Reflection.Instances.FromString</a>
<a id="881" class="Keyword">open</a> <a id="886" class="Keyword">import</a> <a id="893" href="Data.Reflection.Instances.Show.html" class="Module">Data.Reflection.Instances.Show</a>
<a id="924" class="Keyword">open</a> <a id="929" class="Keyword">import</a> <a id="936" href="Data.Reflection.Literal.html" class="Module">Data.Reflection.Literal</a>
<a id="960" class="Keyword">open</a> <a id="965" class="Keyword">import</a> <a id="972" href="Data.Reflection.Meta.html" class="Module">Data.Reflection.Meta</a>
<a id="993" class="Keyword">open</a> <a id="998" class="Keyword">import</a> <a id="1005" href="Data.Reflection.Name.html" class="Module">Data.Reflection.Name</a>
<a id="1026" class="Keyword">open</a> <a id="1031" class="Keyword">import</a> <a id="1038" href="Data.Reflection.Term.html" class="Module">Data.Reflection.Term</a>
<a id="1059" class="Keyword">open</a> <a id="1064" class="Keyword">import</a> <a id="1071" href="Data.String.Instances.Append.html" class="Module">Data.String.Instances.Append</a>

<a id="1101" class="Comment">-- Look up a data type definition in the signature.</a>
<a id="get-data-type"></a><a id="1153" href="Meta.Reflection.Signature.html#1153" class="Function">get-data-type</a> <a id="1167" class="Symbol">:</a> <a id="1169" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="1174" class="Symbol">→</a> <a id="1176" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="1179" class="Symbol">(</a><a id="1180" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1182" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="1184" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1189" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="1193" class="Symbol">)</a>
<a id="1195" href="Meta.Reflection.Signature.html#1153" class="Function">get-data-type</a> <a id="1209" href="Meta.Reflection.Signature.html#1209" class="Bound">n</a> <a id="1211" class="Symbol">=</a> <a id="1213" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="1228" href="Meta.Reflection.Signature.html#1209" class="Bound">n</a> <a id="1230" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="1234" class="Symbol">λ</a> <a id="1236" class="Keyword">where</a>
  <a id="1244" class="Symbol">(</a><a id="1245" href="Agda.Builtin.Reflection.html#7558" class="InductiveConstructor">data-type</a> <a id="1255" href="Meta.Reflection.Signature.html#1255" class="Bound">pars</a> <a id="1260" href="Meta.Reflection.Signature.html#1260" class="Bound">cs</a><a id="1262" class="Symbol">)</a> <a id="1264" class="Symbol">→</a> <a id="1266" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="1271" class="Symbol">(</a><a id="1272" href="Meta.Reflection.Signature.html#1255" class="Bound">pars</a> <a id="1277" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1279" href="Meta.Reflection.Signature.html#1260" class="Bound">cs</a><a id="1281" class="Symbol">)</a>
  <a id="1285" class="CatchallClause Symbol">_</a> <a id="1287" class="Symbol">→</a> <a id="1289" href="Agda.Builtin.Reflection.html#8815" class="Postulate">type-error</a> <a id="1300" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="1302" class="String">&quot;get-data-type: definition &quot;</a> <a id="1331" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1333" href="Data.Reflection.Error.html#256" class="InductiveConstructor">name-err</a> <a id="1342" href="Meta.Reflection.Signature.html#1209" class="Bound">n</a> <a id="1344" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1346" class="String">&quot; is not a data type.&quot;</a> <a id="1369" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="1372" class="Comment">-- Look up a record type definition in the signature.</a>
<a id="get-record-type"></a><a id="1426" href="Meta.Reflection.Signature.html#1426" class="Function">get-record-type</a> <a id="1442" class="Symbol">:</a> <a id="1444" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="1449" class="Symbol">→</a> <a id="1451" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="1454" class="Symbol">(</a><a id="1455" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="1460" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="1462" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1467" class="Symbol">(</a><a id="1468" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1472" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="1476" class="Symbol">))</a>
<a id="1479" href="Meta.Reflection.Signature.html#1426" class="Function">get-record-type</a> <a id="1495" href="Meta.Reflection.Signature.html#1495" class="Bound">n</a> <a id="1497" class="Symbol">=</a> <a id="1499" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="1514" href="Meta.Reflection.Signature.html#1495" class="Bound">n</a> <a id="1516" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="1520" class="Symbol">λ</a> <a id="1522" class="Keyword">where</a>
  <a id="1530" class="Symbol">(</a><a id="1531" href="Agda.Builtin.Reflection.html#7617" class="InductiveConstructor">record-type</a> <a id="1543" href="Meta.Reflection.Signature.html#1543" class="Bound">conm</a> <a id="1548" href="Meta.Reflection.Signature.html#1548" class="Bound">fields</a><a id="1554" class="Symbol">)</a> <a id="1556" class="Symbol">→</a> <a id="1558" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="1563" class="Symbol">(</a><a id="1564" href="Meta.Reflection.Signature.html#1543" class="Bound">conm</a> <a id="1569" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1571" href="Meta.Reflection.Signature.html#1548" class="Bound">fields</a><a id="1577" class="Symbol">)</a>
  <a id="1581" class="CatchallClause Symbol">_</a> <a id="1583" class="Symbol">→</a> <a id="1585" href="Agda.Builtin.Reflection.html#8815" class="Postulate">type-error</a> <a id="1596" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="1598" class="String">&quot;get-record-type: definition &quot;</a> <a id="1629" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1631" href="Data.Reflection.Error.html#256" class="InductiveConstructor">name-err</a> <a id="1640" href="Meta.Reflection.Signature.html#1495" class="Bound">n</a> <a id="1642" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1644" class="String">&quot; is not a record type.&quot;</a> <a id="1669" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="1672" class="Comment">-- Representation of a data/record constructor.</a>
<a id="1720" class="Keyword">record</a> <a id="Constructor"></a><a id="1727" href="Meta.Reflection.Signature.html#1727" class="Record">Constructor</a> <a id="1739" class="Symbol">:</a> <a id="1741" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="1746" class="Keyword">where</a>
  <a id="1754" class="Keyword">constructor</a> <a id="conhead"></a><a id="1766" href="Meta.Reflection.Signature.html#1766" class="InductiveConstructor">conhead</a>
  <a id="1776" class="Keyword">field</a>
    <a id="1786" class="Comment">-- Name of the constructor itself:</a>
    <a id="Constructor.con-name"></a><a id="1825" href="Meta.Reflection.Signature.html#1825" class="Field">con-name</a>      <a id="1839" class="Symbol">:</a> <a id="1841" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>

    <a id="1851" class="Comment">-- Name of the data type:</a>
    <a id="Constructor.con-data"></a><a id="1881" href="Meta.Reflection.Signature.html#1881" class="Field">con-data</a>      <a id="1895" class="Symbol">:</a> <a id="1897" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>

    <a id="1907" class="Comment">-- Argument telescope for the constructor, with the datatype&#39;s</a>
    <a id="1974" class="Comment">-- parameters removed.</a>
    <a id="Constructor.con-arguments"></a><a id="2001" href="Meta.Reflection.Signature.html#2001" class="Field">con-arguments</a> <a id="2015" class="Symbol">:</a> <a id="2017" href="Data.Reflection.Term.html#800" class="Function">Telescope</a>

    <a id="2032" class="Comment">-- Return type of the constructor.</a>
    <a id="Constructor.con-returns"></a><a id="2071" href="Meta.Reflection.Signature.html#2071" class="Field">con-returns</a>   <a id="2085" class="Symbol">:</a> <a id="2087" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>

  <a id="2095" class="Comment">-- For the scoping of con-arguments and con-returns, we have</a>
  <a id="2158" class="Comment">--</a>
  <a id="2163" class="Comment">--    data D Δ : Type ... where</a>
  <a id="2197" class="Comment">--      c : Γ → D δ</a>
  <a id="2219" class="Comment">--</a>
  <a id="2224" class="Comment">--    becoming</a>
  <a id="2241" class="Comment">--</a>
  <a id="2246" class="Comment">--      c : ∀ {Δ} → Γ → D δ</a>
  <a id="2276" class="Comment">--</a>
  <a id="2281" class="Comment">--    in the signature. con-arguments is Δ ⊢ Γ, and con-returns is Δ, Γ ⊢ D δ.</a>

<a id="get-type-constructors"></a><a id="2361" href="Meta.Reflection.Signature.html#2361" class="Function">get-type-constructors</a> <a id="2383" class="Symbol">:</a> <a id="2385" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2390" class="Symbol">→</a> <a id="2392" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="2395" class="Symbol">(</a><a id="2396" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2401" href="Meta.Reflection.Signature.html#1727" class="Record">Constructor</a><a id="2412" class="Symbol">)</a>
<a id="2414" href="Meta.Reflection.Signature.html#2361" class="Function">get-type-constructors</a> <a id="2436" href="Meta.Reflection.Signature.html#2436" class="Bound">n</a> <a id="2438" class="Symbol">=</a> <a id="2440" href="Meta.Reflection.Signature.html#2472" class="Function">datatype</a> <a id="2449" href="Meta.Effect.Alt.html#320" class="Field Operator">&lt;|&gt;</a> <a id="2453" href="Meta.Reflection.Signature.html#2640" class="Function">recordtype</a> <a id="2464" class="Keyword">where</a>
  <a id="2472" href="Meta.Reflection.Signature.html#2472" class="Function">datatype</a> <a id="2481" class="Symbol">=</a> <a id="2483" class="Keyword">do</a>
    <a id="2490" class="Symbol">(</a><a id="2491" href="Meta.Reflection.Signature.html#2491" class="Bound">npars</a> <a id="2497" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2499" href="Meta.Reflection.Signature.html#2499" class="Bound">cons</a><a id="2503" class="Symbol">)</a> <a id="2505" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2507" href="Meta.Reflection.Signature.html#1153" class="Function">get-data-type</a> <a id="2521" href="Meta.Reflection.Signature.html#2436" class="Bound">n</a>
    <a id="2527" href="Meta.Effect.Traversable.html#396" class="Function">for</a> <a id="2531" href="Meta.Reflection.Signature.html#2499" class="Bound">cons</a> <a id="2536" class="Symbol">λ</a> <a id="2538" href="Meta.Reflection.Signature.html#2538" class="Bound">qn</a> <a id="2541" class="Symbol">→</a> <a id="2543" class="Keyword">do</a>
      <a id="2552" class="Symbol">(</a><a id="2553" href="Meta.Reflection.Signature.html#2553" class="Bound">args</a> <a id="2558" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2560" href="Meta.Reflection.Signature.html#2560" class="Bound">ty</a><a id="2562" class="Symbol">)</a> <a id="2564" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2566" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="2574" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="2578" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="2587" href="Meta.Reflection.Signature.html#2538" class="Bound">qn</a>
      <a id="2596" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="2601" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="2603" href="Meta.Reflection.Signature.html#1766" class="InductiveConstructor">conhead</a> <a id="2611" href="Meta.Reflection.Signature.html#2538" class="Bound">qn</a> <a id="2614" href="Meta.Reflection.Signature.html#2436" class="Bound">n</a> <a id="2616" class="Symbol">(</a><a id="2617" href="Data.List.Operations.html#2328" class="Function">drop</a> <a id="2622" href="Meta.Reflection.Signature.html#2491" class="Bound">npars</a> <a id="2628" href="Meta.Reflection.Signature.html#2553" class="Bound">args</a><a id="2632" class="Symbol">)</a> <a id="2634" href="Meta.Reflection.Signature.html#2560" class="Bound">ty</a>

  <a id="2640" href="Meta.Reflection.Signature.html#2640" class="Function">recordtype</a> <a id="2651" class="Symbol">=</a> <a id="2653" class="Keyword">do</a>
    <a id="2660" class="Symbol">(</a><a id="2661" href="Meta.Reflection.Signature.html#2661" class="Bound">c</a>  <a id="2664" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2666" class="Symbol">_)</a>    <a id="2672" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2674" href="Meta.Reflection.Signature.html#1426" class="Function">get-record-type</a> <a id="2690" href="Meta.Reflection.Signature.html#2436" class="Bound">n</a>
    <a id="2696" class="Symbol">(</a><a id="2697" href="Meta.Reflection.Signature.html#2697" class="Bound">np</a> <a id="2700" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2702" class="Symbol">_)</a>    <a id="2708" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2710" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="2718" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="2722" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="2731" href="Meta.Reflection.Signature.html#2436" class="Bound">n</a>
    <a id="2737" class="Symbol">(</a><a id="2738" href="Meta.Reflection.Signature.html#2738" class="Bound">args</a> <a id="2743" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2745" href="Meta.Reflection.Signature.html#2745" class="Bound">ty</a><a id="2747" class="Symbol">)</a> <a id="2749" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="2751" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="2759" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="2763" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="2772" href="Meta.Reflection.Signature.html#2661" class="Bound">c</a>
    <a id="2778" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="2783" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="2785" href="Meta.Reflection.Signature.html#1766" class="InductiveConstructor">conhead</a> <a id="2793" href="Meta.Reflection.Signature.html#2661" class="Bound">c</a> <a id="2795" href="Meta.Reflection.Signature.html#2436" class="Bound">n</a> <a id="2797" class="Symbol">(</a><a id="2798" href="Data.List.Operations.html#2328" class="Function">drop</a> <a id="2803" class="Symbol">(</a><a id="2804" href="Data.List.Operations.html#812" class="Function">length</a> <a id="2811" href="Meta.Reflection.Signature.html#2697" class="Bound">np</a><a id="2813" class="Symbol">)</a> <a id="2815" href="Meta.Reflection.Signature.html#2738" class="Bound">args</a><a id="2819" class="Symbol">)</a> <a id="2821" href="Meta.Reflection.Signature.html#2745" class="Bound">ty</a> <a id="2824" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="2827" class="Comment">-- Look up a constructor in the signature.</a>
<a id="get-constructor"></a><a id="2870" href="Meta.Reflection.Signature.html#2870" class="Function">get-constructor</a> <a id="2886" class="Symbol">:</a> <a id="2888" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2893" class="Symbol">→</a> <a id="2895" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="2898" href="Meta.Reflection.Signature.html#1727" class="Record">Constructor</a>
<a id="2910" href="Meta.Reflection.Signature.html#2870" class="Function">get-constructor</a> <a id="2926" href="Meta.Reflection.Signature.html#2926" class="Bound">n</a> <a id="2928" class="Symbol">=</a> <a id="2930" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="2945" href="Meta.Reflection.Signature.html#2926" class="Bound">n</a> <a id="2947" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="2951" class="Symbol">λ</a> <a id="2953" class="Keyword">where</a>
  <a id="2961" class="Symbol">(</a><a id="2962" href="Agda.Builtin.Reflection.html#7680" class="InductiveConstructor">data-cons</a> <a id="2972" href="Meta.Reflection.Signature.html#2972" class="Bound">t</a><a id="2973" class="Symbol">)</a> <a id="2975" class="Symbol">→</a> <a id="2977" class="Keyword">do</a>
    <a id="2984" class="Symbol">(</a><a id="2985" href="Meta.Reflection.Signature.html#2985" class="Bound">npars</a> <a id="2991" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2993" href="Meta.Reflection.Signature.html#2993" class="Bound">cons</a><a id="2997" class="Symbol">)</a> <a id="2999" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="3001" href="Meta.Reflection.Signature.html#1153" class="Function">get-data-type</a> <a id="3015" href="Meta.Reflection.Signature.html#2972" class="Bound">t</a>
    <a id="3021" class="Symbol">(</a><a id="3022" href="Meta.Reflection.Signature.html#3022" class="Bound">args</a> <a id="3027" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3029" href="Meta.Reflection.Signature.html#3029" class="Bound">ty</a><a id="3031" class="Symbol">)</a>    <a id="3036" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="3038" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="3046" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="3050" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="3059" href="Meta.Reflection.Signature.html#2926" class="Bound">n</a>
    <a id="3065" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="3070" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="3072" href="Meta.Reflection.Signature.html#1766" class="InductiveConstructor">conhead</a> <a id="3080" href="Meta.Reflection.Signature.html#2926" class="Bound">n</a> <a id="3082" href="Meta.Reflection.Signature.html#2972" class="Bound">t</a> <a id="3084" class="Symbol">(</a><a id="3085" href="Data.List.Operations.html#2328" class="Function">drop</a> <a id="3090" href="Meta.Reflection.Signature.html#2985" class="Bound">npars</a> <a id="3096" href="Meta.Reflection.Signature.html#3022" class="Bound">args</a><a id="3100" class="Symbol">)</a> <a id="3102" href="Meta.Reflection.Signature.html#3029" class="Bound">ty</a>
  <a id="3107" class="CatchallClause Symbol">_</a> <a id="3109" class="Symbol">→</a> <a id="3111" href="Agda.Builtin.Reflection.html#8815" class="Postulate">type-error</a> <a id="3122" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="3124" class="String">&quot;get-constructor: &quot;</a> <a id="3144" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3146" href="Data.Reflection.Error.html#256" class="InductiveConstructor">name-err</a> <a id="3155" href="Meta.Reflection.Signature.html#2926" class="Bound">n</a> <a id="3157" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3159" class="String">&quot; is not a data constructor.&quot;</a> <a id="3189" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="3192" class="Comment">-- If a term reduces to an application of a record type, return</a>
<a id="3256" class="Comment">-- information about that record.</a>
<a id="get-record"></a><a id="3290" href="Meta.Reflection.Signature.html#3290" class="Function">get-record</a> <a id="3301" class="Symbol">:</a> <a id="3303" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="3308" class="Symbol">→</a> <a id="3310" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="3313" class="Symbol">(</a><a id="3314" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3319" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="3321" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3326" class="Symbol">(</a><a id="3327" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="3331" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="3335" class="Symbol">))</a>
<a id="3338" href="Meta.Reflection.Signature.html#3290" class="Function">get-record</a> <a id="3349" href="Meta.Reflection.Signature.html#3349" class="Bound">tm</a> <a id="3352" class="Symbol">=</a> <a id="3354" href="Agda.Builtin.Reflection.html#8993" class="Postulate">reduce</a> <a id="3361" href="Meta.Reflection.Signature.html#3349" class="Bound">tm</a> <a id="3364" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="3368" class="Symbol">λ</a> <a id="3370" class="Keyword">where</a>
  <a id="3378" class="Symbol">(</a><a id="3379" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="3383" href="Meta.Reflection.Signature.html#3383" class="Bound">qn</a> <a id="3386" class="Symbol">_)</a> <a id="3389" class="Symbol">→</a> <a id="3391" href="Meta.Reflection.Signature.html#1426" class="Function">get-record-type</a> <a id="3407" href="Meta.Reflection.Signature.html#3383" class="Bound">qn</a>
  <a id="3412" class="CatchallClause Symbol">_</a>          <a id="3423" class="Symbol">→</a> <a id="3425" href="Agda.Builtin.Reflection.html#8815" class="Postulate">type-error</a> <a id="3436" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="3438" class="String">&quot;get-record: &quot;</a> <a id="3453" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3455" href="Data.Reflection.Error.html#191" class="InductiveConstructor">term-err</a> <a id="3464" href="Meta.Reflection.Signature.html#3349" class="Bound">tm</a> <a id="3467" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3469" class="String">&quot; is not a record type.&quot;</a> <a id="3494" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>

<a id="3497" class="Comment">-- Get the argument telescope of something in the signature. NOTE: If</a>
<a id="3567" class="Comment">-- the Name refers to a Constructor, the returned telescope *will*</a>
<a id="3634" class="Comment">-- include the data/record parameters!</a>
<a id="get-argument-tele"></a><a id="3673" href="Meta.Reflection.Signature.html#3673" class="Function">get-argument-tele</a> <a id="3691" class="Symbol">:</a> <a id="3693" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3698" class="Symbol">→</a> <a id="3700" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="3703" href="Data.Reflection.Term.html#800" class="Function">Telescope</a>
<a id="3713" href="Meta.Reflection.Signature.html#3673" class="Function">get-argument-tele</a> <a id="3731" href="Meta.Reflection.Signature.html#3731" class="Bound">qn</a> <a id="3734" class="Symbol">=</a> <a id="3736" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="3745" href="Meta.Reflection.Signature.html#3731" class="Bound">qn</a> <a id="3748" href="Meta.Effect.Map.html#604" class="Function Operator">&lt;&amp;&gt;</a> <a id="3752" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="3756" href="Foundations.Pi.Base.html#1761" class="Function Operator">∘</a> <a id="3758" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a>

<a id="3767" class="Keyword">record</a> <a id="Has-constr"></a><a id="3774" href="Meta.Reflection.Signature.html#3774" class="Record">Has-constr</a> <a id="3785" class="Symbol">{</a><a id="3786" href="Meta.Reflection.Signature.html#3786" class="Bound">ℓ</a><a id="3787" class="Symbol">}</a> <a id="3789" class="Symbol">(</a><a id="3790" href="Meta.Reflection.Signature.html#3790" class="Bound">A</a> <a id="3792" class="Symbol">:</a> <a id="3794" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="3799" href="Meta.Reflection.Signature.html#3786" class="Bound">ℓ</a><a id="3800" class="Symbol">)</a> <a id="3802" class="Symbol">:</a> <a id="3804" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="3809" href="Meta.Reflection.Signature.html#3786" class="Bound">ℓ</a> <a id="3811" class="Keyword">where</a>
  <a id="3819" class="Keyword">field</a> <a id="Has-constr.from-constr"></a><a id="3825" href="Meta.Reflection.Signature.html#3825" class="Field">from-constr</a> <a id="3837" class="Symbol">:</a> <a id="3839" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3844" class="Symbol">→</a> <a id="3846" href="Meta.Reflection.Signature.html#3790" class="Bound">A</a>

<a id="3849" class="Keyword">record</a> <a id="Has-def"></a><a id="3856" href="Meta.Reflection.Signature.html#3856" class="Record">Has-def</a> <a id="3864" class="Symbol">{</a><a id="3865" href="Meta.Reflection.Signature.html#3865" class="Bound">ℓ</a><a id="3866" class="Symbol">}</a> <a id="3868" class="Symbol">(</a><a id="3869" href="Meta.Reflection.Signature.html#3869" class="Bound">A</a> <a id="3871" class="Symbol">:</a> <a id="3873" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="3878" href="Meta.Reflection.Signature.html#3865" class="Bound">ℓ</a><a id="3879" class="Symbol">)</a> <a id="3881" class="Symbol">:</a> <a id="3883" href="Foundations.Prim.Type.html#322" class="Primitive">Type</a> <a id="3888" href="Meta.Reflection.Signature.html#3865" class="Bound">ℓ</a> <a id="3890" class="Keyword">where</a>
  <a id="3898" class="Keyword">field</a> <a id="Has-def.from-def"></a><a id="3904" href="Meta.Reflection.Signature.html#3904" class="Field">from-def</a> <a id="3913" class="Symbol">:</a> <a id="3915" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3920" class="Symbol">→</a> <a id="3922" href="Meta.Reflection.Signature.html#3869" class="Bound">A</a>

<a id="3925" class="Keyword">instance</a>
  <a id="Has-constr-Pattern"></a><a id="3936" href="Meta.Reflection.Signature.html#3936" class="Function">Has-constr-Pattern</a> <a id="3955" class="Symbol">:</a> <a id="3957" href="Meta.Reflection.Signature.html#3774" class="Record">Has-constr</a> <a id="3968" href="Agda.Builtin.Reflection.html#5031" class="Datatype">Pattern</a>
  <a id="3978" href="Meta.Reflection.Signature.html#3936" class="Function">Has-constr-Pattern</a> <a id="3997" class="Symbol">.</a><a id="3998" href="Meta.Reflection.Signature.html#3825" class="Field">Has-constr.from-constr</a> <a id="4021" class="Symbol">=</a> <a id="4023" href="Data.Reflection.Term.html#2352" class="InductiveConstructor">con₀</a>

  <a id="Has-constr-Term"></a><a id="4031" href="Meta.Reflection.Signature.html#4031" class="Function">Has-constr-Term</a> <a id="4047" class="Symbol">:</a> <a id="4049" href="Meta.Reflection.Signature.html#3774" class="Record">Has-constr</a> <a id="4060" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="4067" href="Meta.Reflection.Signature.html#4031" class="Function">Has-constr-Term</a> <a id="4083" class="Symbol">.</a><a id="4084" href="Meta.Reflection.Signature.html#3825" class="Field">Has-constr.from-constr</a> <a id="4107" class="Symbol">=</a> <a id="4109" href="Data.Reflection.Term.html#2352" class="InductiveConstructor">con₀</a>

  <a id="Has-def-Term"></a><a id="4117" href="Meta.Reflection.Signature.html#4117" class="Function">Has-def-Term</a> <a id="4130" class="Symbol">:</a> <a id="4132" href="Meta.Reflection.Signature.html#3856" class="Record">Has-def</a> <a id="4140" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="4147" href="Meta.Reflection.Signature.html#4117" class="Function">Has-def-Term</a> <a id="4160" class="Symbol">.</a><a id="4161" href="Meta.Reflection.Signature.html#3904" class="Field">Has-def.from-def</a> <a id="4178" class="Symbol">=</a> <a id="4180" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a>

  <a id="Has-constr-Name"></a><a id="4188" href="Meta.Reflection.Signature.html#4188" class="Function">Has-constr-Name</a> <a id="4204" class="Symbol">:</a> <a id="4206" href="Meta.Reflection.Signature.html#3774" class="Record">Has-constr</a> <a id="4217" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>
  <a id="4224" href="Meta.Reflection.Signature.html#4188" class="Function">Has-constr-Name</a> <a id="4240" class="Symbol">.</a><a id="4241" href="Meta.Reflection.Signature.html#3825" class="Field">Has-constr.from-constr</a> <a id="4264" class="Symbol">=</a> <a id="4266" href="Foundations.Pi.Base.html#1289" class="Function">id</a>

  <a id="Has-def-Name"></a><a id="4272" href="Meta.Reflection.Signature.html#4272" class="Function">Has-def-Name</a> <a id="4285" class="Symbol">:</a> <a id="4287" href="Meta.Reflection.Signature.html#3856" class="Record">Has-def</a> <a id="4295" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>
  <a id="4302" href="Meta.Reflection.Signature.html#4272" class="Function">Has-def-Name</a> <a id="4315" class="Symbol">.</a><a id="4316" href="Meta.Reflection.Signature.html#3904" class="Field">Has-def.from-def</a> <a id="4333" class="Symbol">=</a> <a id="4335" href="Foundations.Pi.Base.html#1289" class="Function">id</a>

<a id="4339" class="Keyword">private</a>
  <a id="it-worker"></a><a id="4349" href="Meta.Reflection.Signature.html#4349" class="Function">it-worker</a> <a id="4359" class="Symbol">:</a> <a id="4361" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="4366" class="Symbol">→</a> <a id="4368" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="4371" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="4378" href="Meta.Reflection.Signature.html#4349" class="Function">it-worker</a> <a id="4388" href="Meta.Reflection.Signature.html#4388" class="Bound">n</a> <a id="4390" class="Symbol">=</a> <a id="4392" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="4407" href="Meta.Reflection.Signature.html#4388" class="Bound">n</a> <a id="4409" href="Meta.Effect.Map.html#604" class="Function Operator">&lt;&amp;&gt;</a> <a id="4413" class="Symbol">λ</a> <a id="4415" class="Keyword">where</a>
    <a id="4425" class="Symbol">(</a><a id="4426" href="Agda.Builtin.Reflection.html#7680" class="InductiveConstructor">data-cons</a> <a id="4436" class="Symbol">_)</a> <a id="4439" class="Symbol">→</a>
      <a id="4447" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="4452" class="Symbol">(</a><a id="4453" class="Keyword">quote</a> <a id="4459" href="Meta.Reflection.Signature.html#3825" class="Field">Has-constr.from-constr</a><a id="4481" class="Symbol">)</a> <a id="4483" href="Meta.Reflection.Neutral.html#1209" class="Function Operator">##ₙ</a> <a id="4487" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="4492" class="Symbol">(</a><a id="4493" class="Keyword">quote</a> <a id="4499" href="Foundations.Base.html#19844" class="Function">auto</a><a id="4503" class="Symbol">)</a> <a id="4505" href="Meta.Reflection.Neutral.html#1209" class="Function Operator">##ₙ</a> <a id="4509" href="Agda.Builtin.Reflection.html#5509" class="InductiveConstructor">lit</a> <a id="4513" class="Symbol">(</a><a id="4514" href="Agda.Builtin.Reflection.html#4589" class="InductiveConstructor">name</a> <a id="4519" href="Meta.Reflection.Signature.html#4388" class="Bound">n</a><a id="4520" class="Symbol">)</a>
    <a id="4526" class="CatchallClause Symbol">_</a> <a id="4528" class="Symbol">→</a>
      <a id="4536" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="4541" class="Symbol">(</a><a id="4542" class="Keyword">quote</a> <a id="4548" href="Meta.Reflection.Signature.html#3904" class="Field">Has-def.from-def</a><a id="4564" class="Symbol">)</a> <a id="4566" href="Meta.Reflection.Neutral.html#1209" class="Function Operator">##ₙ</a> <a id="4570" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="4575" class="Symbol">(</a><a id="4576" class="Keyword">quote</a> <a id="4582" href="Foundations.Base.html#19844" class="Function">auto</a><a id="4586" class="Symbol">)</a> <a id="4588" href="Meta.Reflection.Neutral.html#1209" class="Function Operator">##ₙ</a> <a id="4592" href="Agda.Builtin.Reflection.html#5509" class="InductiveConstructor">lit</a> <a id="4596" class="Symbol">(</a><a id="4597" href="Agda.Builtin.Reflection.html#4589" class="InductiveConstructor">name</a> <a id="4602" href="Meta.Reflection.Signature.html#4388" class="Bound">n</a><a id="4603" class="Symbol">)</a>

<a id="4606" class="Keyword">macro</a>
  <a id="4614" class="Comment">-- Macro which turns a Name into its quoted Term/Pattern</a>
  <a id="4673" class="Comment">-- representation.</a>
  <a id="4694" class="Comment">--</a>
  <a id="4699" class="Comment">-- If the Name refers to a constructor, it&#39;s wrapped in con₀,</a>
  <a id="4763" class="Comment">-- otherwise, it&#39;s wrapped in def₀.</a>
  <a id="4801" class="Comment">--</a>
  <a id="4806" class="Comment">-- Since `it` is a macro, you can use this as `it Foo` rather than</a>
  <a id="4875" class="Comment">-- `def₀ (quote Foo)`.</a>
  <a id="it"></a><a id="4900" href="Meta.Reflection.Signature.html#4900" class="Function">it</a> <a id="4903" class="Symbol">:</a> <a id="4905" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="4910" class="Symbol">→</a> <a id="4912" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="4917" class="Symbol">→</a> <a id="4919" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="4922" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="4926" href="Meta.Reflection.Signature.html#4900" class="Function">it</a> <a id="4929" href="Meta.Reflection.Signature.html#4929" class="Bound">n</a> <a id="4931" href="Meta.Reflection.Signature.html#4931" class="Bound">g</a> <a id="4933" class="Symbol">=</a> <a id="4935" href="Agda.Builtin.Reflection.html#8775" class="Postulate">unify</a> <a id="4941" href="Meta.Reflection.Signature.html#4931" class="Bound">g</a> <a id="4943" href="Meta.Effect.Bind.html#427" class="Function Operator">=&lt;&lt;</a> <a id="4947" href="Meta.Reflection.Signature.html#4349" class="Function">it-worker</a> <a id="4957" href="Meta.Reflection.Signature.html#4929" class="Bound">n</a>

<a id="4960" href="Meta.Reflection.Signature.html#4960" class="Function">_</a> <a id="4962" class="Symbol">:</a> <a id="4964" href="Foundations.Prim.Kan.html#1388" class="Function">Path</a> <a id="4969" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="4974" class="Symbol">(</a><a id="4975" href="Meta.Reflection.Signature.html#4900" class="Macro">it</a> <a id="4978" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="4979" class="Symbol">)</a> <a id="4981" class="Symbol">(</a><a id="4982" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="4986" class="Symbol">(</a><a id="4987" class="Keyword">quote</a> <a id="4993" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="4994" class="Symbol">)</a> <a id="4996" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="4998" class="Symbol">)</a>
<a id="5000" class="Symbol">_</a> <a id="5002" class="Symbol">=</a> <a id="5004" href="Foundations.Prim.Kan.html#1465" class="Function">refl</a>

<a id="5010" class="Keyword">macro</a>
  <a id="5018" class="Comment">-- Macro which turns a *record name* into the quoted representation of</a>
  <a id="5091" class="Comment">-- its *constructor*, e.g. `constructor Σ` is `con₀ (quote _,_)`.</a>
  <a id="`constructor"></a><a id="5159" href="Meta.Reflection.Signature.html#5159" class="Function">`constructor</a> <a id="5172" class="Symbol">:</a> <a id="5174" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5179" class="Symbol">→</a> <a id="5181" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5186" class="Symbol">→</a> <a id="5188" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="5191" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="5195" href="Meta.Reflection.Signature.html#5159" class="Function">`constructor</a> <a id="5208" href="Meta.Reflection.Signature.html#5208" class="Bound">n</a> <a id="5210" href="Meta.Reflection.Signature.html#5210" class="Bound">g</a> <a id="5212" class="Symbol">=</a> <a id="5214" class="Keyword">do</a>
    <a id="5221" class="Symbol">(</a><a id="5222" href="Meta.Reflection.Signature.html#5222" class="Bound">c</a> <a id="5224" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5226" class="Symbol">_)</a> <a id="5229" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="5231" href="Meta.Reflection.Signature.html#1426" class="Function">get-record-type</a> <a id="5247" href="Meta.Reflection.Signature.html#5208" class="Bound">n</a>
    <a id="5253" href="Agda.Builtin.Reflection.html#8775" class="Postulate">unify</a> <a id="5259" href="Meta.Reflection.Signature.html#5210" class="Bound">g</a> <a id="5261" class="Symbol">(</a><a id="5262" href="Meta.Reflection.Signature.html#4900" class="Macro">it</a> <a id="5265" href="Meta.Reflection.Signature.html#3825" class="Field">Has-constr.from-constr</a> <a id="5288" href="Meta.Reflection.Neutral.html#1209" class="Function Operator">##ₙ</a> <a id="5292" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="5297" class="Symbol">(</a><a id="5298" class="Keyword">quote</a> <a id="5304" href="Foundations.Base.html#19844" class="Function">auto</a><a id="5308" class="Symbol">)</a> <a id="5310" href="Meta.Reflection.Neutral.html#1209" class="Function Operator">##ₙ</a> <a id="5314" href="Agda.Builtin.Reflection.html#5509" class="InductiveConstructor">lit</a> <a id="5318" class="Symbol">(</a><a id="5319" href="Agda.Builtin.Reflection.html#4589" class="InductiveConstructor">name</a> <a id="5324" href="Meta.Reflection.Signature.html#5222" class="Bound">c</a><a id="5325" class="Symbol">))</a>

<a id="5329" href="Meta.Reflection.Signature.html#5329" class="Function">_</a> <a id="5331" class="Symbol">:</a> <a id="5333" href="Foundations.Prim.Kan.html#1388" class="Function">Path</a> <a id="5338" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5343" class="Symbol">(</a><a id="5344" href="Meta.Reflection.Signature.html#5159" class="Macro">`constructor</a> <a id="5357" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="5358" class="Symbol">)</a> <a id="5360" class="Symbol">(</a><a id="5361" href="Data.Reflection.Term.html#2352" class="InductiveConstructor">con₀</a> <a id="5366" class="Symbol">(</a><a id="5367" class="Keyword">quote</a> <a id="5373" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="5376" class="Symbol">))</a>
<a id="5379" class="Symbol">_</a> <a id="5381" class="Symbol">=</a> <a id="5383" href="Foundations.Prim.Kan.html#1465" class="Function">refl</a>

<a id="5389" class="Keyword">macro</a>
  <a id="5397" class="Comment">-- Like &#39;it&#39;, but the quoted representation is additionally wrapped in</a>
  <a id="5470" class="Comment">-- enough lambdas to apply the given definition to all of its visible</a>
  <a id="5542" class="Comment">-- arguments.</a>
  <a id="itₙ"></a><a id="5558" href="Meta.Reflection.Signature.html#5558" class="Function">itₙ</a> <a id="5562" class="Symbol">:</a> <a id="5564" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5569" class="Symbol">→</a> <a id="5571" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5576" class="Symbol">→</a> <a id="5578" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="5581" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="5585" href="Meta.Reflection.Signature.html#5558" class="Function">itₙ</a> <a id="5589" href="Meta.Reflection.Signature.html#5589" class="Bound">n</a> <a id="5591" href="Meta.Reflection.Signature.html#5591" class="Bound">g</a> <a id="5593" class="Symbol">=</a> <a id="5595" class="Keyword">do</a>
    <a id="5602" href="Meta.Reflection.Signature.html#5602" class="Bound">tm</a>   <a id="5607" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="5609" href="Meta.Reflection.Signature.html#4349" class="Function">it-worker</a> <a id="5619" href="Meta.Reflection.Signature.html#5589" class="Bound">n</a>
    <a id="5625" href="Meta.Reflection.Signature.html#5625" class="Bound">args</a> <a id="5630" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="5632" href="Meta.Reflection.Signature.html#3673" class="Function">get-argument-tele</a> <a id="5650" href="Meta.Reflection.Signature.html#5589" class="Bound">n</a>
    <a id="5656" class="Keyword">let</a>
      <a id="5666" href="Meta.Reflection.Signature.html#5666" class="Bound">args</a> <a id="5671" class="Symbol">=</a> <a id="5673" href="Data.List.Operations.html#980" class="Function">filter</a> <a id="5680" class="Symbol">(λ</a> <a id="5683" class="Symbol">{</a> <a id="5685" class="Symbol">(_</a> <a id="5688" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5690" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="5694" class="Symbol">(</a><a id="5695" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="5704" href="Agda.Builtin.Reflection.html#2762" class="InductiveConstructor">visible</a> <a id="5712" class="Symbol">_)</a> <a id="5715" class="Symbol">_)</a> <a id="5718" class="Symbol">→</a> <a id="5720" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="5725" class="Symbol">;</a> <a id="5727" class="CatchallClause Symbol">_</a> <a id="5729" class="Symbol">→</a> <a id="5731" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="5737" class="Symbol">})</a> <a id="5740" href="Meta.Reflection.Signature.html#5625" class="Bound">args</a>

      <a id="5752" href="Meta.Reflection.Signature.html#5752" class="Bound">tm</a> <a id="5755" class="Symbol">=</a> <a id="5757" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="5761" class="Symbol">(</a><a id="5762" class="Keyword">quote</a> <a id="5768" href="Meta.Reflection.Neutral.html#762" class="Field">applyⁿᵉ</a><a id="5775" class="Symbol">)</a> <a id="5777" class="Symbol">(</a><a id="5778" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="5783" href="Meta.Reflection.Signature.html#5602" class="Bound">tm</a> <a id="5786" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5788" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="5793" class="Symbol">(</a><a id="5794" href="Data.Reflection.Term.html#2031" class="Function">list-term</a> <a id="5804" class="Symbol">(</a><a id="5805" href="Data.List.Base.html#849" class="Function">reverse</a> <a id="5813" class="Symbol">(</a><a id="5814" href="Data.List.Operations.html#2650" class="Function">map-up</a> <a id="5821" class="Symbol">(λ</a> <a id="5824" href="Meta.Reflection.Signature.html#5824" class="Bound">i</a> <a id="5826" href="Meta.Reflection.Signature.html#5826" class="Bound">_</a> <a id="5828" class="Symbol">→</a> <a id="5830" href="Meta.Reflection.Signature.html#4900" class="Macro">it</a> <a id="5833" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="5838" href="Meta.Reflection.Neutral.html#1209" class="Function Operator">##ₙ</a> <a id="5842" href="Data.Reflection.Term.html#2404" class="InductiveConstructor">var₀</a> <a id="5847" href="Meta.Reflection.Signature.html#5824" class="Bound">i</a><a id="5848" class="Symbol">)</a> <a id="5850" class="Number">0</a> <a id="5852" href="Meta.Reflection.Signature.html#5666" class="Bound">args</a><a id="5856" class="Symbol">)))</a> <a id="5860" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5862" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5864" class="Symbol">)</a>
      <a id="5872" href="Meta.Reflection.Signature.html#5872" class="Bound">tm</a> <a id="5875" class="Symbol">=</a> <a id="5877" href="Meta.Effect.Foldable.html#270" class="Field">fold-r</a> <a id="5884" class="Symbol">(λ</a> <a id="5887" href="Meta.Reflection.Signature.html#5887" class="Bound">_</a> <a id="5889" href="Meta.Reflection.Signature.html#5889" class="Bound">y</a> <a id="5891" class="Symbol">→</a> <a id="5893" href="Agda.Builtin.Reflection.html#5308" class="InductiveConstructor">lam</a> <a id="5897" href="Agda.Builtin.Reflection.html#2762" class="InductiveConstructor">visible</a> <a id="5905" class="Symbol">(</a><a id="5906" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="5910" class="String">&quot;_&quot;</a> <a id="5914" href="Meta.Reflection.Signature.html#5889" class="Bound">y</a><a id="5915" class="Symbol">))</a> <a id="5918" href="Meta.Reflection.Signature.html#5752" class="Bound">tm</a> <a id="5921" href="Meta.Reflection.Signature.html#5666" class="Bound">args</a>

      <a id="5933" href="Meta.Reflection.Signature.html#5933" class="Bound">ty</a> <a id="5936" class="Symbol">=</a> <a id="5938" href="Meta.Effect.Foldable.html#270" class="Field">fold-r</a> <a id="5945" class="Symbol">(λ</a> <a id="5948" href="Meta.Reflection.Signature.html#5948" class="Bound">_</a> <a id="5950" href="Meta.Reflection.Signature.html#5950" class="Bound">y</a> <a id="5952" class="Symbol">→</a> <a id="5954" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="5958" class="Symbol">(</a><a id="5959" class="Keyword">quote</a> <a id="5965" href="Meta.Reflection.Base.html#3149" class="Function">Fun</a><a id="5968" class="Symbol">)</a> <a id="5970" class="Symbol">(</a><a id="5971" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="5976" class="Symbol">(</a><a id="5977" href="Meta.Reflection.Signature.html#4900" class="Macro">it</a> <a id="5980" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="5984" class="Symbol">)</a> <a id="5986" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5988" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="5993" href="Meta.Reflection.Signature.html#5950" class="Bound">y</a> <a id="5995" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5997" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5999" class="Symbol">))</a> <a id="6002" class="Symbol">(</a><a id="6003" href="Meta.Reflection.Signature.html#4900" class="Macro">it</a> <a id="6006" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="6010" class="Symbol">)</a> <a id="6012" href="Meta.Reflection.Signature.html#5666" class="Bound">args</a>

    <a id="6022" href="Agda.Builtin.Reflection.html#8914" class="Postulate">check-type</a> <a id="6033" href="Meta.Reflection.Signature.html#5591" class="Bound">g</a> <a id="6035" href="Meta.Reflection.Signature.html#5933" class="Bound">ty</a>
    <a id="6042" href="Agda.Builtin.Reflection.html#8775" class="Postulate">unify</a> <a id="6048" href="Meta.Reflection.Signature.html#5591" class="Bound">g</a> <a id="6050" href="Meta.Reflection.Signature.html#5872" class="Bound">tm</a>

<a id="6054" href="Meta.Reflection.Signature.html#6054" class="Function">_</a> <a id="6056" class="Symbol">:</a> <a id="6058" href="Foundations.Prim.Kan.html#1388" class="Function">Path</a> <a id="6063" class="Symbol">(</a><a id="6064" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="6069" class="Symbol">→</a> <a id="6071" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="6076" class="Symbol">→</a> <a id="6078" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="6082" class="Symbol">)</a> <a id="6084" class="Symbol">(</a><a id="6085" href="Meta.Reflection.Signature.html#5558" class="Macro">itₙ</a> <a id="6089" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="6090" class="Symbol">)</a> <a id="6092" class="Symbol">(λ</a> <a id="6095" href="Meta.Reflection.Signature.html#6095" class="Bound">x</a> <a id="6097" href="Meta.Reflection.Signature.html#6097" class="Bound">y</a> <a id="6099" class="Symbol">→</a> <a id="6101" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="6105" class="Symbol">(</a><a id="6106" class="Keyword">quote</a> <a id="6112" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="6113" class="Symbol">)</a> <a id="6115" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="6117" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="6122" href="Meta.Reflection.Signature.html#6095" class="Bound">x</a> <a id="6124" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6126" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="6131" href="Meta.Reflection.Signature.html#6097" class="Bound">y</a> <a id="6133" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a><a id="6134" class="Symbol">)</a>
<a id="6136" class="Symbol">_</a> <a id="6138" class="Symbol">=</a> <a id="6140" href="Foundations.Prim.Kan.html#1465" class="Function">refl</a>

<a id="6146" class="Comment">-- Check whether a name is defined.</a>
<a id="is-defined"></a><a id="6182" href="Meta.Reflection.Signature.html#6182" class="Function">is-defined</a> <a id="6193" class="Symbol">:</a> <a id="6195" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6200" class="Symbol">→</a> <a id="6202" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="6205" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="6210" href="Meta.Reflection.Signature.html#6182" class="Function">is-defined</a> <a id="6221" href="Meta.Reflection.Signature.html#6221" class="Bound">nm</a> <a id="6224" class="Symbol">=</a> <a id="6226" class="Symbol">(</a><a id="6227" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="6232" href="Meta.Effect.Map.html#549" class="Function Operator">&lt;$</a> <a id="6235" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="6244" href="Meta.Reflection.Signature.html#6221" class="Bound">nm</a><a id="6246" class="Symbol">)</a> <a id="6248" href="Meta.Effect.Alt.html#320" class="Field Operator">&lt;|&gt;</a> <a id="6252" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="6257" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>

<a id="6264" class="Comment">-- Render a defined name as it would appear in the current scope.</a>
<a id="6330" class="Comment">--</a>
<a id="6333" class="Comment">-- This will be the &quot;least qualified&quot; possible concrete representation</a>
<a id="6404" class="Comment">-- for the given name, if one is available.</a>
<a id="6448" class="Comment">--</a>
<a id="6451" class="Comment">-- If the name is not defined, return the shown representation, which is</a>
<a id="6524" class="Comment">-- fully qualified.</a>
<a id="render-name"></a><a id="6544" href="Meta.Reflection.Signature.html#6544" class="Function">render-name</a> <a id="6556" class="Symbol">:</a> <a id="6558" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6563" class="Symbol">→</a> <a id="6565" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="6568" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
<a id="6575" href="Meta.Reflection.Signature.html#6544" class="Function">render-name</a> <a id="6587" href="Meta.Reflection.Signature.html#6587" class="Bound">def-nm</a> <a id="6594" class="Symbol">=</a> <a id="6596" class="Keyword">do</a>
  <a id="6601" href="Meta.Reflection.Signature.html#6601" class="Bound">d</a> <a id="6603" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="6605" href="Meta.Reflection.Signature.html#6182" class="Function">is-defined</a> <a id="6616" href="Meta.Reflection.Signature.html#6587" class="Bound">def-nm</a>
  <a id="6625" class="Keyword">let</a>
    <a id="6633" href="Meta.Reflection.Signature.html#6633" class="Bound">fancy</a> <a id="6639" class="Symbol">=</a> <a id="6641" href="Agda.Builtin.Reflection.html#9732" class="Postulate">get-definition</a> <a id="6656" href="Meta.Reflection.Signature.html#6587" class="Bound">def-nm</a> <a id="6663" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="6667" class="Symbol">λ</a> <a id="6669" class="Keyword">where</a>
      <a id="6681" class="Symbol">(</a><a id="6682" href="Agda.Builtin.Reflection.html#7680" class="InductiveConstructor">data-cons</a> <a id="6692" class="Symbol">_)</a> <a id="6695" class="Symbol">→</a> <a id="6697" href="Agda.Builtin.Reflection.html#10895" class="Postulate">format-error-parts</a> <a id="6716" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="6718" href="Data.Reflection.Error.html#191" class="InductiveConstructor">term-err</a> <a id="6727" class="Symbol">(</a><a id="6728" href="Data.Reflection.Term.html#2352" class="InductiveConstructor">con₀</a> <a id="6733" href="Meta.Reflection.Signature.html#6587" class="Bound">def-nm</a><a id="6739" class="Symbol">)</a> <a id="6741" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>
      <a id="6749" class="CatchallClause Symbol">_</a>             <a id="6763" class="Symbol">→</a> <a id="6765" href="Agda.Builtin.Reflection.html#10895" class="Postulate">format-error-parts</a> <a id="6784" href="Meta.Literals.FromProduct.html#385" class="Function Operator">[</a> <a id="6786" href="Data.Reflection.Error.html#191" class="InductiveConstructor">term-err</a> <a id="6795" class="Symbol">(</a><a id="6796" href="Data.Reflection.Term.html#2378" class="InductiveConstructor">def₀</a> <a id="6801" href="Meta.Reflection.Signature.html#6587" class="Bound">def-nm</a><a id="6807" class="Symbol">)</a> <a id="6809" href="Meta.Literals.FromProduct.html#385" class="Function Operator">]</a>
    <a id="6815" href="Meta.Reflection.Signature.html#6815" class="Bound">plain</a> <a id="6821" class="Symbol">=</a> <a id="6823" href="Meta.Show.html#828" class="Field">show</a> <a id="6828" href="Meta.Reflection.Signature.html#6587" class="Bound">def-nm</a>
  <a id="6837" href="Data.Bool.Base.html#861" class="Function Operator">if</a> <a id="6840" href="Meta.Reflection.Signature.html#6601" class="Bound">d</a> <a id="6842" href="Data.Bool.Base.html#861" class="Function Operator">then</a> <a id="6847" href="Meta.Reflection.Signature.html#6633" class="Bound">fancy</a> <a id="6853" href="Data.Bool.Base.html#861" class="Function Operator">else</a> <a id="6858" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="6863" href="Meta.Reflection.Signature.html#6815" class="Bound">plain</a>

<a id="6870" class="Comment">-- Generate a fresh name for a &quot;helper function&quot; to the given</a>
<a id="6932" class="Comment">-- definition.</a>
<a id="6947" class="Comment">-- Example: `helper-function-name (quote f) &quot;foo&quot;` will be `quote</a>
<a id="7013" class="Comment">-- f·foo`.</a>
<a id="helper-function-name"></a><a id="7024" href="Meta.Reflection.Signature.html#7024" class="Function">helper-function-name</a> <a id="7045" class="Symbol">:</a> <a id="7047" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="7052" class="Symbol">→</a> <a id="7054" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7061" class="Symbol">→</a> <a id="7063" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="7066" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>
<a id="7071" href="Meta.Reflection.Signature.html#7024" class="Function">helper-function-name</a> <a id="7092" href="Meta.Reflection.Signature.html#7092" class="Bound">def-nm</a> <a id="7099" href="Meta.Reflection.Signature.html#7099" class="Bound">suf</a> <a id="7103" class="Symbol">=</a> <a id="7105" class="Keyword">do</a>
  <a id="7110" href="Meta.Reflection.Signature.html#7110" class="Bound">t</a> <a id="7112" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="7114" href="Meta.Reflection.Signature.html#6544" class="Function">render-name</a> <a id="7126" href="Meta.Reflection.Signature.html#7092" class="Bound">def-nm</a>
  <a id="7135" href="Agda.Builtin.Reflection.html#9415" class="Postulate">fresh-name</a> <a id="7146" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="7148" href="Meta.Reflection.Signature.html#7110" class="Bound">t</a> <a id="7150" href="Meta.Append.html#188" class="Field Operator">&lt;&gt;</a> <a id="7153" class="String">&quot;·&quot;</a> <a id="7157" href="Meta.Append.html#188" class="Field Operator">&lt;&gt;</a> <a id="7160" href="Meta.Reflection.Signature.html#7099" class="Bound">suf</a>

<a id="7165" class="Comment">-- Declare and optionally define a helper function for the given</a>
<a id="7230" class="Comment">-- definition; returns the generated name.</a>
<a id="7273" class="Comment">--</a>
<a id="7276" class="Comment">-- The helper is always defined with default visibility.</a>
<a id="7333" class="Comment">--</a>
<a id="7336" class="Comment">-- If the list of clauses is empty, the function will not be declared,</a>
<a id="7407" class="Comment">-- so it can be filled in later. This supports generating</a>
<a id="7465" class="Comment">-- mutually-recursive helpers.</a>
<a id="helper-function"></a><a id="7496" href="Meta.Reflection.Signature.html#7496" class="Function">helper-function</a> <a id="7512" class="Symbol">:</a> <a id="7514" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="7519" class="Symbol">→</a> <a id="7521" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="7528" class="Symbol">→</a> <a id="7530" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="7535" class="Symbol">→</a> <a id="7537" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7542" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a> <a id="7549" class="Symbol">→</a> <a id="7551" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="7554" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a>
<a id="7559" href="Meta.Reflection.Signature.html#7496" class="Function">helper-function</a> <a id="7575" href="Meta.Reflection.Signature.html#7575" class="Bound">def-nm</a> <a id="7582" href="Meta.Reflection.Signature.html#7582" class="Bound">suf</a> <a id="7586" href="Meta.Reflection.Signature.html#7586" class="Bound">ty</a> <a id="7589" href="Meta.Reflection.Signature.html#7589" class="Bound">cls</a> <a id="7593" class="Symbol">=</a> <a id="7595" class="Keyword">do</a>
  <a id="7600" href="Meta.Reflection.Signature.html#7600" class="Bound">nm</a> <a id="7603" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="7605" href="Meta.Reflection.Signature.html#7024" class="Function">helper-function-name</a> <a id="7626" href="Meta.Reflection.Signature.html#7575" class="Bound">def-nm</a> <a id="7633" href="Meta.Reflection.Signature.html#7582" class="Bound">suf</a>
  <a id="7639" href="Agda.Builtin.Reflection.html#9453" class="Postulate">declare-def</a> <a id="7651" class="Symbol">(</a><a id="7652" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="7657" href="Meta.Reflection.Signature.html#7600" class="Bound">nm</a><a id="7659" class="Symbol">)</a> <a id="7661" href="Meta.Reflection.Signature.html#7586" class="Bound">ty</a>
  <a id="7666" href="Foundations.Pi.Base.html#2167" class="Function Operator">case</a> <a id="7671" href="Meta.Reflection.Signature.html#7589" class="Bound">cls</a> <a id="7675" href="Foundations.Pi.Base.html#2167" class="Function Operator">of</a> <a id="7678" class="Symbol">λ</a> <a id="7680" class="Keyword">where</a>
    <a id="7690" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="7693" class="Symbol">→</a> <a id="7695" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="7700" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
    <a id="7707" class="CatchallClause Symbol">_</a>  <a id="7710" class="Symbol">→</a> <a id="7712" href="Agda.Builtin.Reflection.html#9649" class="Postulate">define-function</a> <a id="7728" href="Meta.Reflection.Signature.html#7600" class="Bound">nm</a> <a id="7731" href="Meta.Reflection.Signature.html#7589" class="Bound">cls</a>
  <a id="7737" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="7742" href="Meta.Reflection.Signature.html#7600" class="Bound">nm</a>

<a id="7746" class="Keyword">private</a>
  <a id="make-args"></a><a id="7756" href="Meta.Reflection.Signature.html#7756" class="Function">make-args</a> <a id="7766" class="Symbol">:</a> <a id="7768" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="7770" class="Symbol">→</a> <a id="7772" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7777" class="Symbol">(</a><a id="7778" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="7782" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="7783" class="Symbol">)</a> <a id="7785" class="Symbol">→</a> <a id="7787" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7792" class="Symbol">(</a><a id="7793" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="7797" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="7801" class="Symbol">)</a>
  <a id="7805" href="Meta.Reflection.Signature.html#7756" class="Function">make-args</a> <a id="7815" href="Meta.Reflection.Signature.html#7815" class="Bound">n</a> <a id="7817" href="Meta.Reflection.Signature.html#7817" class="Bound">xs</a> <a id="7820" class="Symbol">=</a> <a id="7822" href="Data.List.Base.html#938" class="Function">reverse-fast</a> <a id="7835" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="7837" href="Meta.Effect.Map.html#344" class="Field">map</a> <a id="7841" class="Symbol">(</a><a id="7842" href="Meta.Effect.Map.html#344" class="Field">map</a> <a id="7846" class="Symbol">(λ</a> <a id="7849" href="Meta.Reflection.Signature.html#7849" class="Bound">i</a> <a id="7851" class="Symbol">→</a> <a id="7853" href="Data.Reflection.Term.html#2404" class="InductiveConstructor">var₀</a> <a id="7858" class="Symbol">(</a><a id="7859" href="Meta.Reflection.Signature.html#7815" class="Bound">n</a> <a id="7861" href="Data.Nat.Base.html#320" class="Primitive Operator">∸</a> <a id="7863" href="Meta.Reflection.Signature.html#7849" class="Bound">i</a> <a id="7865" href="Data.Nat.Base.html#320" class="Primitive Operator">∸</a> <a id="7867" class="Number">1</a><a id="7868" class="Symbol">)))</a> <a id="7872" href="Meta.Reflection.Signature.html#7817" class="Bound">xs</a>

  <a id="class-for-param"></a><a id="7878" href="Meta.Reflection.Signature.html#7878" class="Function">class-for-param</a> <a id="7894" class="Symbol">:</a> <a id="7896" class="Symbol">(</a><a id="7897" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="7901" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="7906" class="Symbol">→</a> <a id="7908" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="7912" class="Symbol">)</a> <a id="7914" class="Symbol">→</a> <a id="7916" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="7918" class="Symbol">→</a> <a id="7920" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7925" class="Symbol">(</a><a id="7926" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="7930" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="7931" class="Symbol">)</a> <a id="7933" class="Symbol">→</a> <a id="7935" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="7940" class="Symbol">→</a> <a id="7942" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="7948" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="7955" href="Meta.Reflection.Signature.html#7878" class="Function">class-for-param</a> <a id="7971" href="Meta.Reflection.Signature.html#7971" class="Bound">class</a> <a id="7977" href="Meta.Reflection.Signature.html#7977" class="Bound">n</a> <a id="7979" href="Meta.Reflection.Signature.html#7979" class="Bound">xs</a> <a id="7982" class="Symbol">(</a><a id="7983" href="Agda.Builtin.Reflection.html#5477" class="InductiveConstructor">agda-sort</a> <a id="7993" class="Symbol">_)</a> <a id="7996" class="Symbol">=</a>
    <a id="8002" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8007" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="8009" href="Meta.Reflection.Signature.html#7971" class="Bound">class</a> <a id="8015" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="8017" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="8022" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="8024" href="Agda.Builtin.Reflection.html#5138" class="InductiveConstructor">var</a> <a id="8028" href="Meta.Reflection.Signature.html#7977" class="Bound">n</a> <a id="8030" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="8032" href="Meta.Reflection.Signature.html#7756" class="Function">make-args</a> <a id="8042" href="Meta.Reflection.Signature.html#7977" class="Bound">n</a> <a id="8044" href="Meta.Reflection.Signature.html#7979" class="Bound">xs</a>
  <a id="8049" href="Meta.Reflection.Signature.html#7878" class="Function">class-for-param</a> <a id="8065" href="Meta.Reflection.Signature.html#8065" class="Bound">class</a> <a id="8071" href="Meta.Reflection.Signature.html#8071" class="Bound">n</a> <a id="8073" href="Meta.Reflection.Signature.html#8073" class="Bound">xs</a> <a id="8076" class="Symbol">(</a><a id="8077" href="Agda.Builtin.Reflection.html#5426" class="InductiveConstructor">pi</a> <a id="8080" href="Meta.Reflection.Signature.html#8080" class="Bound">a</a> <a id="8082" class="Symbol">(</a><a id="8083" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="8087" href="Meta.Reflection.Signature.html#8087" class="Bound">s</a> <a id="8089" href="Meta.Reflection.Signature.html#8089" class="Bound">b</a><a id="8090" class="Symbol">))</a> <a id="8093" class="Symbol">=</a>
    <a id="8099" href="Agda.Builtin.Reflection.html#5426" class="InductiveConstructor">pi</a> <a id="8102" class="Symbol">(</a><a id="8103" href="Data.Reflection.Argument.html#1563" class="Function">argH</a> <a id="8108" class="Symbol">(</a><a id="8109" href="Data.Reflection.Argument.html#1151" class="Function">unarg</a> <a id="8115" href="Meta.Reflection.Signature.html#8080" class="Bound">a</a><a id="8116" class="Symbol">))</a> <a id="8119" href="Foundations.Pi.Base.html#1761" class="Function Operator">∘</a> <a id="8121" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="8125" href="Meta.Reflection.Signature.html#8087" class="Bound">s</a> <a id="8127" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a>
     <a id="8136" href="Meta.Reflection.Signature.html#7878" class="Function">class-for-param</a> <a id="8152" href="Meta.Reflection.Signature.html#8065" class="Bound">class</a> <a id="8158" class="Symbol">(</a><a id="8159" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="8163" href="Meta.Reflection.Signature.html#8071" class="Bound">n</a><a id="8164" class="Symbol">)</a> <a id="8166" class="Symbol">(</a><a id="8167" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="8171" class="Symbol">(</a><a id="8172" href="Data.Reflection.Argument.html#1107" class="Function">unai</a> <a id="8177" href="Meta.Reflection.Signature.html#8080" class="Bound">a</a><a id="8178" class="Symbol">)</a> <a id="8180" href="Meta.Reflection.Signature.html#8071" class="Bound">n</a> <a id="8182" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8184" href="Meta.Reflection.Signature.html#8073" class="Bound">xs</a><a id="8186" class="Symbol">)</a> <a id="8188" href="Meta.Reflection.Signature.html#8089" class="Bound">b</a>
  <a id="8192" href="Meta.Reflection.Signature.html#7878" class="CatchallClause Function">class-for-param</a><a id="8207" class="CatchallClause"> </a><a id="8208" class="CatchallClause Symbol">_</a><a id="8209" class="CatchallClause"> </a><a id="8210" class="CatchallClause Symbol">_</a><a id="8211" class="CatchallClause"> </a><a id="8212" class="CatchallClause Symbol">_</a><a id="8213" class="CatchallClause"> </a><a id="8214" class="CatchallClause Symbol">_</a> <a id="8216" class="Symbol">=</a> <a id="8218" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

  <a id="compute-telescope"></a><a id="8229" href="Meta.Reflection.Signature.html#8229" class="Function">compute-telescope</a> <a id="8247" class="Symbol">:</a> <a id="8249" class="Symbol">(</a><a id="8250" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="8254" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="8259" class="Symbol">→</a> <a id="8261" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="8265" class="Symbol">)</a> <a id="8267" class="Symbol">→</a> <a id="8269" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="8271" class="Symbol">→</a> <a id="8273" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8278" class="Symbol">(</a><a id="8279" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="8283" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="8284" class="Symbol">)</a> <a id="8286" class="Symbol">→</a> <a id="8288" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="8298" class="Symbol">→</a> <a id="8300" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="8310" class="Symbol">→</a> <a id="8312" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="8322" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="8324" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8329" class="Symbol">(</a><a id="8330" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="8334" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="8338" class="Symbol">)</a>
  <a id="8342" href="Meta.Reflection.Signature.html#8229" class="Function">compute-telescope</a> <a id="8360" href="Meta.Reflection.Signature.html#8360" class="Bound">d</a> <a id="8362" href="Meta.Reflection.Signature.html#8362" class="Bound">n</a> <a id="8364" href="Meta.Reflection.Signature.html#8364" class="Bound">xs</a> <a id="8367" href="Meta.Reflection.Signature.html#8367" class="Bound">is</a> <a id="8370" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="8373" class="Symbol">=</a> <a id="8375" href="Data.List.Base.html#849" class="Function">reverse</a> <a id="8383" href="Meta.Reflection.Signature.html#8367" class="Bound">is</a> <a id="8386" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8388" href="Meta.Reflection.Signature.html#7756" class="Function">make-args</a> <a id="8398" class="Symbol">(</a><a id="8399" href="Meta.Reflection.Signature.html#8362" class="Bound">n</a> <a id="8401" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="8403" href="Data.List.Operations.html#812" class="Function">length</a> <a id="8410" href="Meta.Reflection.Signature.html#8367" class="Bound">is</a><a id="8412" class="Symbol">)</a> <a id="8414" href="Meta.Reflection.Signature.html#8364" class="Bound">xs</a>
  <a id="8419" href="Meta.Reflection.Signature.html#8229" class="Function">compute-telescope</a> <a id="8437" href="Meta.Reflection.Signature.html#8437" class="Bound">d</a> <a id="8439" href="Meta.Reflection.Signature.html#8439" class="Bound">n</a> <a id="8441" href="Meta.Reflection.Signature.html#8441" class="Bound">xs</a> <a id="8444" href="Meta.Reflection.Signature.html#8444" class="Bound">is</a> <a id="8447" class="Symbol">((</a><a id="8449" href="Meta.Reflection.Signature.html#8449" class="Bound">x</a> <a id="8451" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8453" href="Meta.Reflection.Signature.html#8453" class="Bound">a</a><a id="8454" class="Symbol">)</a> <a id="8456" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8458" href="Meta.Reflection.Signature.html#8458" class="Bound">tel</a><a id="8461" class="Symbol">)</a> <a id="8463" class="Symbol">=</a>
    <a id="8469" class="Keyword">let</a>
      <a id="8479" href="Meta.Reflection.Signature.html#8479" class="Bound">narg</a> <a id="8484" class="Symbol">=</a> <a id="8486" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="8490" class="Symbol">(</a><a id="8491" href="Data.Reflection.Argument.html#1107" class="Function">unai</a> <a id="8496" href="Meta.Reflection.Signature.html#8453" class="Bound">a</a><a id="8497" class="Symbol">)</a> <a id="8499" href="Meta.Reflection.Signature.html#8439" class="Bound">n</a>
      <a id="8507" href="Meta.Reflection.Signature.html#8507" class="Bound">is′</a> <a id="8511" class="Symbol">=</a> <a id="8513" href="Meta.Effect.Traversable.html#293" class="Field">traverse</a> <a id="8522" class="Symbol">(λ</a> <a id="8525" class="Symbol">(</a><a id="8526" href="Meta.Reflection.Signature.html#8526" class="Bound">s</a> <a id="8528" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8530" href="Meta.Reflection.Signature.html#8530" class="Bound">t</a><a id="8531" class="Symbol">)</a> <a id="8533" class="Symbol">→</a> <a id="8535" href="Meta.Reflection.Subst.html#2171" class="Function">raise</a> <a id="8541" class="Number">1</a> <a id="8543" href="Meta.Reflection.Signature.html#8530" class="Bound">t</a> <a id="8545" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="8549" class="Symbol">λ</a> <a id="8551" href="Meta.Reflection.Signature.html#8551" class="Bound">x</a> <a id="8553" class="Symbol">→</a> <a id="8555" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="8560" class="Symbol">(</a><a id="8561" href="Meta.Reflection.Signature.html#8526" class="Bound">s</a> <a id="8563" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8565" href="Meta.Reflection.Signature.html#8551" class="Bound">x</a><a id="8566" class="Symbol">))</a> <a id="8569" href="Meta.Reflection.Signature.html#8444" class="Bound">is</a>
      <a id="8578" href="Meta.Reflection.Signature.html#8578" class="Bound">z</a> <a id="8580" class="Symbol">:</a> <a id="8582" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8588" class="Symbol">(</a><a id="8589" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="8599" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="8601" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8606" class="Symbol">(</a><a id="8607" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="8611" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="8615" class="Symbol">))</a>
      <a id="8624" href="Meta.Reflection.Signature.html#8578" class="Bound">z</a> <a id="8626" class="Symbol">=</a> <a id="8628" href="Foundations.Pi.Base.html#2167" class="Function Operator">case</a> <a id="8633" class="Symbol">(</a><a id="8634" href="Meta.Reflection.Subst.html#2171" class="Function">raise</a> <a id="8640" class="Number">1</a> <a id="8642" class="Symbol">(</a><a id="8643" href="Data.Reflection.Argument.html#1151" class="Function">unarg</a> <a id="8649" href="Meta.Reflection.Signature.html#8453" class="Bound">a</a><a id="8650" class="Symbol">)</a> <a id="8652" href="Meta.Effect.Bind.html#283" class="Field Operator">&gt;&gt;=</a> <a id="8656" href="Meta.Reflection.Signature.html#7878" class="Function">class-for-param</a> <a id="8672" href="Meta.Reflection.Signature.html#8437" class="Bound">d</a> <a id="8674" class="Number">0</a> <a id="8676" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="8678" class="Symbol">)</a> <a id="8680" href="Foundations.Pi.Base.html#2167" class="Function Operator">of</a> <a id="8683" class="Symbol">λ</a> <a id="8685" class="Keyword">where</a>
        <a id="8699" class="Symbol">(</a><a id="8700" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8705" href="Meta.Reflection.Signature.html#8705" class="Bound">i</a><a id="8706" class="Symbol">)</a> <a id="8708" class="Symbol">→</a> <a id="8710" class="Keyword">do</a>
          <a id="8723" href="Meta.Reflection.Signature.html#8723" class="Bound">is″</a> <a id="8727" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="8729" href="Meta.Reflection.Signature.html#8507" class="Bound">is′</a>
          <a id="8743" href="Meta.Reflection.Signature.html#8743" class="Bound">r</a> <a id="8745" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="8747" href="Meta.Reflection.Subst.html#2171" class="Function">raise</a> <a id="8753" class="Symbol">(</a><a id="8754" href="Data.List.Operations.html#812" class="Function">length</a> <a id="8761" href="Meta.Reflection.Signature.html#8444" class="Bound">is</a><a id="8763" class="Symbol">)</a> <a id="8765" href="Meta.Reflection.Signature.html#8705" class="Bound">i</a>
          <a id="8777" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="8782" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="8784" href="Meta.Reflection.Signature.html#8229" class="Function">compute-telescope</a> <a id="8802" href="Meta.Reflection.Signature.html#8437" class="Bound">d</a> <a id="8804" class="Symbol">(</a><a id="8805" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="8809" href="Meta.Reflection.Signature.html#8439" class="Bound">n</a><a id="8810" class="Symbol">)</a> <a id="8812" class="Symbol">(</a><a id="8813" href="Meta.Reflection.Signature.html#8479" class="Bound">narg</a> <a id="8818" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8820" href="Meta.Reflection.Signature.html#8441" class="Bound">xs</a><a id="8822" class="Symbol">)</a> <a id="8824" class="Symbol">((</a><a id="8826" href="Meta.Reflection.Signature.html#8449" class="Bound">x</a> <a id="8828" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8830" href="Data.Reflection.Argument.html#1568" class="Function">argI</a> <a id="8835" href="Meta.Reflection.Signature.html#8743" class="Bound">r</a><a id="8836" class="Symbol">)</a> <a id="8838" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8840" href="Meta.Reflection.Signature.html#8723" class="Bound">is″</a><a id="8843" class="Symbol">)</a> <a id="8845" href="Meta.Reflection.Signature.html#8458" class="Bound">tel</a>
        <a id="8857" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8865" class="Symbol">→</a> <a id="8867" class="Keyword">do</a>
          <a id="8880" href="Meta.Reflection.Signature.html#8880" class="Bound">is″</a> <a id="8884" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="8886" href="Meta.Reflection.Signature.html#8507" class="Bound">is′</a>
          <a id="8900" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="8905" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="8907" href="Meta.Reflection.Signature.html#8229" class="Function">compute-telescope</a> <a id="8925" href="Meta.Reflection.Signature.html#8437" class="Bound">d</a> <a id="8927" class="Symbol">(</a><a id="8928" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="8932" href="Meta.Reflection.Signature.html#8439" class="Bound">n</a><a id="8933" class="Symbol">)</a> <a id="8935" class="Symbol">(</a><a id="8936" href="Meta.Reflection.Signature.html#8479" class="Bound">narg</a> <a id="8941" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8943" href="Meta.Reflection.Signature.html#8441" class="Bound">xs</a><a id="8945" class="Symbol">)</a> <a id="8947" href="Meta.Reflection.Signature.html#8880" class="Bound">is″</a> <a id="8951" href="Meta.Reflection.Signature.html#8458" class="Bound">tel</a>
    <a id="8959" class="Keyword">in</a> <a id="8962" href="Foundations.Pi.Base.html#2167" class="Function Operator">case</a> <a id="8967" href="Meta.Reflection.Signature.html#8578" class="Bound">z</a> <a id="8969" href="Foundations.Pi.Base.html#2167" class="Function Operator">of</a> <a id="8972" class="Symbol">λ</a> <a id="8974" class="Keyword">where</a>
      <a id="8986" class="Symbol">(</a><a id="8987" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8992" class="Symbol">(</a><a id="8993" href="Meta.Reflection.Signature.html#8993" class="Bound">tele</a> <a id="8998" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9000" href="Meta.Reflection.Signature.html#9000" class="Bound">args</a><a id="9004" class="Symbol">))</a> <a id="9007" class="Symbol">→</a> <a id="9009" class="Symbol">(</a><a id="9010" href="Meta.Reflection.Signature.html#8449" class="Bound">x</a> <a id="9012" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9014" href="Data.Reflection.Argument.html#1563" class="Function">argH</a> <a id="9019" class="Symbol">(</a><a id="9020" href="Data.Reflection.Argument.html#1151" class="Function">unarg</a> <a id="9026" href="Meta.Reflection.Signature.html#8453" class="Bound">a</a><a id="9027" class="Symbol">))</a> <a id="9030" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9032" href="Meta.Reflection.Signature.html#8993" class="Bound">tele</a> <a id="9037" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9039" href="Meta.Reflection.Signature.html#9000" class="Bound">args</a>
      <a id="9050" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9058" class="Symbol">→</a> <a id="9060" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9063" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9065" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9068" class="Comment">-- ???</a>

<a id="9076" class="Comment">-- Given the name of a &quot;class&quot;, and the name of a &quot;data type&quot;, compute</a>
<a id="9147" class="Comment">-- the telescope, and arguments *of the data type*, for a &quot;derived</a>
<a id="9214" class="Comment">-- instance&quot; of that class. This is best demonstrated by example:</a>
<a id="9280" class="Comment">--</a>
<a id="9283" class="Comment">--   instance-telescope (quote Show) (quote Vec) =</a>
<a id="9334" class="Comment">--     ( {ℓ : Level} {A : Type ℓ} ⦃ _ : Show A ⦄ {n : Nat}</a>
<a id="9393" class="Comment">--     , [ ℓ , A , n ]</a>
<a id="9416" class="Comment">--     )</a>
<a id="9425" class="Comment">--</a>
<a id="9428" class="Comment">-- That is, all the parameters of the data type are bound invisibly, and</a>
<a id="9501" class="Comment">-- parameters that (end in) a type additionally have corresponding</a>
<a id="9568" class="Comment">-- instances of the class available.</a>
<a id="instance-telescope"></a><a id="9605" href="Meta.Reflection.Signature.html#9605" class="Function">instance-telescope</a> <a id="9624" class="Symbol">:</a> <a id="9626" class="Symbol">(</a><a id="9627" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="9631" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="9636" class="Symbol">→</a> <a id="9638" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="9642" class="Symbol">)</a> <a id="9644" class="Symbol">→</a> <a id="9646" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="9651" class="Symbol">→</a> <a id="9653" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="9656" class="Symbol">(</a><a id="9657" href="Data.Reflection.Term.html#800" class="Function">Telescope</a> <a id="9667" href="Foundations.Sigma.Base.html#621" class="Function Operator">×</a> <a id="9669" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9674" class="Symbol">(</a><a id="9675" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="9679" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="9683" class="Symbol">))</a>
<a id="9686" href="Meta.Reflection.Signature.html#9605" class="Function">instance-telescope</a> <a id="9705" href="Meta.Reflection.Signature.html#9705" class="Bound">class</a> <a id="9711" href="Meta.Reflection.Signature.html#9711" class="Bound">dat</a> <a id="9715" class="Symbol">=</a> <a id="9717" class="Keyword">do</a>
  <a id="9722" class="Symbol">(</a><a id="9723" href="Meta.Reflection.Signature.html#9723" class="Bound">tele</a> <a id="9728" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9730" class="Symbol">_)</a> <a id="9733" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="9735" href="Data.Reflection.Term.html#1405" class="Function">pi-view</a> <a id="9743" href="Meta.Effect.Map.html#494" class="Function Operator">&lt;$&gt;</a> <a id="9747" href="Agda.Builtin.Reflection.html#9696" class="Postulate">get-type</a> <a id="9756" href="Meta.Reflection.Signature.html#9711" class="Bound">dat</a>
  <a id="9762" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="9767" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="9769" href="Meta.Reflection.Signature.html#8229" class="Function">compute-telescope</a> <a id="9787" href="Meta.Reflection.Signature.html#9705" class="Bound">class</a> <a id="9793" class="Number">0</a> <a id="9795" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9798" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9801" href="Meta.Reflection.Signature.html#9723" class="Bound">tele</a>

<a id="9807" class="Comment">-- Like `instance-telescope`, but instead return the complete pi-type of</a>
<a id="9880" class="Comment">-- the derived instance.</a>
<a id="instance-type"></a><a id="9905" href="Meta.Reflection.Signature.html#9905" class="Function">instance-type</a> <a id="9919" class="Symbol">:</a> <a id="9921" class="Symbol">(</a><a id="9922" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="9926" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="9931" class="Symbol">→</a> <a id="9933" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a><a id="9937" class="Symbol">)</a> <a id="9939" class="Symbol">→</a> <a id="9941" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="9946" class="Symbol">→</a> <a id="9948" href="Agda.Builtin.Reflection.html#8602" class="Postulate">TC</a> <a id="9951" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
<a id="9956" href="Meta.Reflection.Signature.html#9905" class="Function">instance-type</a> <a id="9970" href="Meta.Reflection.Signature.html#9970" class="Bound">class</a> <a id="9976" href="Meta.Reflection.Signature.html#9976" class="Bound">dat</a> <a id="9980" class="Symbol">=</a> <a id="9982" class="Keyword">do</a>
  <a id="9987" class="Symbol">(</a><a id="9988" href="Meta.Reflection.Signature.html#9988" class="Bound">tel</a> <a id="9992" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9994" href="Meta.Reflection.Signature.html#9994" class="Bound">vs</a><a id="9996" class="Symbol">)</a> <a id="9998" href="Meta.Effect.Bind.html#283" class="Field Operator">←</a> <a id="10000" href="Meta.Reflection.Signature.html#9605" class="Function">instance-telescope</a> <a id="10019" href="Meta.Reflection.Signature.html#9970" class="Bound">class</a> <a id="10025" href="Meta.Reflection.Signature.html#9976" class="Bound">dat</a>
  <a id="10031" href="Meta.Effect.Idiom.html#354" class="Field">pure</a> <a id="10036" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="10038" href="Data.Reflection.Term.html#1749" class="Function">unpi-view</a> <a id="10048" href="Meta.Reflection.Signature.html#9988" class="Bound">tel</a> <a id="10052" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="10054" href="Meta.Reflection.Signature.html#9970" class="Bound">class</a> <a id="10060" href="Foundations.Pi.Base.html#1574" class="Function Operator">$</a> <a id="10062" href="Data.Reflection.Argument.html#1573" class="Function">argN</a> <a id="10067" class="Symbol">(</a><a id="10068" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="10072" href="Meta.Reflection.Signature.html#9976" class="Bound">dat</a> <a id="10076" href="Meta.Reflection.Signature.html#9994" class="Bound">vs</a><a id="10078" class="Symbol">)</a>
</pre></body></html>